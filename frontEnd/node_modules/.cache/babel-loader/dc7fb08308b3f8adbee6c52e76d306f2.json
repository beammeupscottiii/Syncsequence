{"ast":null,"code":"var _jsxFileName = \"/home/jce/Web Dev Space/Syncsequence/frontEnd/src/components/sections/userLog.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$();\n\n/* * * V i t a l s * * */\nimport * as React from 'react';\nimport APIaccess from '../../apiaccess';\nimport Log from '../blog/log';\nimport './sections.css';\nimport './userLog.css';\nimport FullList from '../../components/base/fullList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet accessAPI = APIaccess();\n\nfunction ReturnElement(_ref) {\n  _s();\n\n  let {\n    el,\n    setCurrent,\n    current\n  } = _ref;\n  let [ifLeave, setLeave] = React.useState(false);\n\n  let goBack = () => {\n    setLeave(true);\n    let second = setTimeout(() => {\n      let elCurrent = el.current;\n      elCurrent.classList.add('_enter');\n    }, 300);\n    let third = setTimeout(() => {\n      setCurrent({ ...current,\n        modal: false\n      });\n    }, 500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xml: true,\n    version: \"1.0\",\n    viewBox: \"109.21 220.42 140.874 69.937\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    id: \"return\",\n    className: ifLeave ? \"leave\" : \"\",\n    onClick: goBack,\n    children: [/*#__PURE__*/_jsxDEV(\"polyline\", {\n      id: \"top\",\n      points: \"249.644 250.369 109.21 250.393 159.165 220.42\",\n      transform: \"matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 1.4210854715202004e-14)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n      id: \"bottom\",\n      points: \"250.084 260.408 109.65 260.384 159.605 290.357\",\n      transform: \"matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 1.4210854715202004e-14)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 3\n  }, this);\n}\n\n_s(ReturnElement, \"q5vVjm9fJxBigmj+aJY1cjjdIog=\");\n\n_c = ReturnElement;\n\nfunction DraftIcon(_ref2) {\n  _s2();\n\n  let {\n    toggleDrafts\n  } = _ref2;\n\n  /* \r\n  \t09. 13. 2024\r\n  \topens FullList \r\n  \twhich should be -within- userlog \r\n  \t(though this may not be optimal)\r\n  */\n  const [ifHover, setHover] = React.useReducer(state => !state, false);\n\n  const handleClick = () => {\n    setHover();\n    let delay = setTimeout(() => {\n      toggleDrafts();\n      setHover();\n    }, 200);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    id: \"draftIcon\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"33.049\",\n    height: \"40.075\",\n    viewBox: \"0 0 33.049 40.075\",\n    onClick: handleClick,\n    className: ifHover ? \"hover\" : \"\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      transform: \"translate(-259 -13.925)\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        class: \"a\",\n        d: \"M267 20a6.007 6.007 0 0 0-6 6v20a6.007 6.007 0 0 0 6 6h14a6.007 6.007 0 0 0 6-6V26a6.007 6.007 0 0 0-6-6zm0-2h14a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8h-14a8 8 0 0 1-8-8V26a8 8 0 0 1 8-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        class: \"a\",\n        d: \"M278.25 28.5h-12v-1h12Zm3.5 4h-15.5v-1h15.5Zm0 4h-15.5v-1h15.5Zm-3 4h-12.5v-1h12.5Zm3 4h-15.5v-1h15.5Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n        width: \"3\",\n        height: \"20\",\n        rx: \"1.5\",\n        transform: \"rotate(30 118.741 547.085)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M1.5 0A1.5 1.5 0 0 1 3 1.5v17a1.5 1.5 0 0 1-3 0v-17A1.5 1.5 0 0 1 1.5 0\",\n        transform: \"rotate(30 118.741 547.085)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 3\n  }, this);\n}\n\n_s2(DraftIcon, \"qzoc5QtihVTBi4O1KbkIce5nREE=\");\n\n_c2 = DraftIcon;\n\nfunction DropSelect(_ref3) {\n  _s3();\n\n  let {\n    tagged,\n    setTagged\n  } = _ref3;\n  let [active, setActive] = React.useReducer(state => !state, false);\n\n  let returnOption = option => {\n    let listItem = /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"option\",\n      onClick: () => {\n        setTagged(tagged.map(user => {\n          if (user._id == option._id) {\n            if (user.selected == false) {\n              return { ...user,\n                selected: true\n              };\n            } else if (user.selected == true) {\n              return { ...user,\n                selected: false\n              };\n            }\n          } else {\n            return user;\n          }\n        }));\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: option.userName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 3\n    }, this);\n\n    return listItem;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"taggedUsers\",\n    children: [!tagged.some(user => user.selected == true) && /*#__PURE__*/_jsxDEV(\"p\", {\n      onClick: () => {\n        setActive();\n      },\n      children: \"Toggle to Tag Others\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      id: \"selected\",\n      onClick: () => {\n        setActive();\n      },\n      children: tagged.filter(user => user.selected == true).map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: user.userName\n      }, user.userName, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 4\n    }, this), active && /*#__PURE__*/_jsxDEV(\"ul\", {\n      id: \"options\",\n      children: tagged.map(user => returnOption(user))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 3\n  }, this);\n}\n\n_s3(DropSelect, \"NbrobgdiImE5WgOWXcgPDEFFH5Y=\");\n\n_c3 = DropSelect;\n\nfunction MultiSelect(_ref4) {\n  _s4();\n\n  let {\n    suggestions,\n    setSuggestions,\n    setModal\n  } = _ref4;\n\n  /**\r\n   * component is input, which houses tags as selectable items within\r\n   * a dropdown\r\n   * \r\n   * typing in input adjusts the results,\r\n   * selecting item puts it within span container, within input\r\n   * clicking on selected item removes it from selected\r\n   * \r\n   */\n  let changer;\n  let topics = suggestions;\n  const [active, setActive] = React.useState(0);\n  const [filtered, setFiltered] = React.useState([]);\n  const [isShow, setIsShow] = React.useState(false);\n  const [input, setInput] = React.useState(\"\"); // console.log(topics);\n\n  let onChange = e => {\n    const input = e.currentTarget.value; // console.log(suggestions[0].name)\n\n    const newFilteredSuggestions = topics.filter((el, index) => {\n      if (el.name.toLowerCase().indexOf(input.toLowerCase()) > -1) {\n        return el;\n      }\n    });\n    setActive('');\n    setFiltered(newFilteredSuggestions);\n    setIsShow(true);\n    setInput(e.currentTarget.value);\n  };\n\n  let onClick = e => {\n    setActive('');\n    let copy = suggestions.map(el => {\n      if (el.name == e.currentTarget.innerText) {\n        return { ...el,\n          selected: true\n        };\n      } else {\n        return el;\n      }\n    });\n    setSuggestions(copy);\n  };\n\n  let onKeyDown = e => {\n    if (e.keyCode === 13) {\n      // the enter key\n      e.preventDefault();\n      setActive(0);\n      setIsShow(false); // setInput(filtered[active]);\n\n      console.log(filtered[active]);\n      let copy = suggestions.map(el => {\n        if (el.name == filtered[active].name) {\n          return { ...el,\n            selected: true\n          };\n        } else {\n          return el;\n        }\n      });\n      setSuggestions(copy);\n    }\n  };\n\n  let renderAutocomplete = () => {\n    if (isShow && input) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"resultsWrapper\",\n        children: [filtered.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          id: \"autocomplete\",\n          children: filtered.map((suggestion, index) => {\n            let className;\n\n            if (index === active) {\n              className = 'active';\n            }\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: (className, suggestion.type),\n              onClick: onClick,\n              children: suggestion.name\n            }, suggestion.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 10\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 7\n        }, this) : null, filtered.length < 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"no-autocomplete\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No Results Found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 7\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttonDefault\",\n          id: \"makeNewTag\",\n          onClick: e => {\n            e.preventDefault();\n            setModal();\n            setIsShow(false);\n          },\n          children: \"Create a New Tag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 5\n      }, this);\n    }\n  };\n  /**\r\n   * 12. 25. 2023\r\n   * \r\n   * implement this into onChange element for input\r\n   */\n\n\n  let tagsSelect = React.useRef();\n  React.useEffect(() => {\n    let tags = tagsSelect.current;\n    let selected = tags.children[0].children[0];\n    console.log(getComputedStyle(selected).width);\n\n    if (parseInt(getComputedStyle(selected).width) > window.innerWidth * 0.45) {\n      tags.children[0].style.flexDirection = 'column';\n    } else {\n      tags.children[0].style.flexDirection = 'row';\n    }\n  }, [suggestions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"tagsSelection\",\n    ref: tagsSelect,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"inputWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        id: \"selected\",\n        children: suggestions.map(el => {\n          if (el.selected == true) {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => {\n                let copy = suggestions.map(sugg => {\n                  if (sugg.name == el.name) {\n                    return { ...sugg,\n                      selected: false\n                    };\n                  } else {\n                    return sugg;\n                  }\n                });\n                setSuggestions(copy);\n                setActive('');\n                let tagsInput = document.getElementById('tags');\n                tagsInput.value = '';\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: el.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 50 50\",\n                width: \"16px\",\n                height: \"16px\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 11\n              }, this)]\n            }, el.name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"tags\",\n        placeholder: \"Type to search tags \",\n        type: \"text\",\n        onChange: onChange,\n        onKeyDown: onKeyDown,\n        value: input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 4\n    }, this), renderAutocomplete()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 3\n  }, this);\n}\n\n_s4(MultiSelect, \"mUw+Ct4dPzv9C3BJO8UT1JK8IfE=\");\n\n_c4 = MultiSelect;\nexport function CreatePost(_ref5) {\n  _s5();\n\n  let {\n    setCurrent,\n    current,\n    socketMessage,\n    setSocketMessage,\n    selectedDate\n  } = _ref5;\n  const userID = sessionStorage.getItem('userID');\n  const username = sessionStorage.getItem('userName');\n  const privacySetting = sessionStorage.getItem('privacySetting');\n  const [drafts, setDrafts] = React.useState([]);\n  const [formData, setFormData] = React.useState({});\n  const [suggestions, setSuggestions] = React.useState([]);\n  const [tagged, setTagged] = React.useState([]); //user's connections\n\n  const [isPrivate, setPrivate] = React.useReducer(state => !state, false);\n  const [postContent, setPostContent] = React.useState([{\n    content: '',\n    type: 'text',\n    index: 0\n  }]); //this is set to user's current coordinates when they first toggle 'Pin Location'\n\n  const [locationData, setLocationData] = React.useState({\n    //values are null until user initially selects pinLocation \n    lon: undefined,\n    //40.6569 \n    lat: undefined //-73.9605\n\n  });\n  const [draftList, setDraftList] = React.useReducer(state => !state, false);\n  const el = React.useRef();\n  const element = el.current;\n\n  const handleChange = event => {\n    if (event.target.name == 'tags') {\n      let value = event.target.value;\n      let array = value.split(/[, ]+/);\n      setFormData({ ...formData,\n        [event.target.name]: event.target.value\n      });\n    } else if (event.target.name == 'image') {\n      setPostContent([...postContent, {\n        content: event.target.files[0],\n        type: 'media',\n        index: postContent.length - 0.5,\n        url: URL.createObjectURL(event.target.files[0])\n      }]);\n    } // else if(event.target.name == 'content') {\n    // \tlet copy;\n    // \tfor(let i = 0; i < postContent.length; i++) {\n    // \t\tif(postContent[i].index == event.target.dataset.index) {\n    // \t\t\tcopy = true;\n    // \t\t}\n    // \t}\n    // \t if (copy == true) {\n    // \t\tif(postContent.length == 1) {\n    // \t\t\tsetPostContent([\n    // \t\t\t\t{ \n    // \t\t\t\t\tcontent: event.target.value,\n    // \t\t\t\t\ttype: \"text\", \n    // \t\t\t\t\tindex: event.target.dataset.index \n    // \t\t\t\t}\t\t\n    // \t\t\t])\n    // \t\t} else {\n    // \t\t\tlet _postContent = JSON.parse(JSON.stringify(postContent));\n    // \t\t\t_postContent.pop();\n    // \t\t\tsetPostContent([\n    // \t\t\t\t..._postContent,\n    // \t\t\t\t{\n    // \t\t\t\t\tcontent: event.target.value,\n    // \t\t\t\t\ttype: \"text\", \n    // \t\t\t\t\tindex: event.target.dataset.index\n    // \t\t\t\t}\n    // \t\t\t])\n    // \t\t}\n    // \t} \n    //chatGPT recommended update\n    else if (event.target.name == 'content') {\n      let existingItem = postContent.find(item => item.index == event.target.dataset.index);\n\n      if (existingItem) {\n        // Update existing content\n        setPostContent(postContent.map(item => item.index == event.target.dataset.index ? { ...item,\n          content: event.target.value\n        } : item));\n      } else {\n        // Add new content\n        setPostContent([...postContent, {\n          content: event.target.value,\n          type: 'text',\n          index: event.target.dataset.index\n        }]);\n      }\n    } else {\n      setFormData({ ...formData,\n        [event.target.name]: event.target.value\n      });\n    }\n  }; //older submitPost function\n\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    console.log(postContent);\n    let title = document.getElementById('title');\n\n    if (!title.value.trim() || !postContent.some(content => {\n      if (content.type === 'text') {\n        // Only apply trim to text content\n        return typeof content.content === 'string' && content.content.trim() !== '';\n      } else if (content.type === 'media') {\n        // Check if media content is a valid File object\n        return content.content instanceof File;\n      }\n    })) {\n      setSocketMessage({\n        type: 'error',\n        message: 'At least a Title, Text, or Media is needed to make a post!'\n      });\n      return; // Stop the form submission if validation fails\n    } else {\n      element.classList.add('_loading');\n      let submission = new FormData();\n      submission.append('type', 'entry');\n      submission.append('title', formData.title ? formData.title : title.value);\n      submission.append('isPrivate', isPrivate);\n      submission.append('privacyTogglable', sessionStorage.getItem('privacySetting'));\n      submission.append('profilePhoto', sessionStorage.getItem('profilePhoto'));\n\n      for (let i = 0; i < postContent.length; i++) {\n        const {\n          type,\n          content,\n          index\n        } = postContent[i];\n\n        if (type == 'text') {\n          if (typeof content === 'string' && content.trim() === '') {\n            continue; // Skip empty text content\n          } else {\n            let content = postContent[i].content;\n            submission.append(`${index}`, content);\n          }\n        } else if (type == 'media') {\n          let content = postContent[i].content;\n          submission.append(`${index}`, content);\n        }\n      }\n\n      let tags = suggestions.filter(el => el.selected == true).map(el => el.name);\n\n      if (tags.length > 0) {\n        submission.append('tags', tags);\n      }\n\n      let taggedUsers = tagged.filter(user => user.selected == true).map(user => {\n        return {\n          _id: user._id,\n          username: user.userName\n        };\n      });\n\n      if (taggedUsers.length > 0) {\n        submission.append('taggedUsers', JSON.stringify(taggedUsers));\n      }\n\n      console.log(taggedUsers);\n\n      if (selectedDate.day != null) {\n        submission.append('usePostedByDate', false);\n        submission.append('postedOn_month', selectedDate.month);\n        submission.append('postedOn_day', selectedDate.day);\n        submission.append('postedOn_year', selectedDate.year);\n      } else {\n        submission.append('usePostedByDate', true);\n      }\n\n      if (pinLocation.open) {\n        submission.append('geoLon', pinLocation.lon);\n        submission.append('geoLat', pinLocation.lat);\n      }\n\n      console.log(submission);\n      console.log(tags);\n      let submit = await accessAPI.createPost(submission);\n\n      if (submit.confirm == true) {\n        console.log(\"Post submission successful\"); // console.log(submit);\n\n        element.classList.remove('_enter');\n        element.classList.add('_fade');\n        let delay = setTimeout(() => {\n          setCurrent({ ...current,\n            modal: false\n          });\n        }, 300);\n        let utilizedDraft = drafts.find(post => post.selected == true);\n\n        if (utilizedDraft) {\n          await accessAPI.deleteDraft(utilizedDraft._id);\n        }\n      } else if (submit.message) {\n        element.classList.remove('_loading');\n        console.log('Issue with post submission');\n        setSocketMessage({\n          type: 'error',\n          message: submit.message\n        });\n      }\n      /**\r\n       * 10. 27. 2023\r\n       * setSocketMessage here with info for making notif for tagged users\r\n       */\n\n\n      if (tagged.some(user => user.selected == true)) {\n        let recips = tagged.filter(user => user.selected == true).map(user => {\n          return user._id;\n        });\n        setSocketMessage({\n          type: 'tagging',\n          isRead: false,\n          senderID: userID,\n          senderUsername: username,\n          url: submit.postURL,\n          message: 'sent',\n          recipients: recips,\n          postTitle: title.value\n        });\n      } else {\n        setSocketMessage({\n          confirm: 'postUpload'\n        });\n      }\n    }\n  };\n\n  const draftPost = async event => {\n    event.preventDefault();\n    console.log(postContent);\n\n    if (!formData.title) {\n      setSocketMessage({\n        type: 'error',\n        message: 'Atleast a Title, Text or Media is needed to make a post!'\n      });\n    } else if (postContent.length < 1) {\n      setSocketMessage({\n        type: 'error',\n        message: 'Atleast a Title, Text or Media is needed to make a post!'\n      });\n    } else {\n      element.classList.add('_loading');\n      let submission = new FormData();\n      submission.append('type', 'draft');\n      submission.append('title', formData.title);\n      submission.append('isPrivate', isPrivate);\n      submission.append('privacyTogglable', sessionStorage.getItem('privacySetting'));\n      submission.append('profilePhoto', sessionStorage.getItem('profilePhoto'));\n\n      for (let i = 0; i < postContent.length; i++) {\n        if (postContent[i].type == 'text') {\n          if (postContent[i].content === '') {\n            return null;\n          } else {\n            let content = postContent[i].content;\n            submission.append(`${postContent[i].index}`, content);\n          }\n        } else if (postContent[i].type == 'image') {\n          let content = postContent[i].content;\n          submission.append(`${postContent[i].index}`, content);\n        }\n      }\n\n      let tags = suggestions.filter(el => el.selected == true).map(el => el.name);\n\n      if (tags.length > 0) {\n        submission.append('tags', tags);\n      }\n\n      let taggedUsers = tagged.filter(user => user.selected == true).map(user => {\n        return {\n          _id: user._id,\n          username: user.userName\n        };\n      });\n\n      if (taggedUsers.length > 0) {\n        submission.append('taggedUsers', JSON.stringify(taggedUsers));\n      }\n\n      console.log(taggedUsers);\n\n      if (selectedDate.day != null) {\n        submission.append('usePostedByDate', false);\n        submission.append('postedOn_month', selectedDate.month);\n        submission.append('postedOn_day', selectedDate.day);\n        submission.append('postedOn_year', selectedDate.year);\n      } else {\n        submission.append('usePostedByDate', true);\n      }\n\n      if (pinLocation.open) {\n        submission.append('geoLon', pinLocation.lon);\n        submission.append('geoLat', pinLocation.lat);\n      }\n\n      console.log(submission);\n      console.log(tags);\n      let submit = await accessAPI.createPost(submission);\n\n      if (submit.confirm == true) {\n        console.log(submit);\n        element.classList.remove('_enter');\n        element.classList.add('_fade');\n        let second = setTimeout(() => {\n          setCurrent({ ...current,\n            modal: false\n          });\n        }, 300);\n        let third = setTimeout(() => {\n          setSocketMessage({\n            confirm: 'postDrafted'\n          });\n        }, 300);\n      } else if (submit.message) {\n        element.classList.remove('_loading');\n        console.log('Issue with post submission');\n        setSocketMessage({\n          type: 'error',\n          message: submit.message\n        });\n      }\n    }\n  };\n\n  const newContent = type => {\n    setPostContent([...postContent, {\n      content: '',\n      type: type,\n      index: postContent.length\n    }]);\n  };\n\n  const textareaImageAdd = (index, type, info) => {\n    if (type == 'text') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"textareaImageAdd\",\n          name: \"content\",\n          placeholder: \"Content\",\n          onBlur: handleChange,\n          onChange: handleChange,\n          \"data-index\": index,\n          rows: \"8\",\n          cols: \"30\",\n          value: info ? info : undefined\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 7\n        }, this), index > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `buttonDefault remove`,\n          onClick: e => {\n            e.preventDefault();\n            console.log(index);\n            let copy2 = postContent.filter(post => post.index != index);\n            setPostContent(copy2);\n          },\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 6\n      }, this);\n    } else if (type == 'media') {\n      // let link = images.find(element => element.index == index);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: info\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `buttonDefault remove`,\n          onClick: e => {\n            e.preventDefault();\n            let copy2 = postContent.filter(post => post.index != index);\n            setPostContent(copy2);\n          },\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 5\n      }, this);\n    }\n  };\n\n  const getConnections = async () => {\n    let request = await accessAPI.getConnections(userID);\n    request.forEach(user => {\n      user.selected = false;\n    });\n    setTagged(request);\n  };\n\n  const getSuggestions = async () => {\n    let topics = await accessAPI.getSuggestions();\n    let userTags = await accessAPI.getUserTags(); //gets all tags \n\n    console.log(userTags);\n    let results = [];\n\n    let _topics = topics.map(topic => {\n      return {\n        name: topic,\n        type: 'topic',\n        selected: false\n      };\n    });\n\n    results.push(..._topics);\n\n    if (userTags != false) {\n      let _userTags = userTags.map(topic => {\n        return {\n          name: topic.name,\n          type: 'tag',\n          selected: false\n        };\n      });\n\n      results.push(..._userTags);\n    }\n\n    console.log(results);\n    setSuggestions(results);\n  };\n\n  const getDrafts = async () => {\n    let request = await accessAPI.getDrafts();\n    setDrafts(request);\n  };\n\n  const [enter, setEnter] = React.useReducer(state => !state, true);\n  const [modal, setModal] = React.useReducer(state => !state, false);\n  const [isPrivate_2, setIsPrivate_2] = React.useReducer(state => !state, false);\n  const [newTag_value, setNewTag_value] = React.useState('');\n  const tagModal = React.useRef(); //should be locationData values by default\n  //these values are added to post submission\n\n  const [pinLocation, setPinLocation] = React.useState({\n    open: false,\n    lon: undefined,\n    lat: undefined\n  });\n  let writtenDate;\n\n  if (selectedDate.day) {\n    writtenDate = `${selectedDate.month + 1}. ${selectedDate.day}. ${selectedDate.year}`;\n  }\n\n  let newTag_onChange = e => {\n    const input = e.currentTarget.value;\n    setNewTag_value(e.currentTarget.value);\n  };\n\n  let newTag_submit = async e => {\n    let data = {\n      type: 'tag',\n      name: newTag_value,\n      owner: isPrivate_2 == true ? userID : null,\n      admins: [`${isPrivate_2 == true ? userID : null}`],\n      ownerUsername: isPrivate_2 == true ? username : null,\n      hasAccess: [userID],\n      isPrivate: isPrivate_2 == true ? true : false,\n      action: 'newTag'\n    };\n    setSocketMessage(data);\n    console.log(data);\n    /*\r\n    \t2nd part of operation in useEffect\r\n    */\n  };\n\n  const onChange = e => {\n    if (e.target.name == 'lon') {\n      setPinLocation({ ...pinLocation,\n        lon: e.target.value\n      });\n    } else if (e.target.name == 'lat') {\n      setPinLocation({ ...pinLocation,\n        lat: e.target.value\n      });\n    }\n  };\n\n  const getGeoInfo_options = {\n    enableHighAccuracy: true,\n    timeout: 5000,\n    maximumAge: 0\n  };\n\n  const getGeoInfo_success = pos => {\n    // setLocationData({\n    // \tlon: pos.longitude,\n    // \tlat: pos.latitude\n    // })\n    setPinLocation({ ...pinLocation,\n      lon: pos.longitude,\n      lat: pos.latitude\n    });\n    console.log('Location data saved within state');\n  };\n\n  const getGeoInfo_error = err => {\n    console.log(`Error (${err.code}): ${err.message}`);\n  }; //for getting user location details upon toggling 'pinLocation'\n\n\n  React.useEffect(() => {\n    if (pinLocation.lon) {\n      return;\n    }\n\n    if (navigator.geolocation) {\n      navigator.permissions.query({\n        name: \"geolocation\"\n      }).then(result => {\n        console.log(result);\n\n        if (result.state == \"granted\") {\n          navigator.geolocation.getCurrentPosition(getGeoInfo_success, getGeoInfo_error, getGeoInfo_options);\n        } else if (result.state == \"prompt\") {\n          navigator.geolocation.getCurrentPosition(getGeoInfo_success, getGeoInfo_error, getGeoInfo_options);\n        } else if (result.state == \"denied\") {\n          //can utilize the popUpNotif to instruct user on how to activate location permissions\n          // setLocationData({\n          // \tlon: undefined,\n          // \tlat: undefined\n          // })\n          setPinLocation({ ...pinLocation,\n            lon: undefined,\n            lat: undefined\n          });\n        }\n      });\n    } else {\n      console.log(\"geolocation permissions not active\");\n    }\n  }, [pinLocation.open]); //update main data: connections, topics and tags, drafted posts\n\n  React.useEffect(() => {\n    getConnections();\n    getSuggestions();\n    getDrafts();\n  }, []); //update tags on new tag creation\n\n  React.useEffect(() => {\n    if (socketMessage.type == 'confirmation' && socketMessage.message == 'tagAdd') {\n      getSuggestions();\n      setModal();\n    }\n  }, [socketMessage]); //Enter animation\n\n  React.useEffect(() => {\n    let elCurrent = el.current;\n    let delay = setTimeout(() => {\n      elCurrent.classList.remove('_enter');\n    }, 200);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"createPost\",\n    ref: el,\n    className: `_enter`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"headerWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(ReturnElement, {\n        el: el,\n        current: current,\n        setCurrent: setCurrent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 927,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"dateSetter\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Creating Entry for\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 6\n        }, this), current.calendar && /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: writtenDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 932,\n          columnNumber: 7\n        }, this), !current.calendar && /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Today\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 935,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 929,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DraftIcon, {\n        toggleDrafts: setDraftList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 925,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      encType: \"multipart/form-data\",\n      children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"title\",\n          id: \"title\",\n          placeholder: \"Title\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 949,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"contentWrapper\",\n          children: postContent.map(element => {\n            if (element.type == 'text') {\n              return textareaImageAdd(element.index, element.type, element.content);\n            } else if (element.type == 'media') {\n              return textareaImageAdd(element.index, element.type, element.url);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 950,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"moreContent\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: 'buttonDefault',\n            onClick: e => {\n              e.preventDefault();\n              newContent('text');\n            },\n            children: \"Add Text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 971,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"imageAdd\",\n            onChange: handleChange,\n            htmlFor: \"addImage\",\n            onClick: e => {\n              document.getElementById('addImage').click();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              hidden: true,\n              id: \"addImage\",\n              type: \"file\",\n              accept: \"image/\",\n              name: \"image\",\n              hidden: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 982,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Add Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 988,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 979,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 970,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(DropSelect, {\n          tagged: tagged,\n          setTagged: setTagged\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(MultiSelect, {\n          suggestions: suggestions,\n          setSuggestions: setSuggestions,\n          setModal: setModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 995,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"setPrivate\",\n          className: `buttonDefault ${isPrivate == true ? 'active' : 'nonActive'}`,\n          onClick: e => {\n            e.preventDefault();\n            setPrivate();\n          },\n          children: \"PRIVATE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 999,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"pinLocation\",\n          className: `buttonDefault ${pinLocation.open == true ? 'active' : 'nonActive'}`,\n          onClick: e => {\n            e.preventDefault();\n\n            if (pinLocation.open == false) {\n              setPinLocation({ ...pinLocation,\n                open: true\n              });\n            } else {\n              setPinLocation({ ...pinLocation,\n                open: false\n              });\n            }\n          },\n          children: \"Pin Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1005,\n          columnNumber: 6\n        }, this), pinLocation.open && /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"coordinatesWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"lonWrap\",\n            className: `${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`,\n              children: \"LON\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1028,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"lon\",\n              onChange: onChange,\n              placeholder: pinLocation.lon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1029,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1027,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"latWrap\",\n            className: `${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`,\n              children: \"LAT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1035,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"lat\",\n              onChange: onChange,\n              placeholder: pinLocation.lat\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1034,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 948,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 947,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"options\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"buttonDefault\",\n        onClick: draftPost,\n        children: \"Draft\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1051,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"buttonDefault\",\n        onClick: handleSubmit,\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1053,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1050,\n      columnNumber: 4\n    }, this), modal && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"createNewTag\",\n      ref: tagModal,\n      className: `${modal == true ? 'active' : 'leave'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create New Tag\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1058,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Enter a single word phrase\",\n        onChange: newTag_onChange,\n        value: newTag_value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"buttonWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `buttonDefault`,\n          onClick: e => {\n            tagModal.current.classList.remove('active');\n            tagModal.current.classList.add('leave');\n            setTimeout(() => {\n              setModal();\n            }, 250);\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1064,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `buttonDefault ${isPrivate_2 == true ? 'active' : 'nonActive'}`,\n          onClick: e => {\n            e.preventDefault();\n            setIsPrivate_2();\n          },\n          children: \"PRIVATE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1072,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `buttonDefault`,\n          onClick: newTag_submit,\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1078,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1057,\n      columnNumber: 5\n    }, this), draftList && /*#__PURE__*/_jsxDEV(FullList, {\n      data: drafts,\n      mode: 'viewDrafts',\n      source: `${username}'s Drafts`,\n      socketMessage: socketMessage,\n      setSocketMessage: setSocketMessage,\n      setFullList: setDraftList,\n      postContent: postContent,\n      setPostContent: setPostContent,\n      groupID: '',\n      setPinLocation: setPinLocation,\n      setLocationData: setLocationData,\n      setPrivate: setPrivate,\n      suggestions: suggestions,\n      setSuggestions: setSuggestions,\n      tagged: tagged,\n      setTagged: setTagged,\n      setDrafts: setDrafts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1085,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 920,\n    columnNumber: 3\n  }, this);\n}\n\n_s5(CreatePost, \"uuy828n9ZheurpIBpUqoVNekr3Q=\");\n\n_c5 = CreatePost;\nexport default function UserLog(_ref6) {\n  _s6();\n\n  let {\n    active,\n    setCurrent,\n    current,\n    log,\n    setLog,\n    sectionClass,\n    refe\n  } = _ref6;\n  // let [place, setPlace] = React.useState(active == 1 || active == null ? '' : 'not');\n  let userID = sessionStorage.getItem('userID');\n  let [isModal, openModal] = React.useReducer(state => !state, false);\n  /**\r\n   * For now, get userLog on mount\r\n   * log.jsx exports component and necessary functions\r\n   * function to open independant post within log.jsx\r\n   */\n  // let updateLog = async() => {\n  // \tlet data = await accessAPI.pullUserLog();\n  // \tsetLog(data);\n  // }\n\n  let updateLog = async () => {\n    let posts = await accessAPI.pullUserLog({\n      type: 'customLog',\n      logNumber: current.log\n    });\n    setLog(posts);\n  };\n\n  React.useEffect(() => {\n    updateLog();\n    setCurrent({ ...current,\n      social: false\n    });\n  }, []);\n  React.useEffect(() => {\n    updateLog();\n  }, [current.modal, current.customizer]);\n  /* change userLog class based on state from Home component in Main.jsx */\n  // React.useEffect(()=> {\n  // \tif (active == undefined) {\n  // \t\tconsole.log(active);\n  // \t\treturn;\n  // \t}\n  // \tif(active !== 1 || active == 'x') {\n  // \t\tsetPlace('not');\n  // \t\tconsole.log(active);\n  // \t}\n  // }, [active])\n\n  let noHeading = false;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"userLog\",\n    className: `${sectionClass.home}`,\n    ref: refe,\n    children: /*#__PURE__*/_jsxDEV(Log, {\n      data: log,\n      section: \"user\",\n      noHeading: noHeading,\n      current: current,\n      setCurrent: setCurrent,\n      updateLog: updateLog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1162,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1161,\n    columnNumber: 3\n  }, this);\n}\n\n_s6(UserLog, \"9bvOflC0ZKmccsepck2Y9Fb+jCU=\");\n\n_c6 = UserLog;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"ReturnElement\");\n$RefreshReg$(_c2, \"DraftIcon\");\n$RefreshReg$(_c3, \"DropSelect\");\n$RefreshReg$(_c4, \"MultiSelect\");\n$RefreshReg$(_c5, \"CreatePost\");\n$RefreshReg$(_c6, \"UserLog\");","map":{"version":3,"names":["React","APIaccess","Log","FullList","accessAPI","ReturnElement","el","setCurrent","current","ifLeave","setLeave","useState","goBack","second","setTimeout","elCurrent","classList","add","third","modal","DraftIcon","toggleDrafts","ifHover","setHover","useReducer","state","handleClick","delay","DropSelect","tagged","setTagged","active","setActive","returnOption","option","listItem","map","user","_id","selected","userName","some","filter","MultiSelect","suggestions","setSuggestions","setModal","changer","topics","filtered","setFiltered","isShow","setIsShow","input","setInput","onChange","e","currentTarget","value","newFilteredSuggestions","index","name","toLowerCase","indexOf","onClick","copy","innerText","onKeyDown","keyCode","preventDefault","console","log","renderAutocomplete","length","suggestion","className","type","tagsSelect","useRef","useEffect","tags","children","getComputedStyle","width","parseInt","window","innerWidth","style","flexDirection","sugg","tagsInput","document","getElementById","CreatePost","socketMessage","setSocketMessage","selectedDate","userID","sessionStorage","getItem","username","privacySetting","drafts","setDrafts","formData","setFormData","isPrivate","setPrivate","postContent","setPostContent","content","locationData","setLocationData","lon","undefined","lat","draftList","setDraftList","element","handleChange","event","target","array","split","files","url","URL","createObjectURL","existingItem","find","item","dataset","handleSubmit","title","trim","File","message","submission","FormData","append","i","taggedUsers","JSON","stringify","day","month","year","pinLocation","open","submit","createPost","confirm","remove","utilizedDraft","post","deleteDraft","recips","isRead","senderID","senderUsername","postURL","recipients","postTitle","draftPost","newContent","textareaImageAdd","info","copy2","getConnections","request","forEach","getSuggestions","userTags","getUserTags","results","_topics","topic","push","_userTags","getDrafts","enter","setEnter","isPrivate_2","setIsPrivate_2","newTag_value","setNewTag_value","tagModal","setPinLocation","writtenDate","newTag_onChange","newTag_submit","data","owner","admins","ownerUsername","hasAccess","action","getGeoInfo_options","enableHighAccuracy","timeout","maximumAge","getGeoInfo_success","pos","longitude","latitude","getGeoInfo_error","err","code","navigator","geolocation","permissions","query","then","result","getCurrentPosition","calendar","click","UserLog","setLog","sectionClass","refe","isModal","openModal","updateLog","posts","pullUserLog","logNumber","social","customizer","noHeading","home"],"sources":["/home/jce/Web Dev Space/Syncsequence/frontEnd/src/components/sections/userLog.jsx"],"sourcesContent":["/* * * V i t a l s * * */\r\nimport * as React from 'react';\r\nimport APIaccess from '../../apiaccess';\r\nimport Log from '../blog/log';\r\nimport './sections.css';\r\nimport './userLog.css';\r\nimport FullList from '../../components/base/fullList';\r\n\r\nlet accessAPI = APIaccess();\r\n\r\nfunction ReturnElement ({el, setCurrent, current}) {\r\n\r\n\tlet [ifLeave, setLeave] = React.useState(false);\r\n\t\r\n\tlet goBack = () => {\r\n\t\tsetLeave(true)\r\n\r\n\t\tlet second = setTimeout(()=> {\r\n\t\t\tlet elCurrent = el.current;\r\n\t\t\telCurrent.classList.add('_enter');\r\n\t\t}, 300)\r\n\t\t\r\n\t\tlet third = setTimeout(()=> {\r\n\t\t\tsetCurrent({\r\n\t\t\t\t...current,\r\n\t\t\t\tmodal: false\r\n\t\t\t})\r\n\t\t}, 500)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<svg \r\n\t\t\txml version=\"1.0\"\r\n\t\t\tviewBox=\"109.21 220.42 140.874 69.937\" \r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\tid=\"return\"\r\n\t\t\tclassName={ifLeave ? \"leave\" : \"\"}\r\n\t\t\tonClick={goBack}>\r\n\t  \t\t<polyline \r\n\t  \t\t\tid=\"top\"\r\n\t  \t\t\tpoints=\"249.644 250.369 109.21 250.393 159.165 220.42\" \r\n\t  \t\t\ttransform=\"matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 1.4210854715202004e-14)\"/>\r\n\t  \t\t<polyline \r\n\t  \t\t\tid=\"bottom\"\r\n\t  \t\t\tpoints=\"250.084 260.408 109.65 260.384 159.605 290.357\" \r\n\t  \t\t\ttransform=\"matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 1.4210854715202004e-14)\"/>\r\n\t\t</svg>\r\n\t)\r\n}\r\n\r\nfunction DraftIcon ({toggleDrafts}) {\r\n\r\n\t/* \r\n\t\t09. 13. 2024\r\n\t\topens FullList \r\n\t\twhich should be -within- userlog \r\n\t\t(though this may not be optimal)\r\n\t*/\r\n\r\n\tconst [ifHover, setHover] = React.useReducer(state => !state, false);\r\n\tconst handleClick = () => {\r\n\t\tsetHover();\r\n\t\tlet delay = setTimeout(()=> {\r\n\t\t\ttoggleDrafts();\r\n\t\t\tsetHover();\r\n\t\t}, 200)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<svg \r\n\t\t\tid=\"draftIcon\"\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\" \r\n\t\t\twidth=\"33.049\" \r\n\t\t\theight=\"40.075\" \r\n\t\t\tviewBox=\"0 0 33.049 40.075\"\r\n\t\t\tonClick={handleClick}\r\n\t\t\tclassName={ifHover ? \"hover\" : \"\"}>\r\n\t\t  <g transform=\"translate(-259 -13.925)\">\r\n\t\t    <path class=\"a\" d=\"M267 20a6.007 6.007 0 0 0-6 6v20a6.007 6.007 0 0 0 6 6h14a6.007 6.007 0 0 0 6-6V26a6.007 6.007 0 0 0-6-6zm0-2h14a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8h-14a8 8 0 0 1-8-8V26a8 8 0 0 1 8-8\"/>\r\n\t\t    <path class=\"a\" d=\"M278.25 28.5h-12v-1h12Zm3.5 4h-15.5v-1h15.5Zm0 4h-15.5v-1h15.5Zm-3 4h-12.5v-1h12.5Zm3 4h-15.5v-1h15.5Z\"/>\r\n\t\t    <rect width=\"3\" height=\"20\" rx=\"1.5\" transform=\"rotate(30 118.741 547.085)\"/>\r\n\t\t    <path d=\"M1.5 0A1.5 1.5 0 0 1 3 1.5v17a1.5 1.5 0 0 1-3 0v-17A1.5 1.5 0 0 1 1.5 0\" transform=\"rotate(30 118.741 547.085)\"/>\r\n\t\t  </g>\r\n\t\t</svg>\r\n\t)\r\n}\r\n\r\nfunction DropSelect({tagged, setTagged}) {\r\n\r\n\tlet [active, setActive] = React.useReducer(state => !state, false);\r\n\r\n\tlet returnOption = (option) => {\r\n\r\n\t\tlet listItem = \r\n\t\t<li className=\"option\" onClick={()=> {\r\n\t\t\tsetTagged(tagged.map(user => {\r\n\t\t\t\tif(user._id == option._id) {\r\n\r\n\t\t\t\t\tif(user.selected == false) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...user,\r\n\t\t\t\t\t\t\tselected: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (user.selected == true){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...user,\r\n\t\t\t\t\t\t\tselected: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn user\r\n\t\t\t\t}\r\n\t\t\t}))\r\n\t\t}}>\r\n\t\t\t<p>{option.userName}</p>\r\n\t\t</li>\r\n\r\n\t\treturn listItem\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div id=\"taggedUsers\">\r\n\t\t\t{!tagged.some(user => user.selected == true) &&\r\n\t\t\t\t<p onClick={()=> {setActive()}}>Toggle to Tag Others</p>\r\n\t\t\t}\r\n\t\t\t<ul id='selected' onClick={()=> {setActive()}}>\r\n\t\t\t\t{tagged.filter(user => user.selected == true).map(user => (\r\n\t\t\t\t\t<li key={user.userName}>{user.userName}</li>\r\n\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t\t{active &&\r\n\t\t\t\t<ul id=\"options\">\r\n\t\t\t\t\t{tagged.map(user => \r\n\t\t\t\t\t\treturnOption(user)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ul>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nfunction MultiSelect({suggestions, setSuggestions, setModal}) {\r\n\r\n\t/**\r\n\t * component is input, which houses tags as selectable items within\r\n\t * a dropdown\r\n\t * \r\n\t * typing in input adjusts the results,\r\n\t * selecting item puts it within span container, within input\r\n\t * clicking on selected item removes it from selected\r\n\t * \r\n\t */\r\n\tlet changer;\r\n\tlet topics = suggestions;\r\n\tconst [active, setActive] = React.useState(0);\r\n\tconst [filtered, setFiltered] = React.useState([]);\r\n\tconst [isShow, setIsShow] = React.useState(false);\r\n\tconst [input, setInput] = React.useState(\"\");\r\n\t// console.log(topics);\r\n\r\n\tlet onChange = (e) => {\r\n\r\n\t\tconst input = e.currentTarget.value;\r\n\t\t// console.log(suggestions[0].name)\r\n\t\tconst newFilteredSuggestions = topics.filter((el, index) => {\r\n\t\t\tif(el.name.toLowerCase().indexOf(input.toLowerCase()) > -1) {\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\t\t});\r\n\t\tsetActive('');\r\n\t\tsetFiltered(newFilteredSuggestions);\r\n\t\tsetIsShow(true);\r\n\t\tsetInput(e.currentTarget.value);\r\n\t}\r\n\r\n\tlet onClick = (e) => {\r\n\t\tsetActive('');\r\n\r\n\t\tlet copy = suggestions.map(el => {\r\n\t\t\tif(el.name == e.currentTarget.innerText) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...el,\r\n\t\t\t\t\tselected: true\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetSuggestions(copy);\r\n\t}\r\n\r\n\tlet onKeyDown = (e) => {\r\n\t\tif(e.keyCode === 13) { // the enter key\r\n\t\t\te.preventDefault()\r\n\t\t\tsetActive(0);\r\n\t\t\tsetIsShow(false);\r\n\t\t\t// setInput(filtered[active]);\r\n\r\n\t\t\tconsole.log(filtered[active])\r\n\r\n\t\t\tlet copy = suggestions.map(el => {\r\n\t\t\t\tif(el.name == filtered[active].name) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...el,\r\n\t\t\t\t\t\tselected: true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tsetSuggestions(copy);\r\n\t\t}\r\n\t}\r\n\r\n\tlet renderAutocomplete = () => {\r\n\t\tif(isShow && input) {\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div id=\"resultsWrapper\">\r\n\t\t\t\t\t{filtered.length > 0 ?\r\n\t\t\t\t\t\t<ul id=\"autocomplete\">\r\n\t\t\t\t \t\t\t{filtered.map((suggestion, index)=> {\r\n\t\t\t\t\t\t\t\tlet className;\r\n\t\t\t\t\t\t\t\tif(index === active) {\r\n\t\t\t\t\t\t\t\t\tclassName = 'active';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li className={className, suggestion.type} key={suggestion.name} onClick={onClick}>\r\n\t\t\t\t\t\t\t\t\t\t{suggestion.name}\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ul> : null\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{filtered.length < 1 ?\r\n\t\t\t\t\t\t<div id=\"no-autocomplete\">\r\n\t\t\t\t         \t<p>No Results Found</p>\r\n\t\t\t         \t</div> : null\r\n\t\t\t        }\r\n\t\t\t\t\t<button className={\"buttonDefault\"}\r\n\t\t\t\t\t\t\tid=\"makeNewTag\"\r\n\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetModal();\r\n\t\t\t\t\t\t\t\tsetIsShow(false);\r\n\t\t\t\t\t\t\t}}>Create a New Tag</button>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 12. 25. 2023\r\n\t * \r\n\t * implement this into onChange element for input\r\n\t */\r\n\r\n\tlet tagsSelect = React.useRef();\r\n\tReact.useEffect(()=> {\r\n\t\tlet tags = tagsSelect.current;\r\n\t\tlet selected = tags.children[0].children[0];\r\n\t\tconsole.log(getComputedStyle(selected).width)\r\n\r\n\t\tif(parseInt(getComputedStyle(selected).width) > (window.innerWidth * 0.45)) {\r\n\t\t\ttags.children[0].style.flexDirection = 'column';\r\n\t\t} else {\r\n\t\t\ttags.children[0].style.flexDirection = 'row';\r\n\t\t}\r\n\t}, [suggestions])\r\n\r\n\treturn (\r\n\t\t<div id=\"tagsSelection\" ref={tagsSelect}>\r\n\t\t\t<div id=\"inputWrapper\">\r\n\t\t\t\t<ul id=\"selected\">\r\n\t\t\t\t\t{suggestions.map(el => {\r\n\t\t\t\t\t\tif(el.selected == true) {\r\n\t\t\t\t\t\t\treturn <li key={el.name}\r\n\t\t\t\t\t\t\t\t\t\tonClick={()=> {\r\n\t\t\t\t\t\t\t\t\t\t\tlet copy = suggestions.map(sugg => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(sugg.name == el.name) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...sugg,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn sugg;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\tsetSuggestions(copy);\r\n\t\t\t\t\t\t\t\t\t\t\tsetActive('')\r\n\t\t\t\t\t\t\t\t\t\t\tlet tagsInput = document.getElementById('tags');\r\n\t\t\t\t\t\t\t\t\t\t\ttagsInput.value = '';\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<p>{el.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\"  \r\n\t\t\t\t\t\t\t\t\t\t\t viewBox=\"0 0 50 50\" \r\n\t\t\t\t\t\t\t\t\t\t\t width=\"16px\" \r\n\t\t\t\t\t\t\t\t\t\t\t height=\"16px\">\r\n\t\t\t\t\t\t\t\t\t\t\t <path d=\"M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t </svg>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<input id=\"tags\" placeholder=\"Type to search tags \"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\t\tvalue={input}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t{renderAutocomplete()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function CreatePost({setCurrent, current, socketMessage, setSocketMessage, selectedDate}) {\r\n\r\n\tconst userID = sessionStorage.getItem('userID');\r\n\tconst username = sessionStorage.getItem('userName');\r\n\tconst privacySetting = sessionStorage.getItem('privacySetting');\r\n\tconst [drafts, setDrafts] = React.useState([]);\r\n\tconst [formData, setFormData] = React.useState({});\r\n\tconst [suggestions, setSuggestions] = React.useState([]);\r\n\tconst [tagged, setTagged] = React.useState([]); //user's connections\r\n\tconst [isPrivate, setPrivate] = React.useReducer(state => !state, false);\r\n\tconst [postContent, setPostContent] = React.useState([\r\n\t\t{\r\n\t\t\tcontent: '',\r\n\t\t\ttype: 'text',\r\n\t\t\tindex: 0\r\n\t\t}\r\n\t]);\r\n\r\n\t//this is set to user's current coordinates when they first toggle 'Pin Location'\r\n\tconst [locationData, setLocationData] = React.useState({ //values are null until user initially selects pinLocation \r\n\t\tlon: undefined, //40.6569 \r\n\t\tlat: undefined //-73.9605\r\n\t}); \r\n\tconst [draftList, setDraftList] = React.useReducer(state => !state, false);\r\n\tconst el = React.useRef();\r\n\tconst element = el.current;\r\n\r\n\tconst handleChange = (event) => {\r\n\r\n\t\tif(event.target.name == 'tags') {\r\n\t\t\tlet value = event.target.value;\r\n\t\t\tlet array = value.split(/[, ]+/);\r\n\t\t\tsetFormData({\r\n\t\t\t\t...formData,\r\n\t\t\t\t[event.target.name]: event.target.value,\r\n\t\t\t})\r\n\t\t} \r\n\t\telse if(event.target.name == 'image') {\r\n\t\t\tsetPostContent([\r\n\t\t\t\t...postContent,\r\n\t\t\t\t{ \r\n\t\t\t\t\tcontent: event.target.files[0],\r\n\t\t\t\t\ttype: 'media', \r\n\t\t\t\t\tindex: postContent.length - 0.5,\r\n\t\t\t\t\turl: URL.createObjectURL(event.target.files[0]),\r\n\t\t\t\t}\t\t\r\n\t\t\t])\t\r\n\t\t} \r\n\t\t// else if(event.target.name == 'content') {\r\n\r\n\t\t// \tlet copy;\r\n\t\t// \tfor(let i = 0; i < postContent.length; i++) {\r\n\t\t// \t\tif(postContent[i].index == event.target.dataset.index) {\r\n\t\t// \t\t\tcopy = true;\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\r\n\t\t// \t if (copy == true) {\r\n\t\t// \t\tif(postContent.length == 1) {\r\n\t\t// \t\t\tsetPostContent([\r\n\t\t// \t\t\t\t{ \r\n\t\t// \t\t\t\t\tcontent: event.target.value,\r\n\t\t// \t\t\t\t\ttype: \"text\", \r\n\t\t// \t\t\t\t\tindex: event.target.dataset.index \r\n\t\t// \t\t\t\t}\t\t\r\n\t\t// \t\t\t])\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\tlet _postContent = JSON.parse(JSON.stringify(postContent));\r\n\t\t// \t\t\t_postContent.pop();\r\n\t\t// \t\t\tsetPostContent([\r\n\t\t// \t\t\t\t..._postContent,\r\n\t\t// \t\t\t\t{\r\n\t\t// \t\t\t\t\tcontent: event.target.value,\r\n\t\t// \t\t\t\t\ttype: \"text\", \r\n\t\t// \t\t\t\t\tindex: event.target.dataset.index\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t])\r\n\t\t// \t\t}\r\n\t\t// \t} \r\n\t\t//chatGPT recommended update\r\n\t\telse if (event.target.name == 'content') {\r\n\t\t  let existingItem = postContent.find(item => item.index == event.target.dataset.index);\r\n\r\n\t\t  if (existingItem) {\r\n\t\t    // Update existing content\r\n\t\t    setPostContent(postContent.map(item => \r\n\t\t      item.index == event.target.dataset.index \r\n\t\t        ? { ...item, content: event.target.value }\r\n\t\t        : item\r\n\t\t    ));\r\n\t\t  } \r\n\t\t  else {\r\n\t\t    // Add new content\r\n\t\t    setPostContent([\r\n\t\t      ...postContent,\r\n\t\t      {\r\n\t\t        content: event.target.value,\r\n\t\t        type: 'text',\r\n\t\t        index: event.target.dataset.index\r\n\t\t      }\r\n\t\t    ]);\r\n\t\t  }\r\n\t\t} \r\n\t\telse {\r\n\t\t\tsetFormData({\r\n\t\t\t\t...formData,\r\n\t\t\t\t[event.target.name]: event.target.value,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t//older submitPost function\r\n\tconst handleSubmit = async(event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconsole.log(postContent);\r\n\t\tlet title = document.getElementById('title');\r\n\r\n\t\tif (!title.value.trim() || !postContent.some(content => {\r\n\t\t  if (content.type === 'text') {\r\n\t\t    // Only apply trim to text content\r\n\t\t    return typeof content.content === 'string' && content.content.trim() !== '';\r\n\t\t  } else if (content.type === 'media') {\r\n\t\t    // Check if media content is a valid File object\r\n\t\t    return content.content instanceof File;\r\n\t\t  }\r\n\t\t})) {\r\n\t\tsetSocketMessage({\r\n\t\t    type: 'error',\r\n\t\t    message: 'At least a Title, Text, or Media is needed to make a post!'\r\n\t\t  });\r\n\t\t  return;  // Stop the form submission if validation fails\r\n\t\t}  \r\n\t\telse {\r\n\t\t\t\r\n\t\t\telement.classList.add('_loading');\r\n\t\t\tlet submission = new FormData();\r\n\r\n\t\t\tsubmission.append('type', 'entry');\r\n\t\t\tsubmission.append('title', formData.title ? formData.title : title.value);\r\n\t\t\tsubmission.append('isPrivate', isPrivate);\r\n\t\t\tsubmission.append('privacyTogglable', sessionStorage.getItem('privacySetting'));\r\n\t\t\tsubmission.append('profilePhoto', sessionStorage.getItem('profilePhoto'));\r\n\r\n\t\t\tfor(let i=0; i < postContent.length; i++) {\r\n\r\n\t\t\t\tconst {type, content, index} = postContent[i];\r\n\r\n\t\t\t\tif(type == 'text') {\r\n\t\t\t\t\tif (typeof content === 'string' && content.trim() === '') {\r\n\t\t\t\t      continue;  // Skip empty text content\r\n\t\t\t\t    }\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tlet content = postContent[i].content;\r\n\t\t\t\t\t\tsubmission.append(`${index}`, content)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(type == 'media') {\r\n\t\t\t\t\tlet content = postContent[i].content;\r\n\t\t\t\t\tsubmission.append(`${index}`, content)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet tags = suggestions.filter(el => el.selected == true).map(el => el.name);\r\n\t\t\tif(tags.length > 0) {\r\n\t\t\t\tsubmission.append('tags', tags);\t\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tlet taggedUsers = tagged.filter(user => user.selected == true).map(user => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t_id: user._id, \r\n\t\t\t\t\tusername: user.userName\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(taggedUsers.length > 0) {\r\n\t\t\t\tsubmission.append('taggedUsers', JSON.stringify(taggedUsers));\r\n\t\t\t}\r\n\t\t\tconsole.log(taggedUsers);\r\n\r\n\t\t\tif(selectedDate.day != null) {\r\n\t\t\t\tsubmission.append('usePostedByDate', false);\r\n\t\t\t\tsubmission.append('postedOn_month', selectedDate.month);\r\n\t\t\t\tsubmission.append('postedOn_day', selectedDate.day);\r\n\t\t\t\tsubmission.append('postedOn_year', selectedDate.year);\r\n\t\t\t} else {\r\n\t\t\t\tsubmission.append('usePostedByDate', true);\r\n\t\t\t}\r\n\r\n\t\t\tif(pinLocation.open) {\r\n\t\t\t\tsubmission.append('geoLon', pinLocation.lon);\r\n\t\t\t\tsubmission.append('geoLat', pinLocation.lat);\r\n\t\t\t}\t\r\n\t\t\tconsole.log(submission);\r\n\t\t\tconsole.log(tags);\r\n\r\n\t\t\tlet submit = await accessAPI.createPost(submission);\r\n\r\n\t\t\tif(submit.confirm == true) {\r\n\t\t\t\tconsole.log(\"Post submission successful\");\r\n\t\t\t\t// console.log(submit);\r\n\t\t\t\telement.classList.remove('_enter');\r\n\t\t\t\telement.classList.add('_fade');\r\n\t\t\t\tlet delay = setTimeout(()=> {\r\n\t\t\t\t\tsetCurrent({\r\n\t\t\t\t\t\t...current,\r\n\t\t\t\t\t\tmodal: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 300)\r\n\r\n\t\t\t\tlet utilizedDraft = drafts.find(post => post.selected == true);\r\n\t\t\t\tif(utilizedDraft) {\r\n\t\t\t\t\tawait accessAPI.deleteDraft(utilizedDraft._id)\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else if(submit.message) {\r\n\t\t\t\t\telement.classList.remove('_loading');\r\n\t\t\t\t\tconsole.log('Issue with post submission');\r\n\t\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: submit.message\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 10. 27. 2023\r\n\t\t\t * setSocketMessage here with info for making notif for tagged users\r\n\t\t\t */\r\n\t\t\tif(tagged.some(user => user.selected == true)) {\r\n\r\n\t\t\t\tlet recips = tagged.filter(user => user.selected == true).map(user => {return user._id});\r\n\r\n\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\ttype: 'tagging',\r\n\t\t\t\t\tisRead: false,\r\n\t\t\t\t\tsenderID: userID,\r\n\t\t\t\t\tsenderUsername: username,\r\n\t\t\t\t\turl: submit.postURL,\r\n\t\t\t\t\tmessage: 'sent',\r\n\t\t\t\t\trecipients: recips,\r\n\t\t\t\t\tpostTitle: title.value\r\n\t\t\t\t})\r\n\r\n\t\t\t} else {\r\n\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\tconfirm: 'postUpload'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst draftPost = async(event) => {\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconsole.log(postContent);\r\n\r\n\t\t\tif(!formData.title) {\r\n\t\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: 'Atleast a Title, Text or Media is needed to make a post!'\r\n\t\t\t\t\t})\r\n\t\t\t} else if (postContent.length < 1) {\r\n\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: 'Atleast a Title, Text or Media is needed to make a post!'\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\telement.classList.add('_loading');\r\n\t\t\t\tlet submission = new FormData();\r\n\r\n\t\t\t\tsubmission.append('type', 'draft');\r\n\t\t\t\tsubmission.append('title', formData.title);\r\n\t\t\t\tsubmission.append('isPrivate', isPrivate);\r\n\t\t\t\tsubmission.append('privacyTogglable', sessionStorage.getItem('privacySetting'));\r\n\t\t\t\tsubmission.append('profilePhoto', sessionStorage.getItem('profilePhoto'));\r\n\r\n\t\t\t\tfor(let i=0; i < postContent.length; i++){\r\n\t\t\t\t\tif(postContent[i].type == 'text') {\r\n\t\t\t\t\t\tif(postContent[i].content === '') {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet content = postContent[i].content;\r\n\t\t\t\t\t\t\tsubmission.append(`${postContent[i].index}`, content)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if(postContent[i].type == 'image') {\r\n\t\t\t\t\t\tlet content = postContent[i].content;\r\n\t\t\t\t\t\tsubmission.append(`${postContent[i].index}`, content)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet tags = suggestions.filter(el => el.selected == true).map(el => el.name);\r\n\t\t\t\tif(tags.length > 0) {\r\n\t\t\t\t\tsubmission.append('tags', tags);\t\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tlet taggedUsers = tagged.filter(user => user.selected == true).map(user => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t_id: user._id, \r\n\t\t\t\t\t\tusername: user.userName\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(taggedUsers.length > 0) {\r\n\t\t\t\t\tsubmission.append('taggedUsers', JSON.stringify(taggedUsers));\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(taggedUsers);\r\n\r\n\t\t\t\tif(selectedDate.day != null) {\r\n\t\t\t\t\tsubmission.append('usePostedByDate', false);\r\n\t\t\t\t\tsubmission.append('postedOn_month', selectedDate.month);\r\n\t\t\t\t\tsubmission.append('postedOn_day', selectedDate.day);\r\n\t\t\t\t\tsubmission.append('postedOn_year', selectedDate.year);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubmission.append('usePostedByDate', true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pinLocation.open) {\r\n\t\t\t\t\tsubmission.append('geoLon', pinLocation.lon);\r\n\t\t\t\t\tsubmission.append('geoLat', pinLocation.lat);\r\n\t\t\t\t}\t\r\n\t\t\t\tconsole.log(submission);\r\n\t\t\t\tconsole.log(tags);\r\n\r\n\t\t\t\tlet submit = await accessAPI.createPost(submission);\r\n\r\n\t\t\t\tif(submit.confirm == true) {\r\n\t\t\t\t\tconsole.log(submit);\r\n\t\t\t\t\telement.classList.remove('_enter');\r\n\t\t\t\t\telement.classList.add('_fade');\r\n\t\t\t\t\tlet second = setTimeout(()=> {\r\n\t\t\t\t\t\tsetCurrent({\r\n\t\t\t\t\t\t\t...current,\r\n\t\t\t\t\t\t\tmodal: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 300)\r\n\r\n\t\t\t\t\tlet third = setTimeout(()=> {\r\n\t\t\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\t\t\tconfirm: 'postDrafted'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t} else if(submit.message) {\r\n\t\t\t\t\telement.classList.remove('_loading');\r\n\t\t\t\t\tconsole.log('Issue with post submission');\r\n\t\t\t\t\tsetSocketMessage({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: submit.message\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\tconst newContent = (type) => {\r\n\t\tsetPostContent([\r\n\t\t\t...postContent,\r\n\t\t\t{\r\n\t\t\t\tcontent: '',\r\n\t\t\t\ttype: type,\r\n\t\t\t\tindex: postContent.length\r\n\t\t\t}\r\n\t\t])\r\n\t}\r\n\r\n\tconst textareaImageAdd = (index, type, info) => {\r\n\r\n\t\tif(type == 'text') {\r\n\t\t\t\treturn\t(\r\n\t\t\t\t\t<div >\r\n\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\tclassName={\"textareaImageAdd\"}\r\n\t\t\t\t\t\t\tname=\"content\" \r\n\t\t\t\t\t\t\tplaceholder=\"Content\" \r\n\t\t\t\t\t\t\tonBlur={handleChange}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tdata-index={index}\r\n\t\t\t\t\t\t\trows=\"8\"\r\n\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\tvalue={info ? info : undefined}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{index > 0 &&\r\n\t\t\t\t\t\t\t<button className={`buttonDefault remove`}\r\n\t\t\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(index);\r\n\t\t\t\t\t\t\t\t\t\tlet copy2 = postContent.filter(post => post.index != index);\r\n\t\t\t\t\t\t\t\t\t\tsetPostContent(copy2);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t}\r\n\t\telse if(type == 'media') {\r\n\r\n\t\t\t// let link = images.find(element => element.index == index);\r\n\t\t\treturn (\r\n\t\t\t\t<div >\r\n\t\t\t\t\t<img key={index} src={info}/> \r\n\r\n\t\t\t\t\t<button className={`buttonDefault remove`}\r\n\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tlet copy2 = postContent.filter(post => post.index != index);\r\n\t\t\t\t\t\t\t\tsetPostContent(copy2);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tRemove\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst getConnections = async() => {\r\n\t\tlet request = await accessAPI.getConnections(userID);\r\n\t\trequest.forEach(user => {\r\n\t\t\tuser.selected = false;\r\n\t\t})\r\n\t\tsetTagged(request);\r\n\t}\r\n\r\n\tconst getSuggestions = async() => {\r\n\r\n\t\tlet topics = await accessAPI.getSuggestions();\r\n\t\tlet userTags = await accessAPI.getUserTags(); //gets all tags \r\n\t\tconsole.log(userTags)\r\n\t\tlet results = [];\r\n\t\tlet _topics = topics.map(topic => {\r\n\t\t\treturn {\r\n\t\t\t\tname: topic,\r\n\t\t\t\ttype: 'topic',\r\n\t\t\t\tselected: false\r\n\t\t\t}\r\n\t\t})\r\n\t\tresults.push(..._topics);\r\n\t\tif(userTags != false) {\r\n\t\t\tlet _userTags = userTags.map(topic => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: topic.name,\r\n\t\t\t\t\ttype: 'tag',\r\n\t\t\t\t\tselected: false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tresults.push(..._userTags);\r\n\t\t}\r\n\t\tconsole.log(results)\r\n\t\tsetSuggestions(results);\r\n\t}\r\n\r\n\tconst getDrafts = async() => {\r\n\t\tlet request = await accessAPI.getDrafts();\r\n\t\tsetDrafts(request);\r\n\t}\r\n\t\r\n\r\n\tconst [enter, setEnter] = React.useReducer(state => !state, true);\r\n\tconst [modal, setModal] = React.useReducer(state => !state, false);\r\n\tconst [isPrivate_2, setIsPrivate_2] = React.useReducer(state => !state, false);\r\n\tconst [newTag_value, setNewTag_value] = React.useState('');\r\n\tconst tagModal = React.useRef();\r\n\t\r\n\r\n\t//should be locationData values by default\r\n\t//these values are added to post submission\r\n\tconst [pinLocation, setPinLocation] = React.useState({\r\n\t\topen: false,\r\n\t\tlon: undefined, \r\n\t\tlat: undefined\r\n\t});\r\n\r\n\tlet writtenDate;\r\n\tif(selectedDate.day) {\r\n\t\twrittenDate = `${selectedDate.month + 1}. ${selectedDate.day}. ${selectedDate.year}`;\r\n\t}\r\n\r\n\tlet newTag_onChange = (e) => {\r\n\r\n\t\tconst input = e.currentTarget.value;\r\n\t\tsetNewTag_value(e.currentTarget.value);\r\n\t}\r\n\r\n\tlet newTag_submit = async(e) => {\r\n\r\n\t\tlet data = {\r\n\t\t\ttype: 'tag',\r\n\t\t\tname: newTag_value,\r\n\t\t\towner: isPrivate_2 == true ? userID : null,\r\n\t\t\tadmins: [`${isPrivate_2 == true ? userID : null}`],\r\n\t\t\townerUsername: isPrivate_2 == true ? username : null,\r\n\t\t\thasAccess: [userID],\r\n\t\t\tisPrivate: isPrivate_2 == true ? true : false,\r\n\t\t\taction: 'newTag'\r\n\t\t}\r\n\t\tsetSocketMessage(data);\r\n\t\tconsole.log(data);\r\n\t\t/*\r\n\t\t\t2nd part of operation in useEffect\r\n\t\t*/\r\n\t}\r\n\r\n\tconst onChange = (e) => {\r\n\t\tif(e.target.name == 'lon') {\r\n\t\t\tsetPinLocation({\r\n\t\t\t\t...pinLocation,\r\n\t\t\t\tlon: e.target.value\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(e.target.name == 'lat') {\r\n\t\t\tsetPinLocation({\r\n\t\t\t\t...pinLocation,\r\n\t\t\t\tlat: e.target.value\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst getGeoInfo_options = {\r\n\t\tenableHighAccuracy: true,\r\n\t\ttimeout: 5000,\r\n\t\tmaximumAge: 0\r\n\t};\r\n\r\n\tconst getGeoInfo_success = (pos) => {\r\n\t\t// setLocationData({\r\n\t\t// \tlon: pos.longitude,\r\n\t\t// \tlat: pos.latitude\r\n\t\t// })\r\n\t\tsetPinLocation({\r\n\t\t\t...pinLocation,\r\n\t\t\tlon: pos.longitude,\r\n\t\t\tlat: pos.latitude\r\n\t\t})\r\n\t\tconsole.log('Location data saved within state')\r\n\t}\r\n\r\n\tconst getGeoInfo_error = (err) => {\r\n\t\tconsole.log(`Error (${err.code}): ${err.message}`)\r\n\t}\r\n\r\n\t//for getting user location details upon toggling 'pinLocation'\r\n\tReact.useEffect(()=> {\r\n\t\tif(pinLocation.lon) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(navigator.geolocation) {\r\n\t\t\tnavigator.permissions.query({name: \"geolocation\"}).then((result)=> {\r\n\t\t\t\tconsole.log(result);\r\n\r\n\t\t\t\tif(result.state == \"granted\") {\r\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition(getGeoInfo_success, getGeoInfo_error, getGeoInfo_options)\r\n\t\t\t\t}\r\n\t\t\t\telse if(result.state == \"prompt\") {\r\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition(getGeoInfo_success, getGeoInfo_error, getGeoInfo_options)\r\n\t\t\t\t}\r\n\t\t\t\telse if(result.state == \"denied\") {\r\n\t\t\t\t\t//can utilize the popUpNotif to instruct user on how to activate location permissions\r\n\t\t\t\t\t// setLocationData({\r\n\t\t\t\t\t// \tlon: undefined,\r\n\t\t\t\t\t// \tlat: undefined\r\n\t\t\t\t\t// })\r\n\t\t\t\t\tsetPinLocation({\r\n\t\t\t\t\t\t...pinLocation,\r\n\t\t\t\t\t\tlon: undefined,\r\n\t\t\t\t\t\tlat: undefined\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"geolocation permissions not active\")\r\n\t\t}\r\n\t}, [pinLocation.open])\r\n\r\n\t//update main data: connections, topics and tags, drafted posts\r\n\tReact.useEffect(()=> {\r\n\t\tgetConnections();\r\n\t\tgetSuggestions();\r\n\t\tgetDrafts();\r\n\t}, []);\r\n\r\n\t//update tags on new tag creation\r\n\tReact.useEffect(()=> {\r\n\r\n\t\tif(socketMessage.type == 'confirmation' && socketMessage.message == 'tagAdd') {\r\n\t\t\tgetSuggestions();\r\n\t\t\tsetModal();\r\n\t\t}\r\n\t}, [socketMessage]);\r\n\r\n\t//Enter animation\r\n\tReact.useEffect(()=> {\r\n\t\tlet elCurrent = el.current;\r\n\t\tlet delay = setTimeout(()=> {\r\n\t\t\telCurrent.classList.remove('_enter');\t\r\n\t\t}, 200)\r\n\t}, [])\r\n\t\r\n\r\n\treturn (\r\n\r\n\t\t<div id=\"createPost\" ref={el} className={`_enter`}>\r\n\r\n\t\t\t{/*\r\n\t\t\t\tH E A D E R\r\n\t\t\t*/}\r\n\t\t\t<div id=\"headerWrapper\">\r\n\r\n\t\t\t\t<ReturnElement el={el} current={current} setCurrent={setCurrent}/>\r\n\r\n\t\t\t\t<div id=\"dateSetter\">\r\n\t\t\t\t\t<h3>Creating Entry for</h3>\r\n\t\t\t\t\t{current.calendar &&\r\n\t\t\t\t\t\t<h2>{writtenDate}</h2>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{!current.calendar &&\r\n\t\t\t\t\t\t<h2>Today</h2>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DraftIcon toggleDrafts={setDraftList}/>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t{/*\r\n\t\t\t\tF O R M\r\n\t\t\t\t\t\tB O D Y\r\n\t\t\t*/}\r\n\t\t\t<form onSubmit={handleSubmit} encType='multipart/form-data'>\r\n\t\t\t\t<fieldset>\r\n\t\t\t\t\t<input name=\"title\" id=\"title\" placeholder=\"Title\" onChange={handleChange}/>\r\n\t\t\t\t\t<div id=\"contentWrapper\">\r\n\t\t\t\t\t\t{/*{contentCount.map((element, index) => {\r\n\t\t\t\t\t\t\tif(element == 'text') {\r\n\t\t\t\t\t\t\t\treturn textareaImageAdd(index, element)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(element == 'media') {\r\n\t\t\t\t\t\t\t\treturn textareaImageAdd(index + 0.5, element)\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t})}*/}\r\n\t\t\t\t\t\t{postContent.map((element) => {\r\n\t\t\t\t\t\t\tif(element.type == 'text') {\r\n\t\t\t\t\t\t\t\treturn textareaImageAdd(element.index, element.type, element.content)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(element.type == 'media') {\r\n\t\t\t\t\t\t\t\treturn textareaImageAdd(element.index, element.type, element.url)\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t<div id=\"moreContent\">\r\n\t\t\t\t\t\t<button className={'buttonDefault'} \r\n\t\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\tnewContent('text')\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tAdd Text\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<label className=\"imageAdd\" onChange={handleChange} htmlFor=\"addImage\" onClick={(e)=> {\r\n\t\t\t\t\t\t\tdocument.getElementById('addImage').click();\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<input hidden\r\n\t\t\t\t\t\t\t\tid='addImage' \r\n\t\t\t\t\t\t\t\ttype=\"file\" \r\n\t\t\t\t\t\t\t\taccept=\"image/\"\r\n\t\t\t\t\t\t\t\tname='image' \r\n\t\t\t\t\t\t\t\thidden />\r\n\t\t\t\t\t\t\t<p>Add Image</p>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t<DropSelect tagged={tagged} setTagged={setTagged} />\r\n\r\n\t\t\t\t\t<MultiSelect suggestions={suggestions} \r\n\t\t\t\t\t\t\t\t setSuggestions={setSuggestions} \r\n\t\t\t\t\t\t\t\t setModal={setModal}/>\r\n\r\n\t\t\t\t\t<button id=\"setPrivate\" \r\n\t\t\t\t\t\t\tclassName={`buttonDefault ${isPrivate == true ? 'active' : 'nonActive'}`}\r\n\t\t\t\t\t\t\tonClick={(e)=> {e.preventDefault(); setPrivate()}}>\r\n\t\t\t\t\t\tPRIVATE\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<button id=\"pinLocation\"\r\n\t\t\t\t\t\t\tclassName={`buttonDefault ${pinLocation.open == true ? 'active' : 'nonActive'}`}\r\n\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\te.preventDefault(); \r\n\t\t\t\t\t\t\t\tif(pinLocation.open == false) {\r\n\t\t\t\t\t\t\t\t\tsetPinLocation({\r\n\t\t\t\t\t\t\t\t\t\t...pinLocation,\r\n\t\t\t\t\t\t\t\t\t\topen: true\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetPinLocation({\r\n\t\t\t\t\t\t\t\t\t\t...pinLocation,\r\n\t\t\t\t\t\t\t\t\t\topen: false\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tPin Location\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t{pinLocation.open &&\r\n\t\t\t\t\t\t<div id=\"coordinatesWrapper\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div id=\"lonWrap\" className={`${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`}>\r\n\t\t\t\t\t\t\t\t<p className={`${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`}>LON</p>\r\n\t\t\t\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"lon\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={pinLocation.lon}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div id=\"latWrap\" className={`${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`}>\r\n\t\t\t\t\t\t\t\t<p className={`${pinLocation.lon != locationData.lon ? 'active' : 'inactive'}`}>LAT</p>\r\n\t\t\t\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"lat\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={pinLocation.lat}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t</fieldset>\r\n\t\t\t</form>\r\n\t\t\t\r\n\t\t\t<div id=\"options\">\r\n\t\t\t\t<button className={\"buttonDefault\"} onClick={draftPost}>Draft</button>\r\n\r\n\t\t\t\t<button className={\"buttonDefault\"} onClick={handleSubmit}>Post</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t{modal &&\r\n\t\t\t\t<div id=\"createNewTag\" ref={tagModal} className={`${modal == true ? 'active' : 'leave'}`}>\r\n\t\t\t\t\t<h2>Create New Tag</h2>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tplaceholder=\"Enter a single word phrase\"\r\n\t\t\t\t\t\tonChange={newTag_onChange} \r\n\t\t\t\t\t\tvalue={newTag_value}/>\r\n\t\t\t\t\t<div id=\"buttonWrapper\">\r\n\t\t\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\t\ttagModal.current.classList.remove('active');\r\n\t\t\t\t\t\t\t\t\ttagModal.current.classList.add('leave');\r\n\t\t\t\t\t\t\t\t\tsetTimeout(()=> {\r\n\t\t\t\t\t\t\t\t\t\tsetModal();\r\n\t\t\t\t\t\t\t\t\t}, 250);\r\n\t\t\t\t\t\t\t\t}}>Cancel</button>\r\n\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\tclassName={`buttonDefault ${isPrivate_2 == true ? 'active' : 'nonActive'}`}\r\n\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\tsetIsPrivate_2()\r\n\t\t\t\t\t\t\t}}>PRIVATE</button>\r\n\t\t\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\t\t\tonClick={newTag_submit}>Save</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{draftList &&\r\n\t\t\t\t<FullList \r\n\t\t\t\t\tdata={drafts}\r\n\t\t\t\t\tmode={'viewDrafts'}\r\n\t\t\t\t\tsource={`${username}'s Drafts`}\r\n\t\t\t\t\tsocketMessage={socketMessage}\r\n\t\t\t\t\tsetSocketMessage={setSocketMessage}\r\n\t\t\t\t\tsetFullList={setDraftList}\r\n\t\t\t\t\tpostContent={postContent}\r\n\t\t\t\t\tsetPostContent={setPostContent}\r\n\t\t\t\t\tgroupID={''}\r\n\t\t\t\t\tsetPinLocation={setPinLocation}\r\n\t\t\t\t\tsetLocationData={setLocationData}\r\n\t\t\t\t\tsetPrivate={setPrivate}\t\r\n\t\t\t\t\tsuggestions={suggestions}\r\n\t\t\t\t\tsetSuggestions={setSuggestions}\r\n\t\t\t\t\ttagged={tagged}\r\n\t\t\t\t\tsetTagged={setTagged}\r\n\t\t\t\t\tsetDrafts={setDrafts}\r\n\t\t\t\t/>\r\n\t\t\t}\t\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default function UserLog({active, setCurrent, current, log, setLog, sectionClass, refe}) {\r\n\r\n\t// let [place, setPlace] = React.useState(active == 1 || active == null ? '' : 'not');\r\n\tlet userID = sessionStorage.getItem('userID');\r\n\tlet [isModal, openModal] = React.useReducer(state => !state, false);\r\n\r\n\t/**\r\n\t * For now, get userLog on mount\r\n\t * log.jsx exports component and necessary functions\r\n\t * function to open independant post within log.jsx\r\n\t */\r\n\t// let updateLog = async() => {\r\n\t// \tlet data = await accessAPI.pullUserLog();\r\n\t// \tsetLog(data);\r\n\t// }\r\n\r\n\tlet updateLog = async() => {\r\n\r\n\t\tlet posts = await accessAPI.pullUserLog({type: 'customLog', logNumber: current.log})\r\n\t\tsetLog(posts);\r\n\t} \r\n\r\n\tReact.useEffect(()=> {\r\n\t\tupdateLog()\r\n\t\tsetCurrent({\r\n\t\t\t...current,\r\n\t\t\tsocial: false\r\n\t\t})\r\n\t}, [])\r\n\r\n\tReact.useEffect(()=> {\r\n\t\tupdateLog()\r\n\t}, [current.modal, current.customizer])\r\n\r\n\r\n\t/* change userLog class based on state from Home component in Main.jsx */\r\n\t// React.useEffect(()=> {\r\n\r\n\t// \tif (active == undefined) {\r\n\t// \t\tconsole.log(active);\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \tif(active !== 1 || active == 'x') {\r\n\t// \t\tsetPlace('not');\r\n\t// \t\tconsole.log(active);\r\n\t// \t}\r\n\t// }, [active])\r\n\r\n\tlet noHeading = false;\r\n\r\n\treturn (\r\n\t\t<div id=\"userLog\" className={ `${sectionClass.home}` } ref={refe}>\r\n\t\t\t<Log data={log} \r\n\t\t\t\t section={\"user\"} \r\n\t\t\t\t noHeading={noHeading} \r\n\t\t\t\t current={current} \r\n\t\t\t\t setCurrent={setCurrent}\r\n\t\t\t\t updateLog={updateLog}/>\r\n\t\t</div>\r\n\t)\r\n}"],"mappings":";;;;;;;;AAAA;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAO,gBAAP;AACA,OAAO,eAAP;AACA,OAAOC,QAAP,MAAqB,gCAArB;;AAEA,IAAIC,SAAS,GAAGH,SAAS,EAAzB;;AAEA,SAASI,aAAT,OAAmD;EAAA;;EAAA,IAA3B;IAACC,EAAD;IAAKC,UAAL;IAAiBC;EAAjB,CAA2B;EAElD,IAAI,CAACC,OAAD,EAAUC,QAAV,IAAsBV,KAAK,CAACW,QAAN,CAAe,KAAf,CAA1B;;EAEA,IAAIC,MAAM,GAAG,MAAM;IAClBF,QAAQ,CAAC,IAAD,CAAR;IAEA,IAAIG,MAAM,GAAGC,UAAU,CAAC,MAAK;MAC5B,IAAIC,SAAS,GAAGT,EAAE,CAACE,OAAnB;MACAO,SAAS,CAACC,SAAV,CAAoBC,GAApB,CAAwB,QAAxB;IACA,CAHsB,EAGpB,GAHoB,CAAvB;IAKA,IAAIC,KAAK,GAAGJ,UAAU,CAAC,MAAK;MAC3BP,UAAU,CAAC,EACV,GAAGC,OADO;QAEVW,KAAK,EAAE;MAFG,CAAD,CAAV;IAIA,CALqB,EAKnB,GALmB,CAAtB;EAMA,CAdD;;EAgBA,oBACC;IACC,GAAG,MADJ;IACK,OAAO,EAAC,KADb;IAEC,OAAO,EAAC,8BAFT;IAGC,KAAK,EAAC,4BAHP;IAIC,EAAE,EAAC,QAJJ;IAKC,SAAS,EAAEV,OAAO,GAAG,OAAH,GAAa,EALhC;IAMC,OAAO,EAAEG,MANV;IAAA,wBAOG;MACC,EAAE,EAAC,KADJ;MAEC,MAAM,EAAC,+CAFR;MAGC,SAAS,EAAC;IAHX;MAAA;MAAA;MAAA;IAAA,QAPH,eAWG;MACC,EAAE,EAAC,QADJ;MAEC,MAAM,EAAC,gDAFR;MAGC,SAAS,EAAC;IAHX;MAAA;MAAA;MAAA;IAAA,QAXH;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AAkBA;;GAtCQP,a;;KAAAA,a;;AAwCT,SAASe,SAAT,QAAoC;EAAA;;EAAA,IAAhB;IAACC;EAAD,CAAgB;;EAEnC;AACD;AACA;AACA;AACA;AACA;EAEC,MAAM,CAACC,OAAD,EAAUC,QAAV,IAAsBvB,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAA5B;;EACA,MAAMC,WAAW,GAAG,MAAM;IACzBH,QAAQ;IACR,IAAII,KAAK,GAAGb,UAAU,CAAC,MAAK;MAC3BO,YAAY;MACZE,QAAQ;IACR,CAHqB,EAGnB,GAHmB,CAAtB;EAIA,CAND;;EAQA,oBACC;IACC,EAAE,EAAC,WADJ;IAEC,KAAK,EAAC,4BAFP;IAGC,KAAK,EAAC,QAHP;IAIC,MAAM,EAAC,QAJR;IAKC,OAAO,EAAC,mBALT;IAMC,OAAO,EAAEG,WANV;IAOC,SAAS,EAAEJ,OAAO,GAAG,OAAH,GAAa,EAPhC;IAAA,uBAQE;MAAG,SAAS,EAAC,yBAAb;MAAA,wBACE;QAAM,KAAK,EAAC,GAAZ;QAAgB,CAAC,EAAC;MAAlB;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAM,KAAK,EAAC,GAAZ;QAAgB,CAAC,EAAC;MAAlB;QAAA;QAAA;QAAA;MAAA,QAFF,eAGE;QAAM,KAAK,EAAC,GAAZ;QAAgB,MAAM,EAAC,IAAvB;QAA4B,EAAE,EAAC,KAA/B;QAAqC,SAAS,EAAC;MAA/C;QAAA;QAAA;QAAA;MAAA,QAHF,eAIE;QAAM,CAAC,EAAC,yEAAR;QAAkF,SAAS,EAAC;MAA5F;QAAA;QAAA;QAAA;MAAA,QAJF;IAAA;MAAA;MAAA;MAAA;IAAA;EARF;IAAA;IAAA;IAAA;EAAA,QADD;AAiBA;;IAnCQF,S;;MAAAA,S;;AAqCT,SAASQ,UAAT,QAAyC;EAAA;;EAAA,IAArB;IAACC,MAAD;IAASC;EAAT,CAAqB;EAExC,IAAI,CAACC,MAAD,EAASC,SAAT,IAAsBhC,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAA1B;;EAEA,IAAIQ,YAAY,GAAIC,MAAD,IAAY;IAE9B,IAAIC,QAAQ,gBACZ;MAAI,SAAS,EAAC,QAAd;MAAuB,OAAO,EAAE,MAAK;QACpCL,SAAS,CAACD,MAAM,CAACO,GAAP,CAAWC,IAAI,IAAI;UAC5B,IAAGA,IAAI,CAACC,GAAL,IAAYJ,MAAM,CAACI,GAAtB,EAA2B;YAE1B,IAAGD,IAAI,CAACE,QAAL,IAAiB,KAApB,EAA2B;cAC1B,OAAO,EACN,GAAGF,IADG;gBAENE,QAAQ,EAAE;cAFJ,CAAP;YAIA,CALD,MAKO,IAAIF,IAAI,CAACE,QAAL,IAAiB,IAArB,EAA0B;cAChC,OAAO,EACN,GAAGF,IADG;gBAENE,QAAQ,EAAE;cAFJ,CAAP;YAIA;UAED,CAdD,MAcO;YACN,OAAOF,IAAP;UACA;QACD,CAlBS,CAAD,CAAT;MAmBA,CApBD;MAAA,uBAqBC;QAAA,UAAIH,MAAM,CAACM;MAAX;QAAA;QAAA;QAAA;MAAA;IArBD;MAAA;MAAA;MAAA;IAAA,QADA;;IAyBA,OAAOL,QAAP;EACA,CA5BD;;EA8BA,oBACC;IAAK,EAAE,EAAC,aAAR;IAAA,WACE,CAACN,MAAM,CAACY,IAAP,CAAYJ,IAAI,IAAIA,IAAI,CAACE,QAAL,IAAiB,IAArC,CAAD,iBACA;MAAG,OAAO,EAAE,MAAK;QAACP,SAAS;MAAG,CAA9B;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAIC;MAAI,EAAE,EAAC,UAAP;MAAkB,OAAO,EAAE,MAAK;QAACA,SAAS;MAAG,CAA7C;MAAA,UACEH,MAAM,CAACa,MAAP,CAAcL,IAAI,IAAIA,IAAI,CAACE,QAAL,IAAiB,IAAvC,EAA6CH,GAA7C,CAAiDC,IAAI,iBACrD;QAAA,UAAyBA,IAAI,CAACG;MAA9B,GAASH,IAAI,CAACG,QAAd;QAAA;QAAA;QAAA;MAAA,QADA;IADF;MAAA;MAAA;MAAA;IAAA,QAJD,EAUET,MAAM,iBACN;MAAI,EAAE,EAAC,SAAP;MAAA,UACEF,MAAM,CAACO,GAAP,CAAWC,IAAI,IACfJ,YAAY,CAACI,IAAD,CADZ;IADF;MAAA;MAAA;MAAA;IAAA,QAXF;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AAoBA;;IAtDQT,U;;MAAAA,U;;AAwDT,SAASe,WAAT,QAA8D;EAAA;;EAAA,IAAzC;IAACC,WAAD;IAAcC,cAAd;IAA8BC;EAA9B,CAAyC;;EAE7D;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,IAAIC,OAAJ;EACA,IAAIC,MAAM,GAAGJ,WAAb;EACA,MAAM,CAACb,MAAD,EAASC,SAAT,IAAsBhC,KAAK,CAACW,QAAN,CAAe,CAAf,CAA5B;EACA,MAAM,CAACsC,QAAD,EAAWC,WAAX,IAA0BlD,KAAK,CAACW,QAAN,CAAe,EAAf,CAAhC;EACA,MAAM,CAACwC,MAAD,EAASC,SAAT,IAAsBpD,KAAK,CAACW,QAAN,CAAe,KAAf,CAA5B;EACA,MAAM,CAAC0C,KAAD,EAAQC,QAAR,IAAoBtD,KAAK,CAACW,QAAN,CAAe,EAAf,CAA1B,CAhB6D,CAiB7D;;EAEA,IAAI4C,QAAQ,GAAIC,CAAD,IAAO;IAErB,MAAMH,KAAK,GAAGG,CAAC,CAACC,aAAF,CAAgBC,KAA9B,CAFqB,CAGrB;;IACA,MAAMC,sBAAsB,GAAGX,MAAM,CAACN,MAAP,CAAc,CAACpC,EAAD,EAAKsD,KAAL,KAAe;MAC3D,IAAGtD,EAAE,CAACuD,IAAH,CAAQC,WAAR,GAAsBC,OAAtB,CAA8BV,KAAK,CAACS,WAAN,EAA9B,IAAqD,CAAC,CAAzD,EAA4D;QAC3D,OAAOxD,EAAP;MACA;IACD,CAJ8B,CAA/B;IAKA0B,SAAS,CAAC,EAAD,CAAT;IACAkB,WAAW,CAACS,sBAAD,CAAX;IACAP,SAAS,CAAC,IAAD,CAAT;IACAE,QAAQ,CAACE,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAR;EACA,CAbD;;EAeA,IAAIM,OAAO,GAAIR,CAAD,IAAO;IACpBxB,SAAS,CAAC,EAAD,CAAT;IAEA,IAAIiC,IAAI,GAAGrB,WAAW,CAACR,GAAZ,CAAgB9B,EAAE,IAAI;MAChC,IAAGA,EAAE,CAACuD,IAAH,IAAWL,CAAC,CAACC,aAAF,CAAgBS,SAA9B,EAAyC;QACxC,OAAO,EACN,GAAG5D,EADG;UAENiC,QAAQ,EAAE;QAFJ,CAAP;MAIA,CALD,MAKO;QACN,OAAOjC,EAAP;MACA;IACD,CATU,CAAX;IAUAuC,cAAc,CAACoB,IAAD,CAAd;EACA,CAdD;;EAgBA,IAAIE,SAAS,GAAIX,CAAD,IAAO;IACtB,IAAGA,CAAC,CAACY,OAAF,KAAc,EAAjB,EAAqB;MAAE;MACtBZ,CAAC,CAACa,cAAF;MACArC,SAAS,CAAC,CAAD,CAAT;MACAoB,SAAS,CAAC,KAAD,CAAT,CAHoB,CAIpB;;MAEAkB,OAAO,CAACC,GAAR,CAAYtB,QAAQ,CAAClB,MAAD,CAApB;MAEA,IAAIkC,IAAI,GAAGrB,WAAW,CAACR,GAAZ,CAAgB9B,EAAE,IAAI;QAChC,IAAGA,EAAE,CAACuD,IAAH,IAAWZ,QAAQ,CAAClB,MAAD,CAAR,CAAiB8B,IAA/B,EAAqC;UACpC,OAAO,EACN,GAAGvD,EADG;YAENiC,QAAQ,EAAE;UAFJ,CAAP;QAIA,CALD,MAKO;UACN,OAAOjC,EAAP;QACA;MACD,CATU,CAAX;MAUAuC,cAAc,CAACoB,IAAD,CAAd;IACA;EACD,CArBD;;EAuBA,IAAIO,kBAAkB,GAAG,MAAM;IAC9B,IAAGrB,MAAM,IAAIE,KAAb,EAAoB;MAEnB,oBACC;QAAK,EAAE,EAAC,gBAAR;QAAA,WACEJ,QAAQ,CAACwB,MAAT,GAAkB,CAAlB,gBACA;UAAI,EAAE,EAAC,cAAP;UAAA,UACGxB,QAAQ,CAACb,GAAT,CAAa,CAACsC,UAAD,EAAad,KAAb,KAAsB;YACpC,IAAIe,SAAJ;;YACA,IAAGf,KAAK,KAAK7B,MAAb,EAAqB;cACpB4C,SAAS,GAAG,QAAZ;YACA;;YACD,oBACC;cAAI,SAAS,GAAEA,SAAS,EAAED,UAAU,CAACE,IAAxB,CAAb;cAAiE,OAAO,EAAEZ,OAA1E;cAAA,UACEU,UAAU,CAACb;YADb,GAAgDa,UAAU,CAACb,IAA3D;cAAA;cAAA;cAAA;YAAA,QADD;UAKA,CAVC;QADH;UAAA;UAAA;UAAA;QAAA,QADA,GAaQ,IAdV,EAgBEZ,QAAQ,CAACwB,MAAT,GAAkB,CAAlB,gBACA;UAAK,EAAE,EAAC,iBAAR;UAAA,uBACQ;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADR;UAAA;UAAA;UAAA;QAAA,QADA,GAGgB,IAnBlB,eAqBC;UAAQ,SAAS,EAAE,eAAnB;UACE,EAAE,EAAC,YADL;UAEE,OAAO,EAAGjB,CAAD,IAAM;YACdA,CAAC,CAACa,cAAF;YACAvB,QAAQ;YACRM,SAAS,CAAC,KAAD,CAAT;UACA,CANH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QArBD;MAAA;QAAA;QAAA;QAAA;MAAA,QADD;IA+BA;EACD,CAnCD;EAqCA;AACD;AACA;AACA;AACA;;;EAEC,IAAIyB,UAAU,GAAG7E,KAAK,CAAC8E,MAAN,EAAjB;EACA9E,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IACpB,IAAIC,IAAI,GAAGH,UAAU,CAACrE,OAAtB;IACA,IAAI+B,QAAQ,GAAGyC,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiBA,QAAjB,CAA0B,CAA1B,CAAf;IACAX,OAAO,CAACC,GAAR,CAAYW,gBAAgB,CAAC3C,QAAD,CAAhB,CAA2B4C,KAAvC;;IAEA,IAAGC,QAAQ,CAACF,gBAAgB,CAAC3C,QAAD,CAAhB,CAA2B4C,KAA5B,CAAR,GAA8CE,MAAM,CAACC,UAAP,GAAoB,IAArE,EAA4E;MAC3EN,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiBM,KAAjB,CAAuBC,aAAvB,GAAuC,QAAvC;IACA,CAFD,MAEO;MACNR,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiBM,KAAjB,CAAuBC,aAAvB,GAAuC,KAAvC;IACA;EACD,CAVD,EAUG,CAAC5C,WAAD,CAVH;EAYA,oBACC;IAAK,EAAE,EAAC,eAAR;IAAwB,GAAG,EAAEiC,UAA7B;IAAA,wBACC;MAAK,EAAE,EAAC,cAAR;MAAA,wBACC;QAAI,EAAE,EAAC,UAAP;QAAA,UACEjC,WAAW,CAACR,GAAZ,CAAgB9B,EAAE,IAAI;UACtB,IAAGA,EAAE,CAACiC,QAAH,IAAe,IAAlB,EAAwB;YACvB,oBAAO;cACJ,OAAO,EAAE,MAAK;gBACb,IAAI0B,IAAI,GAAGrB,WAAW,CAACR,GAAZ,CAAgBqD,IAAI,IAAI;kBAClC,IAAGA,IAAI,CAAC5B,IAAL,IAAavD,EAAE,CAACuD,IAAnB,EAAyB;oBACxB,OAAO,EACN,GAAG4B,IADG;sBAENlD,QAAQ,EAAE;oBAFJ,CAAP;kBAIA,CALD,MAKO;oBACN,OAAOkD,IAAP;kBACA;gBACD,CATU,CAAX;gBAUA5C,cAAc,CAACoB,IAAD,CAAd;gBACAjC,SAAS,CAAC,EAAD,CAAT;gBACA,IAAI0D,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAhB;gBACAF,SAAS,CAAChC,KAAV,GAAkB,EAAlB;cACA,CAhBG;cAAA,wBAiBJ;gBAAA,UAAIpD,EAAE,CAACuD;cAAP;gBAAA;gBAAA;gBAAA;cAAA,QAjBI,eAkBJ;gBAAK,KAAK,EAAC,4BAAX;gBACE,OAAO,EAAC,WADV;gBAEE,KAAK,EAAC,MAFR;gBAGE,MAAM,EAAC,MAHT;gBAAA,uBAIE;kBAAM,CAAC,EAAC;gBAAR;kBAAA;kBAAA;kBAAA;gBAAA;cAJF;gBAAA;gBAAA;gBAAA;cAAA,QAlBI;YAAA,GAASvD,EAAE,CAACuD,IAAZ;cAAA;cAAA;cAAA;YAAA,QAAP;UAyBA;QAED,CA7BA;MADF;QAAA;QAAA;QAAA;MAAA,QADD,eAiCC;QAAO,EAAE,EAAC,MAAV;QAAiB,WAAW,EAAC,sBAA7B;QACC,IAAI,EAAC,MADN;QAEC,QAAQ,EAAEN,QAFX;QAGC,SAAS,EAAEY,SAHZ;QAIC,KAAK,EAAEd;MAJR;QAAA;QAAA;QAAA;MAAA,QAjCD;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,EAyCEmB,kBAAkB,EAzCpB;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AA6CA;;IA9KQ7B,W;;MAAAA,W;AAgLT,OAAO,SAASkD,UAAT,QAA0F;EAAA;;EAAA,IAAtE;IAACtF,UAAD;IAAaC,OAAb;IAAsBsF,aAAtB;IAAqCC,gBAArC;IAAuDC;EAAvD,CAAsE;EAEhG,MAAMC,MAAM,GAAGC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAAf;EACA,MAAMC,QAAQ,GAAGF,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAjB;EACA,MAAME,cAAc,GAAGH,cAAc,CAACC,OAAf,CAAuB,gBAAvB,CAAvB;EACA,MAAM,CAACG,MAAD,EAASC,SAAT,IAAsBvG,KAAK,CAACW,QAAN,CAAe,EAAf,CAA5B;EACA,MAAM,CAAC6F,QAAD,EAAWC,WAAX,IAA0BzG,KAAK,CAACW,QAAN,CAAe,EAAf,CAAhC;EACA,MAAM,CAACiC,WAAD,EAAcC,cAAd,IAAgC7C,KAAK,CAACW,QAAN,CAAe,EAAf,CAAtC;EACA,MAAM,CAACkB,MAAD,EAASC,SAAT,IAAsB9B,KAAK,CAACW,QAAN,CAAe,EAAf,CAA5B,CARgG,CAQhD;;EAChD,MAAM,CAAC+F,SAAD,EAAYC,UAAZ,IAA0B3G,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAAhC;EACA,MAAM,CAACmF,WAAD,EAAcC,cAAd,IAAgC7G,KAAK,CAACW,QAAN,CAAe,CACpD;IACCmG,OAAO,EAAE,EADV;IAEClC,IAAI,EAAE,MAFP;IAGChB,KAAK,EAAE;EAHR,CADoD,CAAf,CAAtC,CAVgG,CAkBhG;;EACA,MAAM,CAACmD,YAAD,EAAeC,eAAf,IAAkChH,KAAK,CAACW,QAAN,CAAe;IAAE;IACxDsG,GAAG,EAAEC,SADiD;IACtC;IAChBC,GAAG,EAAED,SAFiD,CAEvC;;EAFuC,CAAf,CAAxC;EAIA,MAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BrH,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAAlC;EACA,MAAMnB,EAAE,GAAGN,KAAK,CAAC8E,MAAN,EAAX;EACA,MAAMwC,OAAO,GAAGhH,EAAE,CAACE,OAAnB;;EAEA,MAAM+G,YAAY,GAAIC,KAAD,IAAW;IAE/B,IAAGA,KAAK,CAACC,MAAN,CAAa5D,IAAb,IAAqB,MAAxB,EAAgC;MAC/B,IAAIH,KAAK,GAAG8D,KAAK,CAACC,MAAN,CAAa/D,KAAzB;MACA,IAAIgE,KAAK,GAAGhE,KAAK,CAACiE,KAAN,CAAY,OAAZ,CAAZ;MACAlB,WAAW,CAAC,EACX,GAAGD,QADQ;QAEX,CAACgB,KAAK,CAACC,MAAN,CAAa5D,IAAd,GAAqB2D,KAAK,CAACC,MAAN,CAAa/D;MAFvB,CAAD,CAAX;IAIA,CAPD,MAQK,IAAG8D,KAAK,CAACC,MAAN,CAAa5D,IAAb,IAAqB,OAAxB,EAAiC;MACrCgD,cAAc,CAAC,CACd,GAAGD,WADW,EAEd;QACCE,OAAO,EAAEU,KAAK,CAACC,MAAN,CAAaG,KAAb,CAAmB,CAAnB,CADV;QAEChD,IAAI,EAAE,OAFP;QAGChB,KAAK,EAAEgD,WAAW,CAACnC,MAAZ,GAAqB,GAH7B;QAICoD,GAAG,EAAEC,GAAG,CAACC,eAAJ,CAAoBP,KAAK,CAACC,MAAN,CAAaG,KAAb,CAAmB,CAAnB,CAApB;MAJN,CAFc,CAAD,CAAd;IASA,CAVI,CAWL;IAEA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IA1CK,KA2CA,IAAIJ,KAAK,CAACC,MAAN,CAAa5D,IAAb,IAAqB,SAAzB,EAAoC;MACvC,IAAImE,YAAY,GAAGpB,WAAW,CAACqB,IAAZ,CAAiBC,IAAI,IAAIA,IAAI,CAACtE,KAAL,IAAc4D,KAAK,CAACC,MAAN,CAAaU,OAAb,CAAqBvE,KAA5D,CAAnB;;MAEA,IAAIoE,YAAJ,EAAkB;QAChB;QACAnB,cAAc,CAACD,WAAW,CAACxE,GAAZ,CAAgB8F,IAAI,IACjCA,IAAI,CAACtE,KAAL,IAAc4D,KAAK,CAACC,MAAN,CAAaU,OAAb,CAAqBvE,KAAnC,GACI,EAAE,GAAGsE,IAAL;UAAWpB,OAAO,EAAEU,KAAK,CAACC,MAAN,CAAa/D;QAAjC,CADJ,GAEIwE,IAHS,CAAD,CAAd;MAKD,CAPD,MAQK;QACH;QACArB,cAAc,CAAC,CACb,GAAGD,WADU,EAEb;UACEE,OAAO,EAAEU,KAAK,CAACC,MAAN,CAAa/D,KADxB;UAEEkB,IAAI,EAAE,MAFR;UAGEhB,KAAK,EAAE4D,KAAK,CAACC,MAAN,CAAaU,OAAb,CAAqBvE;QAH9B,CAFa,CAAD,CAAd;MAQD;IACF,CAtBI,MAuBA;MACJ6C,WAAW,CAAC,EACX,GAAGD,QADQ;QAEX,CAACgB,KAAK,CAACC,MAAN,CAAa5D,IAAd,GAAqB2D,KAAK,CAACC,MAAN,CAAa/D;MAFvB,CAAD,CAAX;IAIA;EACD,CAlFD,CA3BgG,CA+GhG;;;EACA,MAAM0E,YAAY,GAAG,MAAMZ,KAAN,IAAgB;IACpCA,KAAK,CAACnD,cAAN;IACAC,OAAO,CAACC,GAAR,CAAYqC,WAAZ;IACA,IAAIyB,KAAK,GAAG1C,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;;IAEA,IAAI,CAACyC,KAAK,CAAC3E,KAAN,CAAY4E,IAAZ,EAAD,IAAuB,CAAC1B,WAAW,CAACnE,IAAZ,CAAiBqE,OAAO,IAAI;MACtD,IAAIA,OAAO,CAAClC,IAAR,KAAiB,MAArB,EAA6B;QAC3B;QACA,OAAO,OAAOkC,OAAO,CAACA,OAAf,KAA2B,QAA3B,IAAuCA,OAAO,CAACA,OAAR,CAAgBwB,IAAhB,OAA2B,EAAzE;MACD,CAHD,MAGO,IAAIxB,OAAO,CAAClC,IAAR,KAAiB,OAArB,EAA8B;QACnC;QACA,OAAOkC,OAAO,CAACA,OAAR,YAA2ByB,IAAlC;MACD;IACF,CAR2B,CAA5B,EAQI;MACJxC,gBAAgB,CAAC;QACbnB,IAAI,EAAE,OADO;QAEb4D,OAAO,EAAE;MAFI,CAAD,CAAhB;MAIE,OALE,CAKO;IACV,CAdD,MAeK;MAEJlB,OAAO,CAACtG,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;MACA,IAAIwH,UAAU,GAAG,IAAIC,QAAJ,EAAjB;MAEAD,UAAU,CAACE,MAAX,CAAkB,MAAlB,EAA0B,OAA1B;MACAF,UAAU,CAACE,MAAX,CAAkB,OAAlB,EAA2BnC,QAAQ,CAAC6B,KAAT,GAAiB7B,QAAQ,CAAC6B,KAA1B,GAAkCA,KAAK,CAAC3E,KAAnE;MACA+E,UAAU,CAACE,MAAX,CAAkB,WAAlB,EAA+BjC,SAA/B;MACA+B,UAAU,CAACE,MAAX,CAAkB,kBAAlB,EAAsCzC,cAAc,CAACC,OAAf,CAAuB,gBAAvB,CAAtC;MACAsC,UAAU,CAACE,MAAX,CAAkB,cAAlB,EAAkCzC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAlC;;MAEA,KAAI,IAAIyC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAGhC,WAAW,CAACnC,MAA7B,EAAqCmE,CAAC,EAAtC,EAA0C;QAEzC,MAAM;UAAChE,IAAD;UAAOkC,OAAP;UAAgBlD;QAAhB,IAAyBgD,WAAW,CAACgC,CAAD,CAA1C;;QAEA,IAAGhE,IAAI,IAAI,MAAX,EAAmB;UAClB,IAAI,OAAOkC,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,CAACwB,IAAR,OAAmB,EAAtD,EAA0D;YACrD,SADqD,CAC1C;UACZ,CAFJ,MAGK;YACJ,IAAIxB,OAAO,GAAGF,WAAW,CAACgC,CAAD,CAAX,CAAe9B,OAA7B;YACA2B,UAAU,CAACE,MAAX,CAAmB,GAAE/E,KAAM,EAA3B,EAA8BkD,OAA9B;UACA;QACD,CARD,MAQO,IAAGlC,IAAI,IAAI,OAAX,EAAoB;UAC1B,IAAIkC,OAAO,GAAGF,WAAW,CAACgC,CAAD,CAAX,CAAe9B,OAA7B;UACA2B,UAAU,CAACE,MAAX,CAAmB,GAAE/E,KAAM,EAA3B,EAA8BkD,OAA9B;QACA;MACD;;MAED,IAAI9B,IAAI,GAAGpC,WAAW,CAACF,MAAZ,CAAmBpC,EAAE,IAAIA,EAAE,CAACiC,QAAH,IAAe,IAAxC,EAA8CH,GAA9C,CAAkD9B,EAAE,IAAIA,EAAE,CAACuD,IAA3D,CAAX;;MACA,IAAGmB,IAAI,CAACP,MAAL,GAAc,CAAjB,EAAoB;QACnBgE,UAAU,CAACE,MAAX,CAAkB,MAAlB,EAA0B3D,IAA1B;MACA;;MAED,IAAI6D,WAAW,GAAGhH,MAAM,CAACa,MAAP,CAAcL,IAAI,IAAIA,IAAI,CAACE,QAAL,IAAiB,IAAvC,EAA6CH,GAA7C,CAAiDC,IAAI,IAAI;QAC1E,OAAO;UACNC,GAAG,EAAED,IAAI,CAACC,GADJ;UAEN8D,QAAQ,EAAE/D,IAAI,CAACG;QAFT,CAAP;MAIA,CALiB,CAAlB;;MAMA,IAAGqG,WAAW,CAACpE,MAAZ,GAAqB,CAAxB,EAA2B;QAC1BgE,UAAU,CAACE,MAAX,CAAkB,aAAlB,EAAiCG,IAAI,CAACC,SAAL,CAAeF,WAAf,CAAjC;MACA;;MACDvE,OAAO,CAACC,GAAR,CAAYsE,WAAZ;;MAEA,IAAG7C,YAAY,CAACgD,GAAb,IAAoB,IAAvB,EAA6B;QAC5BP,UAAU,CAACE,MAAX,CAAkB,iBAAlB,EAAqC,KAArC;QACAF,UAAU,CAACE,MAAX,CAAkB,gBAAlB,EAAoC3C,YAAY,CAACiD,KAAjD;QACAR,UAAU,CAACE,MAAX,CAAkB,cAAlB,EAAkC3C,YAAY,CAACgD,GAA/C;QACAP,UAAU,CAACE,MAAX,CAAkB,eAAlB,EAAmC3C,YAAY,CAACkD,IAAhD;MACA,CALD,MAKO;QACNT,UAAU,CAACE,MAAX,CAAkB,iBAAlB,EAAqC,IAArC;MACA;;MAED,IAAGQ,WAAW,CAACC,IAAf,EAAqB;QACpBX,UAAU,CAACE,MAAX,CAAkB,QAAlB,EAA4BQ,WAAW,CAAClC,GAAxC;QACAwB,UAAU,CAACE,MAAX,CAAkB,QAAlB,EAA4BQ,WAAW,CAAChC,GAAxC;MACA;;MACD7C,OAAO,CAACC,GAAR,CAAYkE,UAAZ;MACAnE,OAAO,CAACC,GAAR,CAAYS,IAAZ;MAEA,IAAIqE,MAAM,GAAG,MAAMjJ,SAAS,CAACkJ,UAAV,CAAqBb,UAArB,CAAnB;;MAEA,IAAGY,MAAM,CAACE,OAAP,IAAkB,IAArB,EAA2B;QAC1BjF,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAD0B,CAE1B;;QACA+C,OAAO,CAACtG,SAAR,CAAkBwI,MAAlB,CAAyB,QAAzB;QACAlC,OAAO,CAACtG,SAAR,CAAkBC,GAAlB,CAAsB,OAAtB;QACA,IAAIU,KAAK,GAAGb,UAAU,CAAC,MAAK;UAC3BP,UAAU,CAAC,EACV,GAAGC,OADO;YAEVW,KAAK,EAAE;UAFG,CAAD,CAAV;QAIA,CALqB,EAKnB,GALmB,CAAtB;QAOA,IAAIsI,aAAa,GAAGnD,MAAM,CAAC2B,IAAP,CAAYyB,IAAI,IAAIA,IAAI,CAACnH,QAAL,IAAiB,IAArC,CAApB;;QACA,IAAGkH,aAAH,EAAkB;UACjB,MAAMrJ,SAAS,CAACuJ,WAAV,CAAsBF,aAAa,CAACnH,GAApC,CAAN;QACA;MAED,CAjBD,MAiBO,IAAG+G,MAAM,CAACb,OAAV,EAAmB;QACxBlB,OAAO,CAACtG,SAAR,CAAkBwI,MAAlB,CAAyB,UAAzB;QACAlF,OAAO,CAACC,GAAR,CAAY,4BAAZ;QACAwB,gBAAgB,CAAC;UAChBnB,IAAI,EAAE,OADU;UAEhB4D,OAAO,EAAEa,MAAM,CAACb;QAFA,CAAD,CAAhB;MAID;MACD;AACH;AACA;AACA;;;MACG,IAAG3G,MAAM,CAACY,IAAP,CAAYJ,IAAI,IAAIA,IAAI,CAACE,QAAL,IAAiB,IAArC,CAAH,EAA+C;QAE9C,IAAIqH,MAAM,GAAG/H,MAAM,CAACa,MAAP,CAAcL,IAAI,IAAIA,IAAI,CAACE,QAAL,IAAiB,IAAvC,EAA6CH,GAA7C,CAAiDC,IAAI,IAAI;UAAC,OAAOA,IAAI,CAACC,GAAZ;QAAgB,CAA1E,CAAb;QAEAyD,gBAAgB,CAAC;UAChBnB,IAAI,EAAE,SADU;UAEhBiF,MAAM,EAAE,KAFQ;UAGhBC,QAAQ,EAAE7D,MAHM;UAIhB8D,cAAc,EAAE3D,QAJA;UAKhByB,GAAG,EAAEwB,MAAM,CAACW,OALI;UAMhBxB,OAAO,EAAE,MANO;UAOhByB,UAAU,EAAEL,MAPI;UAQhBM,SAAS,EAAE7B,KAAK,CAAC3E;QARD,CAAD,CAAhB;MAWA,CAfD,MAeO;QACNqC,gBAAgB,CAAC;UAChBwD,OAAO,EAAE;QADO,CAAD,CAAhB;MAGA;IACD;EACD,CArID;;EAuIA,MAAMY,SAAS,GAAG,MAAM3C,KAAN,IAAgB;IAEhCA,KAAK,CAACnD,cAAN;IACAC,OAAO,CAACC,GAAR,CAAYqC,WAAZ;;IAEA,IAAG,CAACJ,QAAQ,CAAC6B,KAAb,EAAoB;MAClBtC,gBAAgB,CAAC;QAChBnB,IAAI,EAAE,OADU;QAEhB4D,OAAO,EAAE;MAFO,CAAD,CAAhB;IAID,CALD,MAKO,IAAI5B,WAAW,CAACnC,MAAZ,GAAqB,CAAzB,EAA4B;MAClCsB,gBAAgB,CAAC;QACfnB,IAAI,EAAE,OADS;QAEf4D,OAAO,EAAE;MAFM,CAAD,CAAhB;IAIA,CALM,MAMF;MACJlB,OAAO,CAACtG,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;MACA,IAAIwH,UAAU,GAAG,IAAIC,QAAJ,EAAjB;MAEAD,UAAU,CAACE,MAAX,CAAkB,MAAlB,EAA0B,OAA1B;MACAF,UAAU,CAACE,MAAX,CAAkB,OAAlB,EAA2BnC,QAAQ,CAAC6B,KAApC;MACAI,UAAU,CAACE,MAAX,CAAkB,WAAlB,EAA+BjC,SAA/B;MACA+B,UAAU,CAACE,MAAX,CAAkB,kBAAlB,EAAsCzC,cAAc,CAACC,OAAf,CAAuB,gBAAvB,CAAtC;MACAsC,UAAU,CAACE,MAAX,CAAkB,cAAlB,EAAkCzC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAlC;;MAEA,KAAI,IAAIyC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAGhC,WAAW,CAACnC,MAA7B,EAAqCmE,CAAC,EAAtC,EAAyC;QACxC,IAAGhC,WAAW,CAACgC,CAAD,CAAX,CAAehE,IAAf,IAAuB,MAA1B,EAAkC;UACjC,IAAGgC,WAAW,CAACgC,CAAD,CAAX,CAAe9B,OAAf,KAA2B,EAA9B,EAAkC;YACjC,OAAO,IAAP;UACA,CAFD,MAEO;YACN,IAAIA,OAAO,GAAGF,WAAW,CAACgC,CAAD,CAAX,CAAe9B,OAA7B;YACA2B,UAAU,CAACE,MAAX,CAAmB,GAAE/B,WAAW,CAACgC,CAAD,CAAX,CAAehF,KAAM,EAA1C,EAA6CkD,OAA7C;UACA;QAED,CARD,MAQO,IAAGF,WAAW,CAACgC,CAAD,CAAX,CAAehE,IAAf,IAAuB,OAA1B,EAAmC;UACzC,IAAIkC,OAAO,GAAGF,WAAW,CAACgC,CAAD,CAAX,CAAe9B,OAA7B;UACA2B,UAAU,CAACE,MAAX,CAAmB,GAAE/B,WAAW,CAACgC,CAAD,CAAX,CAAehF,KAAM,EAA1C,EAA6CkD,OAA7C;QACA;MACD;;MAED,IAAI9B,IAAI,GAAGpC,WAAW,CAACF,MAAZ,CAAmBpC,EAAE,IAAIA,EAAE,CAACiC,QAAH,IAAe,IAAxC,EAA8CH,GAA9C,CAAkD9B,EAAE,IAAIA,EAAE,CAACuD,IAA3D,CAAX;;MACA,IAAGmB,IAAI,CAACP,MAAL,GAAc,CAAjB,EAAoB;QACnBgE,UAAU,CAACE,MAAX,CAAkB,MAAlB,EAA0B3D,IAA1B;MACA;;MAED,IAAI6D,WAAW,GAAGhH,MAAM,CAACa,MAAP,CAAcL,IAAI,IAAIA,IAAI,CAACE,QAAL,IAAiB,IAAvC,EAA6CH,GAA7C,CAAiDC,IAAI,IAAI;QAC1E,OAAO;UACNC,GAAG,EAAED,IAAI,CAACC,GADJ;UAEN8D,QAAQ,EAAE/D,IAAI,CAACG;QAFT,CAAP;MAIA,CALiB,CAAlB;;MAMA,IAAGqG,WAAW,CAACpE,MAAZ,GAAqB,CAAxB,EAA2B;QAC1BgE,UAAU,CAACE,MAAX,CAAkB,aAAlB,EAAiCG,IAAI,CAACC,SAAL,CAAeF,WAAf,CAAjC;MACA;;MACDvE,OAAO,CAACC,GAAR,CAAYsE,WAAZ;;MAEA,IAAG7C,YAAY,CAACgD,GAAb,IAAoB,IAAvB,EAA6B;QAC5BP,UAAU,CAACE,MAAX,CAAkB,iBAAlB,EAAqC,KAArC;QACAF,UAAU,CAACE,MAAX,CAAkB,gBAAlB,EAAoC3C,YAAY,CAACiD,KAAjD;QACAR,UAAU,CAACE,MAAX,CAAkB,cAAlB,EAAkC3C,YAAY,CAACgD,GAA/C;QACAP,UAAU,CAACE,MAAX,CAAkB,eAAlB,EAAmC3C,YAAY,CAACkD,IAAhD;MACA,CALD,MAKO;QACNT,UAAU,CAACE,MAAX,CAAkB,iBAAlB,EAAqC,IAArC;MACA;;MAED,IAAGQ,WAAW,CAACC,IAAf,EAAqB;QACpBX,UAAU,CAACE,MAAX,CAAkB,QAAlB,EAA4BQ,WAAW,CAAClC,GAAxC;QACAwB,UAAU,CAACE,MAAX,CAAkB,QAAlB,EAA4BQ,WAAW,CAAChC,GAAxC;MACA;;MACD7C,OAAO,CAACC,GAAR,CAAYkE,UAAZ;MACAnE,OAAO,CAACC,GAAR,CAAYS,IAAZ;MAEA,IAAIqE,MAAM,GAAG,MAAMjJ,SAAS,CAACkJ,UAAV,CAAqBb,UAArB,CAAnB;;MAEA,IAAGY,MAAM,CAACE,OAAP,IAAkB,IAArB,EAA2B;QAC1BjF,OAAO,CAACC,GAAR,CAAY8E,MAAZ;QACA/B,OAAO,CAACtG,SAAR,CAAkBwI,MAAlB,CAAyB,QAAzB;QACAlC,OAAO,CAACtG,SAAR,CAAkBC,GAAlB,CAAsB,OAAtB;QACA,IAAIJ,MAAM,GAAGC,UAAU,CAAC,MAAK;UAC5BP,UAAU,CAAC,EACV,GAAGC,OADO;YAEVW,KAAK,EAAE;UAFG,CAAD,CAAV;QAIA,CALsB,EAKpB,GALoB,CAAvB;QAOA,IAAID,KAAK,GAAGJ,UAAU,CAAC,MAAK;UAC3BiF,gBAAgB,CAAC;YAChBwD,OAAO,EAAE;UADO,CAAD,CAAhB;QAGA,CAJqB,EAInB,GAJmB,CAAtB;MAKA,CAhBD,MAgBO,IAAGF,MAAM,CAACb,OAAV,EAAmB;QACzBlB,OAAO,CAACtG,SAAR,CAAkBwI,MAAlB,CAAyB,UAAzB;QACAlF,OAAO,CAACC,GAAR,CAAY,4BAAZ;QACAwB,gBAAgB,CAAC;UAChBnB,IAAI,EAAE,OADU;UAEhB4D,OAAO,EAAEa,MAAM,CAACb;QAFA,CAAD,CAAhB;MAIA;IACD;EACF,CApGD;;EAsGA,MAAM4B,UAAU,GAAIxF,IAAD,IAAU;IAC5BiC,cAAc,CAAC,CACd,GAAGD,WADW,EAEd;MACCE,OAAO,EAAE,EADV;MAEClC,IAAI,EAAEA,IAFP;MAGChB,KAAK,EAAEgD,WAAW,CAACnC;IAHpB,CAFc,CAAD,CAAd;EAQA,CATD;;EAWA,MAAM4F,gBAAgB,GAAG,CAACzG,KAAD,EAAQgB,IAAR,EAAc0F,IAAd,KAAuB;IAE/C,IAAG1F,IAAI,IAAI,MAAX,EAAmB;MACjB,oBACC;QAAA,wBACC;UAEC,SAAS,EAAE,kBAFZ;UAGC,IAAI,EAAC,SAHN;UAIC,WAAW,EAAC,SAJb;UAKC,MAAM,EAAE2C,YALT;UAMC,QAAQ,EAAEA,YANX;UAOC,cAAY3D,KAPb;UAQC,IAAI,EAAC,GARN;UASC,IAAI,EAAC,IATN;UAUC,KAAK,EAAE0G,IAAI,GAAGA,IAAH,GAAUpD;QAVtB,GACMtD,KADN;UAAA;UAAA;UAAA;QAAA,QADD,EAaEA,KAAK,GAAG,CAAR,iBACA;UAAQ,SAAS,EAAG,sBAApB;UACE,OAAO,EAAGJ,CAAD,IAAM;YACdA,CAAC,CAACa,cAAF;YACAC,OAAO,CAACC,GAAR,CAAYX,KAAZ;YACA,IAAI2G,KAAK,GAAG3D,WAAW,CAAClE,MAAZ,CAAmBgH,IAAI,IAAIA,IAAI,CAAC9F,KAAL,IAAcA,KAAzC,CAAZ;YACAiD,cAAc,CAAC0D,KAAD,CAAd;UACA,CANH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAdF;MAAA;QAAA;QAAA;QAAA;MAAA,QADD;IA4BD,CA7BD,MA8BK,IAAG3F,IAAI,IAAI,OAAX,EAAoB;MAExB;MACA,oBACC;QAAA,wBACC;UAAiB,GAAG,EAAE0F;QAAtB,GAAU1G,KAAV;UAAA;UAAA;UAAA;QAAA,QADD,eAGC;UAAQ,SAAS,EAAG,sBAApB;UACE,OAAO,EAAGJ,CAAD,IAAM;YACdA,CAAC,CAACa,cAAF;YACA,IAAIkG,KAAK,GAAG3D,WAAW,CAAClE,MAAZ,CAAmBgH,IAAI,IAAIA,IAAI,CAAC9F,KAAL,IAAcA,KAAzC,CAAZ;YACAiD,cAAc,CAAC0D,KAAD,CAAd;UACA,CALH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAHD;MAAA;QAAA;QAAA;QAAA;MAAA,QADD;IAeA;EACD,CAnDD;;EAqDA,MAAMC,cAAc,GAAG,YAAW;IACjC,IAAIC,OAAO,GAAG,MAAMrK,SAAS,CAACoK,cAAV,CAAyBvE,MAAzB,CAApB;IACAwE,OAAO,CAACC,OAAR,CAAgBrI,IAAI,IAAI;MACvBA,IAAI,CAACE,QAAL,GAAgB,KAAhB;IACA,CAFD;IAGAT,SAAS,CAAC2I,OAAD,CAAT;EACA,CAND;;EAQA,MAAME,cAAc,GAAG,YAAW;IAEjC,IAAI3H,MAAM,GAAG,MAAM5C,SAAS,CAACuK,cAAV,EAAnB;IACA,IAAIC,QAAQ,GAAG,MAAMxK,SAAS,CAACyK,WAAV,EAArB,CAHiC,CAGa;;IAC9CvG,OAAO,CAACC,GAAR,CAAYqG,QAAZ;IACA,IAAIE,OAAO,GAAG,EAAd;;IACA,IAAIC,OAAO,GAAG/H,MAAM,CAACZ,GAAP,CAAW4I,KAAK,IAAI;MACjC,OAAO;QACNnH,IAAI,EAAEmH,KADA;QAENpG,IAAI,EAAE,OAFA;QAGNrC,QAAQ,EAAE;MAHJ,CAAP;IAKA,CANa,CAAd;;IAOAuI,OAAO,CAACG,IAAR,CAAa,GAAGF,OAAhB;;IACA,IAAGH,QAAQ,IAAI,KAAf,EAAsB;MACrB,IAAIM,SAAS,GAAGN,QAAQ,CAACxI,GAAT,CAAa4I,KAAK,IAAI;QACrC,OAAO;UACNnH,IAAI,EAAEmH,KAAK,CAACnH,IADN;UAENe,IAAI,EAAE,KAFA;UAGNrC,QAAQ,EAAE;QAHJ,CAAP;MAKA,CANe,CAAhB;;MAOAuI,OAAO,CAACG,IAAR,CAAa,GAAGC,SAAhB;IACA;;IACD5G,OAAO,CAACC,GAAR,CAAYuG,OAAZ;IACAjI,cAAc,CAACiI,OAAD,CAAd;EACA,CA1BD;;EA4BA,MAAMK,SAAS,GAAG,YAAW;IAC5B,IAAIV,OAAO,GAAG,MAAMrK,SAAS,CAAC+K,SAAV,EAApB;IACA5E,SAAS,CAACkE,OAAD,CAAT;EACA,CAHD;;EAMA,MAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBrL,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,IAAlC,CAA1B;EACA,MAAM,CAACN,KAAD,EAAQ2B,QAAR,IAAoB9C,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAA1B;EACA,MAAM,CAAC6J,WAAD,EAAcC,cAAd,IAAgCvL,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAAtC;EACA,MAAM,CAAC+J,YAAD,EAAeC,eAAf,IAAkCzL,KAAK,CAACW,QAAN,CAAe,EAAf,CAAxC;EACA,MAAM+K,QAAQ,GAAG1L,KAAK,CAAC8E,MAAN,EAAjB,CA3cgG,CA8chG;EACA;;EACA,MAAM,CAACqE,WAAD,EAAcwC,cAAd,IAAgC3L,KAAK,CAACW,QAAN,CAAe;IACpDyI,IAAI,EAAE,KAD8C;IAEpDnC,GAAG,EAAEC,SAF+C;IAGpDC,GAAG,EAAED;EAH+C,CAAf,CAAtC;EAMA,IAAI0E,WAAJ;;EACA,IAAG5F,YAAY,CAACgD,GAAhB,EAAqB;IACpB4C,WAAW,GAAI,GAAE5F,YAAY,CAACiD,KAAb,GAAqB,CAAE,KAAIjD,YAAY,CAACgD,GAAI,KAAIhD,YAAY,CAACkD,IAAK,EAAnF;EACA;;EAED,IAAI2C,eAAe,GAAIrI,CAAD,IAAO;IAE5B,MAAMH,KAAK,GAAGG,CAAC,CAACC,aAAF,CAAgBC,KAA9B;IACA+H,eAAe,CAACjI,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAf;EACA,CAJD;;EAMA,IAAIoI,aAAa,GAAG,MAAMtI,CAAN,IAAY;IAE/B,IAAIuI,IAAI,GAAG;MACVnH,IAAI,EAAE,KADI;MAEVf,IAAI,EAAE2H,YAFI;MAGVQ,KAAK,EAAEV,WAAW,IAAI,IAAf,GAAsBrF,MAAtB,GAA+B,IAH5B;MAIVgG,MAAM,EAAE,CAAE,GAAEX,WAAW,IAAI,IAAf,GAAsBrF,MAAtB,GAA+B,IAAK,EAAxC,CAJE;MAKViG,aAAa,EAAEZ,WAAW,IAAI,IAAf,GAAsBlF,QAAtB,GAAiC,IALtC;MAMV+F,SAAS,EAAE,CAAClG,MAAD,CAND;MAOVS,SAAS,EAAE4E,WAAW,IAAI,IAAf,GAAsB,IAAtB,GAA6B,KAP9B;MAQVc,MAAM,EAAE;IARE,CAAX;IAUArG,gBAAgB,CAACgG,IAAD,CAAhB;IACAzH,OAAO,CAACC,GAAR,CAAYwH,IAAZ;IACA;AACF;AACA;EACE,CAjBD;;EAmBA,MAAMxI,QAAQ,GAAIC,CAAD,IAAO;IACvB,IAAGA,CAAC,CAACiE,MAAF,CAAS5D,IAAT,IAAiB,KAApB,EAA2B;MAC1B8H,cAAc,CAAC,EACd,GAAGxC,WADW;QAEdlC,GAAG,EAAEzD,CAAC,CAACiE,MAAF,CAAS/D;MAFA,CAAD,CAAd;IAIA,CALD,MAMK,IAAGF,CAAC,CAACiE,MAAF,CAAS5D,IAAT,IAAiB,KAApB,EAA2B;MAC/B8H,cAAc,CAAC,EACd,GAAGxC,WADW;QAEdhC,GAAG,EAAE3D,CAAC,CAACiE,MAAF,CAAS/D;MAFA,CAAD,CAAd;IAIA;EACD,CAbD;;EAeA,MAAM2I,kBAAkB,GAAG;IAC1BC,kBAAkB,EAAE,IADM;IAE1BC,OAAO,EAAE,IAFiB;IAG1BC,UAAU,EAAE;EAHc,CAA3B;;EAMA,MAAMC,kBAAkB,GAAIC,GAAD,IAAS;IACnC;IACA;IACA;IACA;IACAf,cAAc,CAAC,EACd,GAAGxC,WADW;MAEdlC,GAAG,EAAEyF,GAAG,CAACC,SAFK;MAGdxF,GAAG,EAAEuF,GAAG,CAACE;IAHK,CAAD,CAAd;IAKAtI,OAAO,CAACC,GAAR,CAAY,kCAAZ;EACA,CAXD;;EAaA,MAAMsI,gBAAgB,GAAIC,GAAD,IAAS;IACjCxI,OAAO,CAACC,GAAR,CAAa,UAASuI,GAAG,CAACC,IAAK,MAAKD,GAAG,CAACtE,OAAQ,EAAhD;EACA,CAFD,CAthBgG,CA0hBhG;;;EACAxI,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IACpB,IAAGoE,WAAW,CAAClC,GAAf,EAAoB;MACnB;IACA;;IAED,IAAG+F,SAAS,CAACC,WAAb,EAA0B;MACzBD,SAAS,CAACE,WAAV,CAAsBC,KAAtB,CAA4B;QAACtJ,IAAI,EAAE;MAAP,CAA5B,EAAmDuJ,IAAnD,CAAyDC,MAAD,IAAW;QAClE/I,OAAO,CAACC,GAAR,CAAY8I,MAAZ;;QAEA,IAAGA,MAAM,CAAC5L,KAAP,IAAgB,SAAnB,EAA8B;UAC7BuL,SAAS,CAACC,WAAV,CAAsBK,kBAAtB,CAAyCb,kBAAzC,EAA6DI,gBAA7D,EAA+ER,kBAA/E;QACA,CAFD,MAGK,IAAGgB,MAAM,CAAC5L,KAAP,IAAgB,QAAnB,EAA6B;UACjCuL,SAAS,CAACC,WAAV,CAAsBK,kBAAtB,CAAyCb,kBAAzC,EAA6DI,gBAA7D,EAA+ER,kBAA/E;QACA,CAFI,MAGA,IAAGgB,MAAM,CAAC5L,KAAP,IAAgB,QAAnB,EAA6B;UACjC;UACA;UACA;UACA;UACA;UACAkK,cAAc,CAAC,EACd,GAAGxC,WADW;YAEdlC,GAAG,EAAEC,SAFS;YAGdC,GAAG,EAAED;UAHS,CAAD,CAAd;QAKA;MACD,CArBD;IAsBA,CAvBD,MAwBK;MACJ5C,OAAO,CAACC,GAAR,CAAY,oCAAZ;IACA;EACD,CAhCD,EAgCG,CAAC4E,WAAW,CAACC,IAAb,CAhCH,EA3hBgG,CA6jBhG;;EACApJ,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IACpByF,cAAc;IACdG,cAAc;IACdQ,SAAS;EACT,CAJD,EAIG,EAJH,EA9jBgG,CAokBhG;;EACAnL,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IAEpB,IAAGe,aAAa,CAAClB,IAAd,IAAsB,cAAtB,IAAwCkB,aAAa,CAAC0C,OAAd,IAAyB,QAApE,EAA8E;MAC7EmC,cAAc;MACd7H,QAAQ;IACR;EACD,CAND,EAMG,CAACgD,aAAD,CANH,EArkBgG,CA6kBhG;;EACA9F,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IACpB,IAAIhE,SAAS,GAAGT,EAAE,CAACE,OAAnB;IACA,IAAImB,KAAK,GAAGb,UAAU,CAAC,MAAK;MAC3BC,SAAS,CAACC,SAAV,CAAoBwI,MAApB,CAA2B,QAA3B;IACA,CAFqB,EAEnB,GAFmB,CAAtB;EAGA,CALD,EAKG,EALH;EAQA,oBAEC;IAAK,EAAE,EAAC,YAAR;IAAqB,GAAG,EAAElJ,EAA1B;IAA8B,SAAS,EAAG,QAA1C;IAAA,wBAKC;MAAK,EAAE,EAAC,eAAR;MAAA,wBAEC,QAAC,aAAD;QAAe,EAAE,EAAEA,EAAnB;QAAuB,OAAO,EAAEE,OAAhC;QAAyC,UAAU,EAAED;MAArD;QAAA;QAAA;QAAA;MAAA,QAFD,eAIC;QAAK,EAAE,EAAC,YAAR;QAAA,wBACC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,EAEEC,OAAO,CAAC+M,QAAR,iBACA;UAAA,UAAK3B;QAAL;UAAA;UAAA;UAAA;QAAA,QAHF,EAKE,CAACpL,OAAO,CAAC+M,QAAT,iBACA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QANF;MAAA;QAAA;QAAA;QAAA;MAAA,QAJD,eAcC,QAAC,SAAD;QAAW,YAAY,EAAElG;MAAzB;QAAA;QAAA;QAAA;MAAA,QAdD;IAAA;MAAA;MAAA;MAAA;IAAA,QALD,eA2BC;MAAM,QAAQ,EAAEe,YAAhB;MAA8B,OAAO,EAAC,qBAAtC;MAAA,uBACC;QAAA,wBACC;UAAO,IAAI,EAAC,OAAZ;UAAoB,EAAE,EAAC,OAAvB;UAA+B,WAAW,EAAC,OAA3C;UAAmD,QAAQ,EAAEb;QAA7D;UAAA;UAAA;UAAA;QAAA,QADD,eAEC;UAAK,EAAE,EAAC,gBAAR;UAAA,UASEX,WAAW,CAACxE,GAAZ,CAAiBkF,OAAD,IAAa;YAC7B,IAAGA,OAAO,CAAC1C,IAAR,IAAgB,MAAnB,EAA2B;cAC1B,OAAOyF,gBAAgB,CAAC/C,OAAO,CAAC1D,KAAT,EAAgB0D,OAAO,CAAC1C,IAAxB,EAA8B0C,OAAO,CAACR,OAAtC,CAAvB;YACA,CAFD,MAGK,IAAGQ,OAAO,CAAC1C,IAAR,IAAgB,OAAnB,EAA4B;cAChC,OAAOyF,gBAAgB,CAAC/C,OAAO,CAAC1D,KAAT,EAAgB0D,OAAO,CAAC1C,IAAxB,EAA8B0C,OAAO,CAACO,GAAtC,CAAvB;YACA;UACD,CAPA;QATF;UAAA;UAAA;UAAA;QAAA,QAFD,eAsBC;UAAK,EAAE,EAAC,aAAR;UAAA,wBACC;YAAQ,SAAS,EAAE,eAAnB;YACE,OAAO,EAAGrE,CAAD,IAAM;cACdA,CAAC,CAACa,cAAF;cACA+F,UAAU,CAAC,MAAD,CAAV;YACA,CAJH;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADD,eASC;YAAO,SAAS,EAAC,UAAjB;YAA4B,QAAQ,EAAE7C,YAAtC;YAAoD,OAAO,EAAC,UAA5D;YAAuE,OAAO,EAAG/D,CAAD,IAAM;cACrFmC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoC4H,KAApC;YACA,CAFD;YAAA,wBAGC;cAAO,MAAM,MAAb;cACC,EAAE,EAAC,UADJ;cAEC,IAAI,EAAC,MAFN;cAGC,MAAM,EAAC,QAHR;cAIC,IAAI,EAAC,OAJN;cAKC,MAAM;YALP;cAAA;cAAA;cAAA;YAAA,QAHD,eASC;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QATD;UAAA;YAAA;YAAA;YAAA;UAAA,QATD;QAAA;UAAA;UAAA;UAAA;QAAA,QAtBD,eA6CC,QAAC,UAAD;UAAY,MAAM,EAAE3L,MAApB;UAA4B,SAAS,EAAEC;QAAvC;UAAA;UAAA;UAAA;QAAA,QA7CD,eA+CC,QAAC,WAAD;UAAa,WAAW,EAAEc,WAA1B;UACI,cAAc,EAAEC,cADpB;UAEI,QAAQ,EAAEC;QAFd;UAAA;UAAA;UAAA;QAAA,QA/CD,eAmDC;UAAQ,EAAE,EAAC,YAAX;UACE,SAAS,EAAG,iBAAgB4D,SAAS,IAAI,IAAb,GAAoB,QAApB,GAA+B,WAAY,EADzE;UAEE,OAAO,EAAGlD,CAAD,IAAM;YAACA,CAAC,CAACa,cAAF;YAAoBsC,UAAU;UAAG,CAFnD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAnDD,eAyDC;UAAQ,EAAE,EAAC,aAAX;UACE,SAAS,EAAG,iBAAgBwC,WAAW,CAACC,IAAZ,IAAoB,IAApB,GAA2B,QAA3B,GAAsC,WAAY,EADhF;UAEE,OAAO,EAAG5F,CAAD,IAAM;YACdA,CAAC,CAACa,cAAF;;YACA,IAAG8E,WAAW,CAACC,IAAZ,IAAoB,KAAvB,EAA8B;cAC7BuC,cAAc,CAAC,EACd,GAAGxC,WADW;gBAEdC,IAAI,EAAE;cAFQ,CAAD,CAAd;YAIA,CALD,MAKO;cACNuC,cAAc,CAAC,EACd,GAAGxC,WADW;gBAEdC,IAAI,EAAE;cAFQ,CAAD,CAAd;YAIA;UACD,CAfH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAzDD,EA4EED,WAAW,CAACC,IAAZ,iBACA;UAAK,EAAE,EAAC,oBAAR;UAAA,wBAEC;YAAK,EAAE,EAAC,SAAR;YAAkB,SAAS,EAAG,GAAED,WAAW,CAAClC,GAAZ,IAAmBF,YAAY,CAACE,GAAhC,GAAsC,QAAtC,GAAiD,UAAW,EAA5F;YAAA,wBACC;cAAG,SAAS,EAAG,GAAEkC,WAAW,CAAClC,GAAZ,IAAmBF,YAAY,CAACE,GAAhC,GAAsC,QAAtC,GAAiD,UAAW,EAA7E;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QADD,eAEC;cAAO,IAAI,EAAC,QAAZ;cACE,IAAI,EAAC,KADP;cAEE,QAAQ,EAAE1D,QAFZ;cAGE,WAAW,EAAE4F,WAAW,CAAClC;YAH3B;cAAA;cAAA;cAAA;YAAA,QAFD;UAAA;YAAA;YAAA;YAAA;UAAA,QAFD,eASC;YAAK,EAAE,EAAC,SAAR;YAAkB,SAAS,EAAG,GAAEkC,WAAW,CAAClC,GAAZ,IAAmBF,YAAY,CAACE,GAAhC,GAAsC,QAAtC,GAAiD,UAAW,EAA5F;YAAA,wBACC;cAAG,SAAS,EAAG,GAAEkC,WAAW,CAAClC,GAAZ,IAAmBF,YAAY,CAACE,GAAhC,GAAsC,QAAtC,GAAiD,UAAW,EAA7E;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QADD,eAEC;cAAO,IAAI,EAAC,QAAZ;cACE,IAAI,EAAC,KADP;cAEE,QAAQ,EAAE1D,QAFZ;cAGE,WAAW,EAAE4F,WAAW,CAAChC;YAH3B;cAAA;cAAA;cAAA;YAAA,QAFD;UAAA;YAAA;YAAA;YAAA;UAAA,QATD;QAAA;UAAA;UAAA;UAAA;QAAA,QA7EF;MAAA;QAAA;QAAA;QAAA;MAAA;IADD;MAAA;MAAA;MAAA;IAAA,QA3BD,eAkIC;MAAK,EAAE,EAAC,SAAR;MAAA,wBACC;QAAQ,SAAS,EAAE,eAAnB;QAAoC,OAAO,EAAEgD,SAA7C;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADD,eAGC;QAAQ,SAAS,EAAE,eAAnB;QAAoC,OAAO,EAAE/B,YAA7C;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAHD;IAAA;MAAA;MAAA;MAAA;IAAA,QAlID,EAwIEjH,KAAK,iBACL;MAAK,EAAE,EAAC,cAAR;MAAuB,GAAG,EAAEuK,QAA5B;MAAsC,SAAS,EAAG,GAAEvK,KAAK,IAAI,IAAT,GAAgB,QAAhB,GAA2B,OAAQ,EAAvF;MAAA,wBACC;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADD,eAEC;QACC,WAAW,EAAC,4BADb;QAEC,QAAQ,EAAE0K,eAFX;QAGC,KAAK,EAAEL;MAHR;QAAA;QAAA;QAAA;MAAA,QAFD,eAMC;QAAK,EAAE,EAAC,eAAR;QAAA,wBACC;UAAQ,SAAS,EAAG,eAApB;UACE,OAAO,EAAGhI,CAAD,IAAM;YACdkI,QAAQ,CAAClL,OAAT,CAAiBQ,SAAjB,CAA2BwI,MAA3B,CAAkC,QAAlC;YACAkC,QAAQ,CAAClL,OAAT,CAAiBQ,SAAjB,CAA2BC,GAA3B,CAA+B,OAA/B;YACAH,UAAU,CAAC,MAAK;cACfgC,QAAQ;YACR,CAFS,EAEP,GAFO,CAAV;UAGA,CAPH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,eASC;UACC,SAAS,EAAG,iBAAgBwI,WAAW,IAAI,IAAf,GAAsB,QAAtB,GAAiC,WAAY,EAD1E;UAEC,OAAO,EAAG9H,CAAD,IAAM;YACdA,CAAC,CAACa,cAAF;YACAkH,cAAc;UACd,CALF;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QATD,eAeC;UAAQ,SAAS,EAAG,eAApB;UACE,OAAO,EAAEO,aADX;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAfD;MAAA;QAAA;QAAA;QAAA;MAAA,QAND;IAAA;MAAA;MAAA;MAAA;IAAA,QAzIF,EAoKE1E,SAAS,iBACT,QAAC,QAAD;MACC,IAAI,EAAEd,MADP;MAEC,IAAI,EAAE,YAFP;MAGC,MAAM,EAAG,GAAEF,QAAS,WAHrB;MAIC,aAAa,EAAEN,aAJhB;MAKC,gBAAgB,EAAEC,gBALnB;MAMC,WAAW,EAAEsB,YANd;MAOC,WAAW,EAAET,WAPd;MAQC,cAAc,EAAEC,cARjB;MASC,OAAO,EAAE,EATV;MAUC,cAAc,EAAE8E,cAVjB;MAWC,eAAe,EAAE3E,eAXlB;MAYC,UAAU,EAAEL,UAZb;MAaC,WAAW,EAAE/D,WAbd;MAcC,cAAc,EAAEC,cAdjB;MAeC,MAAM,EAAEhB,MAfT;MAgBC,SAAS,EAAEC,SAhBZ;MAiBC,SAAS,EAAEyE;IAjBZ;MAAA;MAAA;MAAA;IAAA,QArKF;EAAA;IAAA;IAAA;IAAA;EAAA,QAFD;AA8LA;;IApxBeV,U;;MAAAA,U;AAsxBhB,eAAe,SAAS4H,OAAT,QAAiF;EAAA;;EAAA,IAAhE;IAAC1L,MAAD;IAASxB,UAAT;IAAqBC,OAArB;IAA8B+D,GAA9B;IAAmCmJ,MAAnC;IAA2CC,YAA3C;IAAyDC;EAAzD,CAAgE;EAE/F;EACA,IAAI3H,MAAM,GAAGC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAAb;EACA,IAAI,CAAC0H,OAAD,EAAUC,SAAV,IAAuB9N,KAAK,CAACwB,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAA3B;EAEA;AACD;AACA;AACA;AACA;EACC;EACA;EACA;EACA;;EAEA,IAAIsM,SAAS,GAAG,YAAW;IAE1B,IAAIC,KAAK,GAAG,MAAM5N,SAAS,CAAC6N,WAAV,CAAsB;MAACrJ,IAAI,EAAE,WAAP;MAAoBsJ,SAAS,EAAE1N,OAAO,CAAC+D;IAAvC,CAAtB,CAAlB;IACAmJ,MAAM,CAACM,KAAD,CAAN;EACA,CAJD;;EAMAhO,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IACpBgJ,SAAS;IACTxN,UAAU,CAAC,EACV,GAAGC,OADO;MAEV2N,MAAM,EAAE;IAFE,CAAD,CAAV;EAIA,CAND,EAMG,EANH;EAQAnO,KAAK,CAAC+E,SAAN,CAAgB,MAAK;IACpBgJ,SAAS;EACT,CAFD,EAEG,CAACvN,OAAO,CAACW,KAAT,EAAgBX,OAAO,CAAC4N,UAAxB,CAFH;EAKA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAIC,SAAS,GAAG,KAAhB;EAEA,oBACC;IAAK,EAAE,EAAC,SAAR;IAAkB,SAAS,EAAI,GAAEV,YAAY,CAACW,IAAK,EAAnD;IAAuD,GAAG,EAAEV,IAA5D;IAAA,uBACC,QAAC,GAAD;MAAK,IAAI,EAAErJ,GAAX;MACE,OAAO,EAAE,MADX;MAEE,SAAS,EAAE8J,SAFb;MAGE,OAAO,EAAE7N,OAHX;MAIE,UAAU,EAAED,UAJd;MAKE,SAAS,EAAEwN;IALb;MAAA;MAAA;MAAA;IAAA;EADD;IAAA;IAAA;IAAA;EAAA,QADD;AAUA;;IA5DuBN,O;;MAAAA,O"},"metadata":{},"sourceType":"module"}