{"ast":null,"code":"var _jsxFileName = \"/home/jce/Web Dev Space/Syncsequence/frontEnd/src/components/sections/socialLog.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n/* * * V i t a l s * * */\nimport * as React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport APIaccess from '../../apiaccess';\nimport Log from '../blog/log';\nimport './sections.css';\nimport './socialLog.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet accessAPI = APIaccess();\n\nlet twoWaySVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"30.124\",\n  height: \"21.732\",\n  viewBox: \"0 0 30.124 21.732\",\n  children: /*#__PURE__*/_jsxDEV(\"g\", {\n    id: \"Group_369\",\n    \"data-name\": \"Group 369\",\n    transform: \"translate(-320.376 -352.134)\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      id: \"Group_367\",\n      \"data-name\": \"Group 367\",\n      transform: \"translate(0 -31.5)\",\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        id: \"Group_224\",\n        \"data-name\": \"Group 224\",\n        transform: \"translate(298.376 358)\",\n        children: [/*#__PURE__*/_jsxDEV(\"line\", {\n          id: \"Line_146\",\n          \"data-name\": \"Line 146\",\n          class: \"cls-1\",\n          x2: \"25\",\n          transform: \"translate(22.624 32.5)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          id: \"Line_148\",\n          \"data-name\": \"Line 148\",\n          class: \"cls-1\",\n          x2: \"12\",\n          transform: \"translate(22.5 32.5) rotate(-30)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        id: \"Group_366\",\n        \"data-name\": \"Group 366\",\n        transform: \"translate(372.5 431) rotate(-180)\",\n        children: [/*#__PURE__*/_jsxDEV(\"line\", {\n          id: \"Line_146-2\",\n          \"data-name\": \"Line 146\",\n          class: \"cls-1\",\n          x2: \"25\",\n          transform: \"translate(22.624 32.5)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          id: \"Line_148-2\",\n          \"data-name\": \"Line 148\",\n          class: \"cls-1\",\n          x2: \"12\",\n          transform: \"translate(22.5 32.5) rotate(-30)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 3\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 13,\n  columnNumber: 1\n}, this);\n\nlet oneWaySVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"25.624\",\n  height: \"7.866\",\n  viewBox: \"0 0 25.624 7.866\",\n  children: /*#__PURE__*/_jsxDEV(\"g\", {\n    id: \"Group_224\",\n    \"data-name\": \"Group 224\",\n    transform: \"translate(-22 -25.634)\",\n    children: [/*#__PURE__*/_jsxDEV(\"line\", {\n      id: \"Line_146\",\n      \"data-name\": \"Line 146\",\n      class: \"cls-1\",\n      x2: \"25\",\n      transform: \"translate(22.624 32.5)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n      id: \"Line_148\",\n      \"data-name\": \"Line 148\",\n      class: \"cls-1\",\n      x2: \"12\",\n      transform: \"translate(22.5 32.5) rotate(-30)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 3\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 29,\n  columnNumber: 1\n}, this);\n/**\r\n * Exported to Main.jsx\r\n */\n\n\nexport function ManageConnections(_ref) {\n  _s();\n\n  let {\n    setCurrent,\n    current,\n    setSocketMessage\n  } = _ref;\n  const navigate = useNavigate(),\n        userID = sessionStorage.getItem('userID'),\n        userName = sessionStorage.getItem('userName'),\n        [connections, setConnections] = React.useState([]),\n        [searchQuery, setSearchQuery] = React.useState(''),\n        [searchResults, setSearchResults] = React.useState([]),\n        // [searchFocus, setSearchFocus] = React.useReducer(state => !state, false),\n  [searchFocus, setSearchFocus] = React.useState(false),\n        [results, toggleResults] = React.useReducer(state => !state, false),\n        [headerText, setHeaderText] = React.useState(\"Connections\");\n\n  const onChange = e => {\n    setSearchQuery(e.target.value);\n  }; //searches for users\n\n\n  const handleSubmit = async event => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      let query = event.target.value;\n      let searchResults = await accessAPI.searchUsers(query);\n      searchResults = searchResults.map(user => {\n        return { ...user,\n          selected: false\n        };\n      });\n      setSearchResults(searchResults);\n      toggleResults();\n    }\n  };\n\n  const requestConnection = async (recipientID, username) => {\n    let notif = {\n      type: 'request',\n      senderID: userID,\n      senderUsername: userName,\n      recipients: [recipientID],\n      message: 'sent',\n      recipientUsername: username\n    };\n    setSocketMessage(notif);\n  };\n\n  const removeConnection = async (userID, username) => {\n    let remove = await accessAPI.removeConnection(userID);\n    updateConnections(); // if(remove == true) {\n    // \tsetSocketMessage({\n    // \t\ttype: 'confirmation',\n    // \t\tmessage: 'removal',\n    // \t\tusername: username,\n    // \t})\n    // }\n  };\n\n  const removeSubscription = async (userID, username, direction) => {\n    // let removeRequest = await accessAPI.removeSubscription(userID, direction).then((data)=> {\n    // })\n    let removeRequest = await accessAPI.removeSubscription(userID, direction);\n    updateConnections(); // if(removeRequest == true) {\n    // \tsetSocketMessage({\n    // \t\ttype: 'confirmation',\n    // \t\tmessage: 'removal',\n    // \t\tusername: username,\n    // \t})\n    // }\n  };\n\n  const updateConnections = async () => {\n    let connections = await accessAPI.getConnections(userID);\n    connections = connections.map(user => {\n      return { ...user,\n        selected: false\n      };\n    });\n    setConnections(connections);\n  };\n\n  let selectConnection = id => {\n    let newList = connections.map(user => {\n      if (user._id == id) {\n        return { ...user,\n          selected: true\n        };\n      } else {\n        return { ...user,\n          selected: false\n        };\n      }\n    });\n    setConnections(newList);\n  };\n\n  let selectResult = id => {\n    let newList = searchResults.map(user => {\n      if (user.id == id) {\n        return { ...user,\n          selected: true\n        };\n      } else {\n        return { ...user,\n          selected: false\n        };\n      }\n    });\n    setSearchResults(newList);\n  };\n\n  let goToProfile = async userid => {\n    let data = await accessAPI.getSingleUser(userid);\n    let delay = setTimeout(() => {\n      navigate(`/user/${data.user.userName}/${data.user._id}`, {\n        state: {\n          user: data.user,\n          pinnedPosts: data.pinnedPosts\n        }\n      });\n    }, 150);\n  }; //update main data on every reload\n\n\n  React.useEffect(() => {\n    updateConnections();\n  }, []); // Changes Section Header\n\n  React.useEffect(() => {\n    if (searchFocus == true) {\n      setHeaderText('Search');\n    } else {\n      setHeaderText('Connections');\n    }\n  }, [searchFocus]); // Enter / Exit Animation\n\n  let modal = React.useRef();\n  React.useEffect(() => {\n    let modalCurrent = modal.current;\n    let delay = setTimeout(() => {\n      modalCurrent.classList.remove('_enter');\n    }, 200);\n  }, []); //Enter and Leave Fade Effect\n  // let [enter, setEnter] = React.useReducer(state => !state, true)\n  // let el = React.useRef();\n  // let element = el.current;\n\n  return (\n    /*#__PURE__*/\n    // <div id=\"manageConnections\" ref={el} className={`${enter == true ? '_enter' : ''}`}>\n    _jsxDEV(\"div\", {\n      id: \"manageConnections\",\n      ref: modal,\n      className: `_enter`,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: headerText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"searchWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"search\",\n          value: searchQuery,\n          onChange: onChange,\n          placeholder: \"Search Users\",\n          onKeyDown: handleSubmit,\n          onFocus: () => {\n            setSearchFocus(true);\n          },\n          onBlur: () => {\n            if (results.length < 1) {\n              setSearchFocus(false);\n              toggleResults();\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `buttonDefault`,\n          onClick: e => {\n            e.preventDefault();\n            setSearchResults([]); //empties results\n\n            setSearchFocus(false);\n            setSearchQuery('');\n\n            if (searchResults < 1) {\n              setSearchFocus(false);\n            }\n          },\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 4\n      }, this), searchFocus && /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"aboutClearButton\",\n        children: \"Press Clear to Exit Search Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 5\n      }, this), searchResults.length < 1 && !searchFocus && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"currentConnections\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: connections.map((user, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            \"data-id\": user._id,\n            className: `${user.selected == true ? 'selected' : ''}`,\n            onClick: e => {\n              e.preventDefault();\n              selectConnection(user._id);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [user.userName, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: user.fullName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"svgWrapper\",\n              className: `${user.isConnection == true ? 'connection' : ''} ${user.isSubscriber == true ? 'subscriber' : ''} ${user.isSubscription == true ? 'subscription' : ''}`,\n              children: [user.isConnection == true ? twoWaySVG : null, user.isSubscription || user.isSubscriber ? oneWaySVG : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"optionsWrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `buttonDefault`,\n                onClick: () => {\n                  goToProfile(user._id);\n                },\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `buttonDefault`,\n                onClick: () => {\n                  if (user.isConnection == true) {\n                    removeConnection(user._id, user.userName);\n                  }\n\n                  if (user.isSubscriber == true) {\n                    removeSubscription(user._id, user.userName, 'from');\n                  }\n\n                  if (user.isSubscription == true) {\n                    removeSubscription(user._id, user.userName, 'to');\n                  }\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 9\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 8\n          }, this)\n          /*use dataset.id to get and use it*/\n          )\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 5\n      }, this), searchResults.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"searchResults\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: searchResults.map((user, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            \"data-id\": user.id,\n            className: `${user.selected == true ? 'selected' : ''}`,\n            onClick: e => {\n              e.preventDefault();\n              selectResult(user.id);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [user.username, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: user.fullname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"optionsWrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `buttonDefault`,\n                onClick: () => {\n                  goToProfile(user.id);\n                },\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `buttonDefault`,\n                onClick: () => {\n                  requestConnection(user.id, user.username);\n                },\n                children: \"Request\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 9\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"exit\",\n        className: \"buttonDefault\",\n        onClick: e => {\n          e.preventDefault();\n          let modalCurrent = modal.current;\n          modalCurrent.classList.add('_enter');\n          let delay = setTimeout(() => {\n            setCurrent({ ...current,\n              modal: false\n            });\n          }, 300);\n        },\n        children: \"Exit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 3\n    }, this)\n  );\n}\n\n_s(ManageConnections, \"VfpbT4m4V8asrDaJFSE48eG2jEE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ManageConnections;\nexport default function SocialLog(_ref2) {\n  _s2();\n\n  let {\n    active,\n    current,\n    setCurrent,\n    log,\n    setLog,\n    sectionClass\n  } = _ref2;\n  // let [log, setLog] = React.useState([]);\n  let userID = sessionStorage.getItem('userID');\n  let isActive = active; // let [updateLog, setUpdateLog] = React.useReducer(state => !state, false);\n\n  let updateLog = async () => {\n    let data = await accessAPI.pullSocialLog();\n    setLog(data);\n  };\n\n  React.useEffect(() => {\n    updateLog();\n    setCurrent({ ...current,\n      social: true\n    });\n  }, []);\n  React.useEffect(() => {\n    updateLog();\n  }, [current.modal]);\n  let noHeading = false;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"Social\",\n    className: `${sectionClass.social}`,\n    children: /*#__PURE__*/_jsxDEV(Log, {\n      data: log,\n      section: \"social\",\n      noHeading: noHeading,\n      current: current,\n      setCurrent: setCurrent,\n      updateLog: updateLog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 386,\n    columnNumber: 3\n  }, this);\n}\n\n_s2(SocialLog, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n\n_c2 = SocialLog;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ManageConnections\");\n$RefreshReg$(_c2, \"SocialLog\");","map":{"version":3,"names":["React","useNavigate","APIaccess","Log","accessAPI","twoWaySVG","oneWaySVG","ManageConnections","setCurrent","current","setSocketMessage","navigate","userID","sessionStorage","getItem","userName","connections","setConnections","useState","searchQuery","setSearchQuery","searchResults","setSearchResults","searchFocus","setSearchFocus","results","toggleResults","useReducer","state","headerText","setHeaderText","onChange","e","target","value","handleSubmit","event","key","preventDefault","query","searchUsers","map","user","selected","requestConnection","recipientID","username","notif","type","senderID","senderUsername","recipients","message","recipientUsername","removeConnection","remove","updateConnections","removeSubscription","direction","removeRequest","getConnections","selectConnection","id","newList","_id","selectResult","goToProfile","userid","data","getSingleUser","delay","setTimeout","pinnedPosts","useEffect","modal","useRef","modalCurrent","classList","length","i","fullName","isConnection","isSubscriber","isSubscription","fullname","add","SocialLog","active","log","setLog","sectionClass","isActive","updateLog","pullSocialLog","social","noHeading"],"sources":["/home/jce/Web Dev Space/Syncsequence/frontEnd/src/components/sections/socialLog.jsx"],"sourcesContent":["/* * * V i t a l s * * */\r\nimport * as React from 'react';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport APIaccess from '../../apiaccess';\r\n\r\nimport Log from '../blog/log';\r\nimport './sections.css';\r\nimport './socialLog.css';\r\n\r\nlet accessAPI = APIaccess();\r\n\r\nlet twoWaySVG = \r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30.124\" height=\"21.732\" viewBox=\"0 0 30.124 21.732\">\r\n  <g id=\"Group_369\" data-name=\"Group 369\" transform=\"translate(-320.376 -352.134)\">\r\n    <g id=\"Group_367\" data-name=\"Group 367\" transform=\"translate(0 -31.5)\">\r\n      <g id=\"Group_224\" data-name=\"Group 224\" transform=\"translate(298.376 358)\">\r\n        <line id=\"Line_146\" data-name=\"Line 146\" class=\"cls-1\" x2=\"25\" transform=\"translate(22.624 32.5)\"/>\r\n        <line id=\"Line_148\" data-name=\"Line 148\" class=\"cls-1\" x2=\"12\" transform=\"translate(22.5 32.5) rotate(-30)\"/>\r\n      </g>\r\n      <g id=\"Group_366\" data-name=\"Group 366\" transform=\"translate(372.5 431) rotate(-180)\">\r\n        <line id=\"Line_146-2\" data-name=\"Line 146\" class=\"cls-1\" x2=\"25\" transform=\"translate(22.624 32.5)\"/>\r\n        <line id=\"Line_148-2\" data-name=\"Line 148\" class=\"cls-1\" x2=\"12\" transform=\"translate(22.5 32.5) rotate(-30)\"/>\r\n      </g>\r\n    </g>\r\n  </g>\r\n</svg>\r\n\r\nlet oneWaySVG = \r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25.624\" height=\"7.866\" viewBox=\"0 0 25.624 7.866\">\r\n  <g id=\"Group_224\" data-name=\"Group 224\" transform=\"translate(-22 -25.634)\">\r\n    <line id=\"Line_146\" data-name=\"Line 146\" class=\"cls-1\" x2=\"25\" transform=\"translate(22.624 32.5)\"/>\r\n    <line id=\"Line_148\" data-name=\"Line 148\" class=\"cls-1\" x2=\"12\" transform=\"translate(22.5 32.5) rotate(-30)\"/>\r\n  </g>\r\n</svg>\r\n\r\n\r\n/**\r\n * Exported to Main.jsx\r\n */\r\nexport function ManageConnections({setCurrent, current, setSocketMessage}) {\r\n\r\n\tconst navigate = useNavigate(),\r\n\t\t  userID = sessionStorage.getItem('userID'),\r\n\t\t  userName = sessionStorage.getItem('userName'),\r\n\t\t  [connections, setConnections] = React.useState([]),\r\n\t\t  [searchQuery, setSearchQuery] = React.useState(''),\t\r\n\t\t  [searchResults, setSearchResults] = React.useState([]),\r\n\t\t  // [searchFocus, setSearchFocus] = React.useReducer(state => !state, false),\r\n\t\t  [searchFocus, setSearchFocus] = React.useState(false),\r\n\t\t  [results, toggleResults] = React.useReducer(state => !state, false),\r\n\t\t  [headerText, setHeaderText] = React.useState(\"Connections\");\r\n\r\n\tconst onChange = (e) => {\r\n\t\tsetSearchQuery(e.target.value)\r\n\t}\r\n\r\n\t//searches for users\r\n\tconst handleSubmit = async(event) => {\r\n\t\t\r\n\t\tif(event.key === 'Enter') {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tlet query = event.target.value;\r\n\t\t\tlet searchResults = await accessAPI.searchUsers(query);\r\n\r\n\t\t\tsearchResults = searchResults.map(user => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...user,\r\n\t\t\t\t\tselected: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsetSearchResults(searchResults);\r\n\t\t\ttoggleResults();\r\n\t\t}\r\n\t}\r\n\r\n\tconst requestConnection = async(recipientID, username) => {\r\n\t\tlet notif = {\r\n\t\t\ttype: 'request',\r\n\t\t\tsenderID: userID,\r\n\t\t\tsenderUsername: userName,\r\n\t\t\trecipients: [recipientID],\r\n\t\t\tmessage: 'sent',\r\n\t\t\trecipientUsername: username\r\n\t\t}\r\n\t\tsetSocketMessage(notif);\r\n\t}\r\n\r\n\tconst removeConnection = async(userID, username) => {\r\n\t\tlet remove = await accessAPI.removeConnection(userID);\r\n\t\t\r\n\t\tupdateConnections();\r\n\r\n\t\t// if(remove == true) {\r\n\t\t// \tsetSocketMessage({\r\n\t\t// \t\ttype: 'confirmation',\r\n\t\t// \t\tmessage: 'removal',\r\n\t\t// \t\tusername: username,\r\n\t\t// \t})\r\n\t\t// }\r\n\t}\r\n\r\n\tconst removeSubscription = async(userID, username, direction) => {\r\n\t\t// let removeRequest = await accessAPI.removeSubscription(userID, direction).then((data)=> {\r\n\r\n\t\t// })\r\n\t\tlet removeRequest = await accessAPI.removeSubscription(userID, direction);\r\n\r\n\t\tupdateConnections();\r\n\r\n\t\t// if(removeRequest == true) {\r\n\t\t// \tsetSocketMessage({\r\n\t\t// \t\ttype: 'confirmation',\r\n\t\t// \t\tmessage: 'removal',\r\n\t\t// \t\tusername: username,\r\n\t\t// \t})\r\n\t\t// }\r\n\t}\r\n\r\n\tconst updateConnections = async()=> {\r\n\t\tlet connections = await accessAPI.getConnections(userID);\r\n\r\n\t\tconnections = connections.map(user => {\r\n\t\t\treturn {\r\n\t\t\t\t...user,\r\n\t\t\t\tselected: false\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tsetConnections(connections);\r\n\t}\r\n\r\n\tlet selectConnection = (id) => {\r\n\r\n\t\tlet newList = connections.map(user => {\r\n\t\t\tif(user._id == id) {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...user,\r\n\t\t\t\t\tselected: true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...user,\r\n\t\t\t\t\tselected: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetConnections(newList)\r\n\t}\r\n\r\n\tlet selectResult = (id) => {\r\n\r\n\t\tlet newList = searchResults.map(user => {\r\n\t\t\tif(user.id == id) {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...user,\r\n\t\t\t\t\tselected: true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...user,\r\n\t\t\t\t\tselected: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetSearchResults(newList)\r\n\t}\r\n\r\n\tlet goToProfile = async(userid) => {\r\n\t\t\r\n\t\tlet data = await accessAPI.getSingleUser(userid);\r\n\r\n\t\tlet delay = setTimeout(()=> {\r\n\t\t\tnavigate(`/user/${data.user.userName}/${data.user._id}`, {\r\n\t\t\t\tstate: {\r\n\t\t\t\t\tuser: data.user,\r\n\t\t\t\t\tpinnedPosts: data.pinnedPosts\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}, 150)\r\n\t}\r\n\r\n\t//update main data on every reload\r\n\tReact.useEffect(()=> {\r\n\t\tupdateConnections();\r\n\t}, [])\r\n\r\n\t// Changes Section Header\r\n\tReact.useEffect(()=> {\r\n\t\tif(searchFocus == true) {\r\n\t\t\tsetHeaderText('Search')\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetHeaderText('Connections')\t\r\n\t\t}\r\n\t}, [searchFocus])\r\n\r\n\r\n\t// Enter / Exit Animation\r\n\tlet modal = React.useRef();\r\n\tReact.useEffect(()=> {\r\n\t\tlet modalCurrent = modal.current;\r\n\t\tlet delay = setTimeout(()=> {\r\n\t\t\tmodalCurrent.classList.remove('_enter');\t\r\n\t\t}, 200)\r\n\t}, [])\r\n\r\n\t//Enter and Leave Fade Effect\r\n\t// let [enter, setEnter] = React.useReducer(state => !state, true)\r\n\t// let el = React.useRef();\r\n\t// let element = el.current;\r\n\t\r\n\treturn (\r\n\t\t// <div id=\"manageConnections\" ref={el} className={`${enter == true ? '_enter' : ''}`}>\r\n\t\t<div id=\"manageConnections\" ref={modal} className={`_enter`}>\r\n\r\n\t\t\t<h2>{headerText}</h2>\r\n\r\n\t\t\t<form id=\"searchWrapper\">\r\n\t\t\t\t<input type=\"text\" \r\n\t\t\t\t   id=\"search\"\r\n\t\t\t\t   value={searchQuery}\r\n\t\t\t\t   onChange={onChange} \r\n\t\t\t\t   placeholder=\"Search Users\" \r\n\t\t\t\t   onKeyDown={handleSubmit}\r\n\t\t\t\t   onFocus={()=> {setSearchFocus(true)}}\r\n\t\t\t\t   onBlur={()=> {\r\n\t\t\t\t   \tif(results.length < 1) {\r\n\t\t\t\t   \t\tsetSearchFocus(false);\r\n\t\t\t\t   \t\ttoggleResults();\r\n\t\t\t\t   \t}\r\n\t\t\t\t   }}\r\n\t\t\t\t/>\r\n\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tsetSearchResults([]); //empties results\r\n\t\t\t\t\t\t\tsetSearchFocus(false);\r\n\t\t\t\t\t\t\tsetSearchQuery('');\r\n\r\n\t\t\t\t\t\t\tif(searchResults < 1) {\r\n\t\t\t\t\t\t\t\tsetSearchFocus(false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\tClear\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t\t{searchFocus &&\r\n\t\t\t\t<p id=\"aboutClearButton\">Press Clear to Exit Search Results</p>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t{/* C O N N E C T I O N S \r\n\t\t\t\t{(!searchFocus && !results) &&\r\n\t\t\t*/}\r\n\t\t\t\t{(searchResults.length < 1 && !searchFocus) &&\r\n\t\t\t\t<div id=\"currentConnections\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{connections.map((user, i) => (\r\n\t\t\t\t\t\t\t<li key={i} \r\n\t\t\t\t\t\t\t\tdata-id={user._id} \r\n\t\t\t\t\t\t\t\tclassName={`${user.selected == true ? 'selected' : ''}`}\r\n\t\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\tselectConnection(user._id)\r\n\t\t\t\t\t\t\t\t}}>\r\n\r\n\t\t\t\t\t\t\t\t<p>{user.userName} <span>{user.fullName}</span></p>\r\n\r\n\t\t\t\t\t\t\t\t<div id=\"svgWrapper\"\r\n\t\t\t\t\t\t\t\t\tclassName={`${user.isConnection == true ? 'connection' : ''} ${user.isSubscriber == true ? 'subscriber' : ''} ${user.isSubscription == true ? 'subscription' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t{user.isConnection == true ? twoWaySVG : null}\r\n\t\t\t\t\t\t\t\t\t{user.isSubscription || user.isSubscriber ? oneWaySVG : null}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<div id=\"optionsWrapper\">\r\n\t\t\t\t\t\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=> {goToProfile(user._id)}}>\r\n\t\t\t\t\t\t\t\t\t\tProfile\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=> {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(user.isConnection == true) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tremoveConnection(user._id, user.userName);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(user.isSubscriber == true) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tremoveSubscription(user._id, user.userName, 'from');\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(user.isSubscription == true) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tremoveSubscription(user._id, user.userName, 'to');\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t/*use dataset.id to get and use it*/\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* S E A R C H   R E S U LTS*/}\r\n\t\t\t{searchResults.length > 1 &&\r\n\t\t\t\t<div id=\"searchResults\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{searchResults.map((user, i) => (\r\n\t\t\t\t\t\t\t<li key={i} \r\n\t\t\t\t\t\t\t\tdata-id={user.id}\r\n\t\t\t\t\t\t\t\tclassName={`${user.selected == true ? 'selected' : ''}`}\r\n\t\t\t\t\t\t\t\tonClick={(e)=> {\r\n\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\tselectResult(user.id)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p>{user.username} <span>{user.fullname}</span></p>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<div id=\"optionsWrapper\">\r\n\t\t\t\t\t\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=> {goToProfile(user.id)}}>\r\n\t\t\t\t\t\t\t\t\t\tProfile\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className={`buttonDefault`}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=> {requestConnection(user.id, user.username)}}>\r\n\t\t\t\t\t\t\t\t\t\tRequest\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\r\n\t\t\t<button id=\"exit\" className={\"buttonDefault\"} onClick={(e)=> {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tlet modalCurrent = modal.current;\r\n\t\t\t\tmodalCurrent.classList.add('_enter');\r\n\r\n\t\t\t\tlet delay = setTimeout(()=> {\r\n\t\t\t\t\tsetCurrent({\r\n\t\t\t\t\t\t...current,\r\n\t\t\t\t\t\tmodal: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 300)\r\n\t\t\t\t\r\n\t\t\t}}>Exit</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default function SocialLog({active, current, setCurrent, log, setLog, sectionClass }) {\r\n\r\n\t// let [log, setLog] = React.useState([]);\r\n\tlet userID = sessionStorage.getItem('userID');\r\n\tlet isActive = active;\r\n\t// let [updateLog, setUpdateLog] = React.useReducer(state => !state, false);\r\n\r\n\tlet updateLog = async() => {\r\n\t\tlet data = await accessAPI.pullSocialLog();\r\n\t\tsetLog(data);\r\n\t} \r\n\r\n\tReact.useEffect(()=> {\r\n\t\tupdateLog();\r\n\t\tsetCurrent({\r\n\t\t\t...current,\r\n\t\t\tsocial: true\r\n\t\t})\r\n\t}, [])\r\n\r\n\tReact.useEffect(()=> {\r\n\t\tupdateLog();\r\n\t}, [current.modal])\r\n\r\n\tlet noHeading = false;\r\n\r\n\treturn (\r\n\t\t<div id=\"Social\" className={`${sectionClass.social}`}>\r\n\r\n\t\t\t<Log data={log}\r\n\t\t\t\t section={\"social\"} \r\n\t\t\t\t noHeading={noHeading} \r\n\t\t\t\t current={current} \r\n\t\t\t\t setCurrent={setCurrent}\r\n\t\t\t\t updateLog={updateLog}/>\r\n\t\t\t\r\n\t\t</div>\r\n\t)\r\n}"],"mappings":";;;;AAAA;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AAEA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAO,gBAAP;AACA,OAAO,iBAAP;;AAEA,IAAIC,SAAS,GAAGF,SAAS,EAAzB;;AAEA,IAAIG,SAAS,gBACb;EAAK,KAAK,EAAC,4BAAX;EAAwC,KAAK,EAAC,QAA9C;EAAuD,MAAM,EAAC,QAA9D;EAAuE,OAAO,EAAC,mBAA/E;EAAA,uBACE;IAAG,EAAE,EAAC,WAAN;IAAkB,aAAU,WAA5B;IAAwC,SAAS,EAAC,8BAAlD;IAAA,uBACE;MAAG,EAAE,EAAC,WAAN;MAAkB,aAAU,WAA5B;MAAwC,SAAS,EAAC,oBAAlD;MAAA,wBACE;QAAG,EAAE,EAAC,WAAN;QAAkB,aAAU,WAA5B;QAAwC,SAAS,EAAC,wBAAlD;QAAA,wBACE;UAAM,EAAE,EAAC,UAAT;UAAoB,aAAU,UAA9B;UAAyC,KAAK,EAAC,OAA/C;UAAuD,EAAE,EAAC,IAA1D;UAA+D,SAAS,EAAC;QAAzE;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAM,EAAE,EAAC,UAAT;UAAoB,aAAU,UAA9B;UAAyC,KAAK,EAAC,OAA/C;UAAuD,EAAE,EAAC,IAA1D;UAA+D,SAAS,EAAC;QAAzE;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAKE;QAAG,EAAE,EAAC,WAAN;QAAkB,aAAU,WAA5B;QAAwC,SAAS,EAAC,mCAAlD;QAAA,wBACE;UAAM,EAAE,EAAC,YAAT;UAAsB,aAAU,UAAhC;UAA2C,KAAK,EAAC,OAAjD;UAAyD,EAAE,EAAC,IAA5D;UAAiE,SAAS,EAAC;QAA3E;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAM,EAAE,EAAC,YAAT;UAAsB,aAAU,UAAhC;UAA2C,KAAK,EAAC,OAAjD;UAAyD,EAAE,EAAC,IAA5D;UAAiE,SAAS,EAAC;QAA3E;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QALF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA;AADF;EAAA;EAAA;EAAA;AAAA,QADA;;AAgBA,IAAIC,SAAS,gBACb;EAAK,KAAK,EAAC,4BAAX;EAAwC,KAAK,EAAC,QAA9C;EAAuD,MAAM,EAAC,OAA9D;EAAsE,OAAO,EAAC,kBAA9E;EAAA,uBACE;IAAG,EAAE,EAAC,WAAN;IAAkB,aAAU,WAA5B;IAAwC,SAAS,EAAC,wBAAlD;IAAA,wBACE;MAAM,EAAE,EAAC,UAAT;MAAoB,aAAU,UAA9B;MAAyC,KAAK,EAAC,OAA/C;MAAuD,EAAE,EAAC,IAA1D;MAA+D,SAAS,EAAC;IAAzE;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAM,EAAE,EAAC,UAAT;MAAoB,aAAU,UAA9B;MAAyC,KAAK,EAAC,OAA/C;MAAuD,EAAE,EAAC,IAA1D;MAA+D,SAAS,EAAC;IAAzE;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA;AADF;EAAA;EAAA;EAAA;AAAA,QADA;AASA;AACA;AACA;;;AACA,OAAO,SAASC,iBAAT,OAAoE;EAAA;;EAAA,IAAzC;IAACC,UAAD;IAAaC,OAAb;IAAsBC;EAAtB,CAAyC;EAE1E,MAAMC,QAAQ,GAAGV,WAAW,EAA5B;EAAA,MACGW,MAAM,GAAGC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CADZ;EAAA,MAEGC,QAAQ,GAAGF,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAFd;EAAA,MAGG,CAACE,WAAD,EAAcC,cAAd,IAAgCjB,KAAK,CAACkB,QAAN,CAAe,EAAf,CAHnC;EAAA,MAIG,CAACC,WAAD,EAAcC,cAAd,IAAgCpB,KAAK,CAACkB,QAAN,CAAe,EAAf,CAJnC;EAAA,MAKG,CAACG,aAAD,EAAgBC,gBAAhB,IAAoCtB,KAAK,CAACkB,QAAN,CAAe,EAAf,CALvC;EAAA,MAMG;EACA,CAACK,WAAD,EAAcC,cAAd,IAAgCxB,KAAK,CAACkB,QAAN,CAAe,KAAf,CAPnC;EAAA,MAQG,CAACO,OAAD,EAAUC,aAAV,IAA2B1B,KAAK,CAAC2B,UAAN,CAAiBC,KAAK,IAAI,CAACA,KAA3B,EAAkC,KAAlC,CAR9B;EAAA,MASG,CAACC,UAAD,EAAaC,aAAb,IAA8B9B,KAAK,CAACkB,QAAN,CAAe,aAAf,CATjC;;EAWA,MAAMa,QAAQ,GAAIC,CAAD,IAAO;IACvBZ,cAAc,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd;EACA,CAFD,CAb0E,CAiB1E;;;EACA,MAAMC,YAAY,GAAG,MAAMC,KAAN,IAAgB;IAEpC,IAAGA,KAAK,CAACC,GAAN,KAAc,OAAjB,EAA0B;MACzBD,KAAK,CAACE,cAAN;MACA,IAAIC,KAAK,GAAGH,KAAK,CAACH,MAAN,CAAaC,KAAzB;MACA,IAAIb,aAAa,GAAG,MAAMjB,SAAS,CAACoC,WAAV,CAAsBD,KAAtB,CAA1B;MAEAlB,aAAa,GAAGA,aAAa,CAACoB,GAAd,CAAkBC,IAAI,IAAI;QACzC,OAAO,EACN,GAAGA,IADG;UAENC,QAAQ,EAAE;QAFJ,CAAP;MAIA,CALe,CAAhB;MAOArB,gBAAgB,CAACD,aAAD,CAAhB;MACAK,aAAa;IACb;EACD,CAjBD;;EAmBA,MAAMkB,iBAAiB,GAAG,OAAMC,WAAN,EAAmBC,QAAnB,KAAgC;IACzD,IAAIC,KAAK,GAAG;MACXC,IAAI,EAAE,SADK;MAEXC,QAAQ,EAAErC,MAFC;MAGXsC,cAAc,EAAEnC,QAHL;MAIXoC,UAAU,EAAE,CAACN,WAAD,CAJD;MAKXO,OAAO,EAAE,MALE;MAMXC,iBAAiB,EAAEP;IANR,CAAZ;IAQApC,gBAAgB,CAACqC,KAAD,CAAhB;EACA,CAVD;;EAYA,MAAMO,gBAAgB,GAAG,OAAM1C,MAAN,EAAckC,QAAd,KAA2B;IACnD,IAAIS,MAAM,GAAG,MAAMnD,SAAS,CAACkD,gBAAV,CAA2B1C,MAA3B,CAAnB;IAEA4C,iBAAiB,GAHkC,CAKnD;IACA;IACA;IACA;IACA;IACA;IACA;EACA,CAZD;;EAcA,MAAMC,kBAAkB,GAAG,OAAM7C,MAAN,EAAckC,QAAd,EAAwBY,SAAxB,KAAsC;IAChE;IAEA;IACA,IAAIC,aAAa,GAAG,MAAMvD,SAAS,CAACqD,kBAAV,CAA6B7C,MAA7B,EAAqC8C,SAArC,CAA1B;IAEAF,iBAAiB,GAN+C,CAQhE;IACA;IACA;IACA;IACA;IACA;IACA;EACA,CAfD;;EAiBA,MAAMA,iBAAiB,GAAG,YAAU;IACnC,IAAIxC,WAAW,GAAG,MAAMZ,SAAS,CAACwD,cAAV,CAAyBhD,MAAzB,CAAxB;IAEAI,WAAW,GAAGA,WAAW,CAACyB,GAAZ,CAAgBC,IAAI,IAAI;MACrC,OAAO,EACN,GAAGA,IADG;QAENC,QAAQ,EAAE;MAFJ,CAAP;IAIA,CALa,CAAd;IAOA1B,cAAc,CAACD,WAAD,CAAd;EACA,CAXD;;EAaA,IAAI6C,gBAAgB,GAAIC,EAAD,IAAQ;IAE9B,IAAIC,OAAO,GAAG/C,WAAW,CAACyB,GAAZ,CAAgBC,IAAI,IAAI;MACrC,IAAGA,IAAI,CAACsB,GAAL,IAAYF,EAAf,EAAmB;QAElB,OAAO,EACN,GAAGpB,IADG;UAENC,QAAQ,EAAE;QAFJ,CAAP;MAIA,CAND,MAOK;QAEJ,OAAO,EACN,GAAGD,IADG;UAENC,QAAQ,EAAE;QAFJ,CAAP;MAIA;IACD,CAfa,CAAd;IAgBA1B,cAAc,CAAC8C,OAAD,CAAd;EACA,CAnBD;;EAqBA,IAAIE,YAAY,GAAIH,EAAD,IAAQ;IAE1B,IAAIC,OAAO,GAAG1C,aAAa,CAACoB,GAAd,CAAkBC,IAAI,IAAI;MACvC,IAAGA,IAAI,CAACoB,EAAL,IAAWA,EAAd,EAAkB;QAEjB,OAAO,EACN,GAAGpB,IADG;UAENC,QAAQ,EAAE;QAFJ,CAAP;MAIA,CAND,MAOK;QAEJ,OAAO,EACN,GAAGD,IADG;UAENC,QAAQ,EAAE;QAFJ,CAAP;MAIA;IACD,CAfa,CAAd;IAgBArB,gBAAgB,CAACyC,OAAD,CAAhB;EACA,CAnBD;;EAqBA,IAAIG,WAAW,GAAG,MAAMC,MAAN,IAAiB;IAElC,IAAIC,IAAI,GAAG,MAAMhE,SAAS,CAACiE,aAAV,CAAwBF,MAAxB,CAAjB;IAEA,IAAIG,KAAK,GAAGC,UAAU,CAAC,MAAK;MAC3B5D,QAAQ,CAAE,SAAQyD,IAAI,CAAC1B,IAAL,CAAU3B,QAAS,IAAGqD,IAAI,CAAC1B,IAAL,CAAUsB,GAAI,EAA9C,EAAiD;QACxDpC,KAAK,EAAE;UACNc,IAAI,EAAE0B,IAAI,CAAC1B,IADL;UAEN8B,WAAW,EAAEJ,IAAI,CAACI;QAFZ;MADiD,CAAjD,CAAR;IAMA,CAPqB,EAOnB,GAPmB,CAAtB;EAQA,CAZD,CAvI0E,CAqJ1E;;;EACAxE,KAAK,CAACyE,SAAN,CAAgB,MAAK;IACpBjB,iBAAiB;EACjB,CAFD,EAEG,EAFH,EAtJ0E,CA0J1E;;EACAxD,KAAK,CAACyE,SAAN,CAAgB,MAAK;IACpB,IAAGlD,WAAW,IAAI,IAAlB,EAAwB;MACvBO,aAAa,CAAC,QAAD,CAAb;IACA,CAFD,MAGK;MACJA,aAAa,CAAC,aAAD,CAAb;IACA;EACD,CAPD,EAOG,CAACP,WAAD,CAPH,EA3J0E,CAqK1E;;EACA,IAAImD,KAAK,GAAG1E,KAAK,CAAC2E,MAAN,EAAZ;EACA3E,KAAK,CAACyE,SAAN,CAAgB,MAAK;IACpB,IAAIG,YAAY,GAAGF,KAAK,CAACjE,OAAzB;IACA,IAAI6D,KAAK,GAAGC,UAAU,CAAC,MAAK;MAC3BK,YAAY,CAACC,SAAb,CAAuBtB,MAAvB,CAA8B,QAA9B;IACA,CAFqB,EAEnB,GAFmB,CAAtB;EAGA,CALD,EAKG,EALH,EAvK0E,CA8K1E;EACA;EACA;EACA;;EAEA;IAAA;IACC;IACA;MAAK,EAAE,EAAC,mBAAR;MAA4B,GAAG,EAAEmB,KAAjC;MAAwC,SAAS,EAAG,QAApD;MAAA,wBAEC;QAAA,UAAK7C;MAAL;QAAA;QAAA;QAAA;MAAA,QAFD,eAIC;QAAM,EAAE,EAAC,eAAT;QAAA,wBACC;UAAO,IAAI,EAAC,MAAZ;UACG,EAAE,EAAC,QADN;UAEG,KAAK,EAAEV,WAFV;UAGG,QAAQ,EAAEY,QAHb;UAIG,WAAW,EAAC,cAJf;UAKG,SAAS,EAAEI,YALd;UAMG,OAAO,EAAE,MAAK;YAACX,cAAc,CAAC,IAAD,CAAd;UAAqB,CANvC;UAOG,MAAM,EAAE,MAAK;YACZ,IAAGC,OAAO,CAACqD,MAAR,GAAiB,CAApB,EAAuB;cACtBtD,cAAc,CAAC,KAAD,CAAd;cACAE,aAAa;YACb;UACD;QAZJ;UAAA;UAAA;UAAA;QAAA,QADD,eAeC;UAAQ,SAAS,EAAG,eAApB;UACE,OAAO,EAAGM,CAAD,IAAM;YACdA,CAAC,CAACM,cAAF;YACAhB,gBAAgB,CAAC,EAAD,CAAhB,CAFc,CAEQ;;YACtBE,cAAc,CAAC,KAAD,CAAd;YACAJ,cAAc,CAAC,EAAD,CAAd;;YAEA,IAAGC,aAAa,GAAG,CAAnB,EAAsB;cACrBG,cAAc,CAAC,KAAD,CAAd;YACA;UACD,CAVH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAfD;MAAA;QAAA;QAAA;QAAA;MAAA,QAJD,EAiCED,WAAW,iBACX;QAAG,EAAE,EAAC,kBAAN;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAlCF,EAwCIF,aAAa,CAACyD,MAAd,GAAuB,CAAvB,IAA4B,CAACvD,WAA9B,iBACD;QAAK,EAAE,EAAC,oBAAR;QAAA,uBACC;UAAA,UACEP,WAAW,CAACyB,GAAZ,CAAgB,CAACC,IAAD,EAAOqC,CAAP,kBAChB;YACC,WAASrC,IAAI,CAACsB,GADf;YAEC,SAAS,EAAG,GAAEtB,IAAI,CAACC,QAAL,IAAiB,IAAjB,GAAwB,UAAxB,GAAqC,EAAG,EAFvD;YAGC,OAAO,EAAGX,CAAD,IAAM;cACdA,CAAC,CAACM,cAAF;cACAuB,gBAAgB,CAACnB,IAAI,CAACsB,GAAN,CAAhB;YACA,CANF;YAAA,wBAQC;cAAA,WAAItB,IAAI,CAAC3B,QAAT,oBAAmB;gBAAA,UAAO2B,IAAI,CAACsC;cAAZ;gBAAA;gBAAA;gBAAA;cAAA,QAAnB;YAAA;cAAA;cAAA;cAAA;YAAA,QARD,eAUC;cAAK,EAAE,EAAC,YAAR;cACC,SAAS,EAAG,GAAEtC,IAAI,CAACuC,YAAL,IAAqB,IAArB,GAA4B,YAA5B,GAA2C,EAAG,IAAGvC,IAAI,CAACwC,YAAL,IAAqB,IAArB,GAA4B,YAA5B,GAA2C,EAAG,IAAGxC,IAAI,CAACyC,cAAL,IAAuB,IAAvB,GAA8B,cAA9B,GAA+C,EAAG,EADnK;cAAA,WAEEzC,IAAI,CAACuC,YAAL,IAAqB,IAArB,GAA4B5E,SAA5B,GAAwC,IAF1C,EAGEqC,IAAI,CAACyC,cAAL,IAAuBzC,IAAI,CAACwC,YAA5B,GAA2C5E,SAA3C,GAAuD,IAHzD;YAAA;cAAA;cAAA;cAAA;YAAA,QAVD,eAgBC;cAAK,EAAE,EAAC,gBAAR;cAAA,wBACC;gBAAQ,SAAS,EAAG,eAApB;gBACE,OAAO,EAAE,MAAK;kBAAC4D,WAAW,CAACxB,IAAI,CAACsB,GAAN,CAAX;gBAAsB,CADvC;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QADD,eAKC;gBAAQ,SAAS,EAAG,eAApB;gBACE,OAAO,EAAE,MAAK;kBAEb,IAAGtB,IAAI,CAACuC,YAAL,IAAqB,IAAxB,EAA8B;oBAC7B3B,gBAAgB,CAACZ,IAAI,CAACsB,GAAN,EAAWtB,IAAI,CAAC3B,QAAhB,CAAhB;kBACA;;kBACD,IAAG2B,IAAI,CAACwC,YAAL,IAAqB,IAAxB,EAA8B;oBAC7BzB,kBAAkB,CAACf,IAAI,CAACsB,GAAN,EAAWtB,IAAI,CAAC3B,QAAhB,EAA0B,MAA1B,CAAlB;kBACA;;kBACD,IAAG2B,IAAI,CAACyC,cAAL,IAAuB,IAA1B,EAAgC;oBAC/B1B,kBAAkB,CAACf,IAAI,CAACsB,GAAN,EAAWtB,IAAI,CAAC3B,QAAhB,EAA0B,IAA1B,CAAlB;kBACA;gBAED,CAbH;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QALD;YAAA;cAAA;cAAA;cAAA;YAAA,QAhBD;UAAA,GAASgE,CAAT;YAAA;YAAA;YAAA;UAAA;UAuCA;UAxCA;QADF;UAAA;UAAA;UAAA;QAAA;MADD;QAAA;QAAA;QAAA;MAAA,QAzCF,EA0FE1D,aAAa,CAACyD,MAAd,GAAuB,CAAvB,iBACA;QAAK,EAAE,EAAC,eAAR;QAAA,uBACC;UAAA,UACEzD,aAAa,CAACoB,GAAd,CAAkB,CAACC,IAAD,EAAOqC,CAAP,kBAClB;YACC,WAASrC,IAAI,CAACoB,EADf;YAEC,SAAS,EAAG,GAAEpB,IAAI,CAACC,QAAL,IAAiB,IAAjB,GAAwB,UAAxB,GAAqC,EAAG,EAFvD;YAGC,OAAO,EAAGX,CAAD,IAAM;cACdA,CAAC,CAACM,cAAF;cACA2B,YAAY,CAACvB,IAAI,CAACoB,EAAN,CAAZ;YACA,CANF;YAAA,wBAOC;cAAA,WAAIpB,IAAI,CAACI,QAAT,oBAAmB;gBAAA,UAAOJ,IAAI,CAAC0C;cAAZ;gBAAA;gBAAA;gBAAA;cAAA,QAAnB;YAAA;cAAA;cAAA;cAAA;YAAA,QAPD,eASC;cAAK,EAAE,EAAC,gBAAR;cAAA,wBACC;gBAAQ,SAAS,EAAG,eAApB;gBACE,OAAO,EAAE,MAAK;kBAAClB,WAAW,CAACxB,IAAI,CAACoB,EAAN,CAAX;gBAAqB,CADtC;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QADD,eAKC;gBAAQ,SAAS,EAAG,eAApB;gBACE,OAAO,EAAE,MAAK;kBAAClB,iBAAiB,CAACF,IAAI,CAACoB,EAAN,EAAUpB,IAAI,CAACI,QAAf,CAAjB;gBAA0C,CAD3D;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QALD;YAAA;cAAA;cAAA;cAAA;YAAA,QATD;UAAA,GAASiC,CAAT;YAAA;YAAA;YAAA;UAAA,QADA;QADF;UAAA;UAAA;UAAA;QAAA;MADD;QAAA;QAAA;QAAA;MAAA,QA3FF,eAwHC;QAAQ,EAAE,EAAC,MAAX;QAAkB,SAAS,EAAE,eAA7B;QAA8C,OAAO,EAAG/C,CAAD,IAAM;UAC5DA,CAAC,CAACM,cAAF;UAEA,IAAIsC,YAAY,GAAGF,KAAK,CAACjE,OAAzB;UACAmE,YAAY,CAACC,SAAb,CAAuBQ,GAAvB,CAA2B,QAA3B;UAEA,IAAIf,KAAK,GAAGC,UAAU,CAAC,MAAK;YAC3B/D,UAAU,CAAC,EACV,GAAGC,OADO;cAEViE,KAAK,EAAE;YAFG,CAAD,CAAV;UAIA,CALqB,EAKnB,GALmB,CAAtB;QAOA,CAbD;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAxHD;IAAA;MAAA;MAAA;MAAA;IAAA;EAFD;AA0IA;;GA7TenE,iB;UAEEN,W;;;KAFFM,iB;AA+ThB,eAAe,SAAS+E,SAAT,QAA8E;EAAA;;EAAA,IAA3D;IAACC,MAAD;IAAS9E,OAAT;IAAkBD,UAAlB;IAA8BgF,GAA9B;IAAmCC,MAAnC;IAA2CC;EAA3C,CAA2D;EAE5F;EACA,IAAI9E,MAAM,GAAGC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAAb;EACA,IAAI6E,QAAQ,GAAGJ,MAAf,CAJ4F,CAK5F;;EAEA,IAAIK,SAAS,GAAG,YAAW;IAC1B,IAAIxB,IAAI,GAAG,MAAMhE,SAAS,CAACyF,aAAV,EAAjB;IACAJ,MAAM,CAACrB,IAAD,CAAN;EACA,CAHD;;EAKApE,KAAK,CAACyE,SAAN,CAAgB,MAAK;IACpBmB,SAAS;IACTpF,UAAU,CAAC,EACV,GAAGC,OADO;MAEVqF,MAAM,EAAE;IAFE,CAAD,CAAV;EAIA,CAND,EAMG,EANH;EAQA9F,KAAK,CAACyE,SAAN,CAAgB,MAAK;IACpBmB,SAAS;EACT,CAFD,EAEG,CAACnF,OAAO,CAACiE,KAAT,CAFH;EAIA,IAAIqB,SAAS,GAAG,KAAhB;EAEA,oBACC;IAAK,EAAE,EAAC,QAAR;IAAiB,SAAS,EAAG,GAAEL,YAAY,CAACI,MAAO,EAAnD;IAAA,uBAEC,QAAC,GAAD;MAAK,IAAI,EAAEN,GAAX;MACE,OAAO,EAAE,QADX;MAEE,SAAS,EAAEO,SAFb;MAGE,OAAO,EAAEtF,OAHX;MAIE,UAAU,EAAED,UAJd;MAKE,SAAS,EAAEoF;IALb;MAAA;MAAA;MAAA;IAAA;EAFD;IAAA;IAAA;IAAA;EAAA,QADD;AAYA;;IAtCuBN,S;;MAAAA,S"},"metadata":{},"sourceType":"module"}