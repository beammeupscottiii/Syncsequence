{"ast":null,"code":"var _jsxFileName = \"/home/jce/Web Dev Space/Syncsequence/frontEnd/src/components/notifs/notifsList.jsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport APIaccess from '../../apiaccess';\nimport useUIC from '../../UIcontext';\nimport '../../components/base/home.css';\nimport './notifs.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet accessAPI = APIaccess();\nexport default function NotificationList(_ref) {\n  _s();\n\n  let {\n    setNotifList,\n    unreadCount,\n    setUnreadCount,\n    setSocketMessage,\n    socketMessage,\n    accessID,\n    setAccessID\n  } = _ref;\n  let [notifs, setNotifs] = React.useState([]);\n  let username = sessionStorage.getItem('userName');\n  let userID = sessionStorage.getItem('userID');\n  let navigate = useNavigate();\n  const {\n    logout\n  } = useUIC();\n  console.log(username);\n\n  let updateList = async () => {\n    let data = await accessAPI.getInteractions();\n    let count = 0;\n\n    for (let i = 0; i < data.length; i++) {\n      if (data[i].isRead == false) {\n        count++;\n      }\n    }\n\n    if (count < 10) {\n      count = '0' + count;\n    } else if (count > 99) {\n      count = '99';\n    }\n\n    setUnreadCount(count);\n    setNotifs(data);\n  };\n\n  let interact = async (arg, ID, username, postID, notif) => {\n    /* \n    \tset middle two arguments as 'undefined' when using\n    \tfunction for posts / comments\n    */\n    if (arg == 'accept') {\n      let sm = {\n        type: 'request',\n        recipients: [userID],\n        senderID: ID,\n        senderUsername: username,\n        message: 'connectionAcceptedSent',\n        originalNotif: notif._id\n      };\n      setSocketMessage(sm);\n    } else if (arg == 'markRead') {\n      let sm = {\n        type: 'markRead',\n        notifID: ID,\n        userID: userID,\n        senderUsername: username\n      };\n      let request = await accessAPI.newInteraction(sm);\n      let delay = setTimeout(() => {\n        updateList();\n      }, 200);\n    } else if (arg == 'accessGranted') {\n      let accessGrantedNotif = await accessAPI.newInteraction({\n        type: 'request',\n        message: 'accessGranted',\n        senderID: userID,\n        recipients: [notif.sender],\n        recipientUsernames: notif.senderUsername,\n        groupName: notif.details.groupName,\n        groupID: notif.details.groupID,\n        originalID: notif._id\n      }).then(data => {\n        if (data.confirmation) {\n          updateList();\n          setSocketMessage({\n            // message: `Access granted to @${macroInfo.ownerUsername}`,\n            recipients: [notif.sender],\n            action: 'updateNotifs'\n          });\n        }\n      }); // let request = await accessAPI.manageGroup('addUser', {\n      // \tuserID: notif.sender,\n      // \tgroupID: notif.details.groupID\n      // })\n    } else if (arg == 'subscriptionAccepted') {\n      let body = {\n        type: 'request',\n        senderID: userID,\n        senderUsername: username,\n        recipients: [notif.sender],\n        recipientUsername: notif.senderUsername,\n        message: 'subscriptionAccepted'\n      };\n      let sm = {\n        type: 'markRead',\n        notifID: notif._id,\n        userID: userID // senderUsername: username\n\n      };\n      let request = await accessAPI.newInteraction(sm);\n      setSocketMessage(body);\n      console.log(body);\n      let delay = setTimeout(() => {\n        updateList();\n      }, 200);\n    }\n  };\n\n  let goToUserProfile = async () => {\n    let data = await accessAPI.getSingleUser(userID);\n    let delay = setTimeout(() => {\n      navigate(`/user/${username}/${userID}`);\n    }, 150);\n  };\n\n  let goToUserSettings = async () => {\n    let settings = await accessAPI.userSettings({\n      option: 'getUserSettings'\n    });\n    let delay = setTimeout(() => {\n      navigate(`/${username}/settings`, {\n        state: {\n          data: settings\n        }\n      });\n    }, 150);\n  };\n\n  let goToPost = async (postID, commentID) => {\n    let post = await accessAPI.getBlogPost(postID);\n    setTimeout(() => {\n      navigate(`/post/${postID}`, {\n        state: {\n          commentID: commentID\n        }\n      });\n    }, 300);\n  };\n\n  let goToMacrosPage = async (macroID, macroName) => {\n    let tagInfo = await accessAPI.getTagData(macroID, macroName);\n    let posts = await accessAPI.groupPosts({\n      action: 'getPosts',\n      groupID: macroID,\n      groupName: macroName\n    });\n    let postsCount = posts.length;\n    let doesHaveAccess;\n\n    if (tagInfo.hasAccess) {\n      doesHaveAccess = tagInfo.hasAccess.filter(el => el == userID);\n      doesHaveAccess = doesHaveAccess.length > 0 ? true : false;\n    }\n\n    console.log(tagInfo);\n    setTimeout(() => {\n      navigate(`/macros/${macroName}`, {\n        state: {\n          name: macroName,\n          posts: posts,\n          macroID: macroID,\n          isPrivate: tagInfo.isPrivate,\n          hasAccess: doesHaveAccess,\n          ownerUsername: tagInfo.adminUsernames ? tagInfo.adminUsernames[0] : null,\n          ownerID: tagInfo.admins ? tagInfo.admins[0] : null,\n          type: tagInfo.type == undefined ? 'topic' : tagInfo.type,\n          userCount: tagInfo.hasAccess ? tagInfo.hasAccess.length : null,\n          postCount: postsCount ? postsCount : 0\n        }\n      });\n    }, 200);\n  };\n\n  React.useEffect(() => {\n    updateList();\n  }, []);\n  React.useEffect(() => {\n    updateList();\n  }, [socketMessage]);\n\n  let returnNotifType = notif => {\n    let postTitle;\n\n    if (!notif.details) {\n      postTitle = undefined;\n    } else postTitle = notif.details.postTitle; // save notif._id as key\n\n\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"notif\",\n      children: [notif.isRead == false && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"unread\",\n        children: \"!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"body\",\n        children: [notif.type == 'request' && notif.message == 'connectionRequestSent' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You sent \", notif.recipientUsernames[0], \" a request !\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionRequestRecieved' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You recieved a connection request from \", notif.senderUsername]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionAcceptedSent' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You and \", notif.senderUsername, \" are now connected!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionAcceptedRecieved' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You and \", notif.recipientUsernames[0], \" are now connected!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 7\n        }, this), notif.type == 'comment' && notif.message == 'initial' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.senderUsername, \" left a comment on your post \\\"\", postTitle, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 7\n        }, this), notif.type == 'comment' && notif.message == 'response' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.senderUsername, \" responded to your comment on \\\"\", postTitle, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 7\n        }, this), notif.type == 'tagging' && notif.message == 'recieved' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.senderUsername, \" tagged you in a post \\\"\", postTitle, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'accessRequested' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.senderUsername, \" is requesting access to \\\"\", notif.details.groupName, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'subscriptionRequest' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You requested subscription to @\", notif.recipientUsernames[0]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'subscriptionRequested' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.senderUsername, \" wishes to subscribe\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'subscriptionAccepted' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.recipientUsernames[0], \" is now a subscriber!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 7\n        }, this), notif.type == 'confirmation' && notif.message == 'subscribed' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You are now subscribed to @\", notif.senderUsername]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'accessGranted' && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [notif.senderUsername, \" has granted you access to \\\"\", notif.details.groupName, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 7\n        }, this), notif.type == 'comment' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: e => {\n              e.preventDefault();\n              goToPost(notif.url, notif.details.commentID);\n            },\n            children: \"See Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id, username);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 7\n        }, this), notif.type == 'tagging' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              goToPost(notif.url);\n\n              if (notif.isRead == false) {\n                interact('markRead', notif._id, username);\n              }\n            },\n            children: \"See Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionRequestRecieved' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('accept', notif.sender, notif.senderUsername, undefined, notif);\n              interact('markRead', notif._id);\n            },\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Ignore\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionRequestSent' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionAcceptedSent' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'connectionAcceptedRecieved' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'accept' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'accessGranted' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              goToMacrosPage(notif.details.groupID, notif.details.groupName);\n            },\n            children: \"Go To Macro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'accessRequested' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              console.log(notif);\n              interact('accessGranted', undefined, undefined, undefined, notif);\n            },\n            children: \"Give Access\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              console.log(notif);\n              interact('markRead', notif._id);\n            },\n            children: \"Ignore\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 7\n        }, this), notif.type == 'request' && notif.message == 'subscriptionRequested' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              console.log(notif);\n              interact('subscriptionAccepted', notif.recipients[0], undefined, undefined, notif);\n            },\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              console.log(notif);\n              interact('markRead', notif._id);\n            },\n            children: \"Ignore\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 7\n        }, this), (notif.message == 'subscribed' || notif.message == 'subscriptionAccepted') && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonDefault\",\n            onClick: () => {\n              console.log(notif);\n              interact('markRead', notif._id);\n            },\n            children: \"Mark Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 5\n      }, this)]\n    }, notif._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 10\n    }, this);\n  };\n\n  let modal = React.useRef();\n  React.useEffect(() => {\n    let modalCurrent = modal.current;\n    let delay = setTimeout(() => {\n      modalCurrent.classList.remove('_enter');\n    }, 200);\n  }, []);\n  return (\n    /*#__PURE__*/\n    // <div id=\"interactionsList\" ref={el} className={`${enter == true ? '_enter' : ''}`}>\n    _jsxDEV(\"div\", {\n      id: \"interactionsList\",\n      ref: modal,\n      className: `_enter`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Interactions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.preventDefault();\n            let modalCurrent = modal.current;\n            modalCurrent.classList.add('_enter');\n            let delay = setTimeout(() => {\n              setNotifList();\n            }, 300);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: unreadCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u2A09\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        id: \"notifList\",\n        children: notifs.map(notif => returnNotifType(notif))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"buttonBar\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttonDefault\",\n          onClick: goToUserProfile,\n          children: \"PROFILE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttonDefault\",\n          onClick: goToUserSettings,\n          children: \"SETTINGS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 3\n    }, this)\n  );\n}\n/***\n * Format for socketMessage object\n * \n * type: confirmation, request, comment, tagging\n * sender:\n * recipients:\n * message: \n * \n * \n * if comment: see comment & mark read\n * if tag: see post & mark read\n * if request: accept & ignore (both mark read)\n */\n\n_s(NotificationList, \"NvmIBlHZbFONkthFdIFhuVOgG+8=\", false, function () {\n  return [useNavigate, useUIC];\n});\n\n_c = NotificationList;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotificationList\");","map":{"version":3,"names":["React","useNavigate","Link","APIaccess","useUIC","accessAPI","NotificationList","setNotifList","unreadCount","setUnreadCount","setSocketMessage","socketMessage","accessID","setAccessID","notifs","setNotifs","useState","username","sessionStorage","getItem","userID","navigate","logout","console","log","updateList","data","getInteractions","count","i","length","isRead","interact","arg","ID","postID","notif","sm","type","recipients","senderID","senderUsername","message","originalNotif","_id","notifID","request","newInteraction","delay","setTimeout","accessGrantedNotif","sender","recipientUsernames","groupName","details","groupID","originalID","then","confirmation","action","body","recipientUsername","goToUserProfile","getSingleUser","goToUserSettings","settings","userSettings","option","state","goToPost","commentID","post","getBlogPost","goToMacrosPage","macroID","macroName","tagInfo","getTagData","posts","groupPosts","postsCount","doesHaveAccess","hasAccess","filter","el","name","isPrivate","ownerUsername","adminUsernames","ownerID","admins","undefined","userCount","postCount","useEffect","returnNotifType","postTitle","e","preventDefault","url","modal","useRef","modalCurrent","current","classList","remove","add","map"],"sources":["/home/jce/Web Dev Space/Syncsequence/frontEnd/src/components/notifs/notifsList.jsx"],"sourcesContent":["import * as React from 'react';\nimport {useNavigate, Link } from 'react-router-dom';\nimport APIaccess from '../../apiaccess';\nimport useUIC from '../../UIcontext';\n\nimport '../../components/base/home.css';\nimport './notifs.css';\n\nlet accessAPI = APIaccess();\n\n\nexport default function NotificationList({setNotifList, unreadCount, setUnreadCount, setSocketMessage, socketMessage, accessID, setAccessID}) {\n\n\tlet [notifs, setNotifs] = React.useState([]);\n\tlet username = sessionStorage.getItem('userName');\n\tlet userID = sessionStorage.getItem('userID');\n\tlet navigate = useNavigate();\n\tconst { logout } = useUIC();\n\n\tconsole.log(username);\n\n\tlet updateList = async() => {\n\t\tlet data = await accessAPI.getInteractions(); \n\n\t\tlet count = 0;\n\t     for(let i = 0; i < data.length; i++) {\n\t        if(data[i].isRead == false) {\n\t            count++;\n\t        }\n\t      }\n\t    if(count < 10) {\n\t      count = '0' + count;\n\t    } else if (count > 99) {\n\t      count = '99';\n\t    }\n\t    setUnreadCount(count);\n\t\tsetNotifs(data);\n\t}\n\n\tlet interact = async(arg, ID, username, postID, notif) => {\n\n\t\t/* \n\t\t\tset middle two arguments as 'undefined' when using\n\t\t\tfunction for posts / comments\n\t\t*/\n\n\t\tif(arg == 'accept') {\n\n\t\t\tlet sm = {\n\t\t\t\ttype: 'request',\n\t\t\t\trecipients: [userID],\n\t\t\t\tsenderID: ID,\n\t\t\t\tsenderUsername: username,\n\t\t\t\tmessage: 'connectionAcceptedSent',\n\t\t\t\toriginalNotif: notif._id\n\t\t\t};\n\t\t\tsetSocketMessage(sm);\n\t\t} \n\t\telse if(arg == 'markRead') {\n\n\t\t\t\tlet sm = {\n\t\t\t\t\ttype: 'markRead',\n\t\t\t\t\tnotifID: ID,\n\t\t\t\t\tuserID: userID,\n\t\t\t\t\tsenderUsername: username\n\t\t\t\t};\n\t\t\t\tlet request = await accessAPI.newInteraction(sm);\n\n\t\t\t\tlet delay = setTimeout(()=> {\n\t\t\t\t\tupdateList()\n\t\t\t\t}, 200)\n\t\t}\n\t\telse if(arg == 'accessGranted') {\n\n\t\t\tlet accessGrantedNotif = await accessAPI.newInteraction({\n\t\t\t\ttype: 'request',\n\t\t\t\tmessage: 'accessGranted',\n\t\t\t\tsenderID: userID,\n\t\t\t\trecipients: [notif.sender],\n\t\t\t\trecipientUsernames: notif.senderUsername,\n\t\t\t\tgroupName: notif.details.groupName,\n\t\t\t\tgroupID: notif.details.groupID,\n\t\t\t\toriginalID: notif._id\n\t\t\t}).then(data=> {\n\t\t\t\tif(data.confirmation) {\n\t\t\t\t\tupdateList();\n\t\t\t\t\tsetSocketMessage({\n\t\t\t\t\t\t// message: `Access granted to @${macroInfo.ownerUsername}`,\n\t\t\t\t\t\trecipients: [notif.sender],\n\t\t\t\t\t\taction: 'updateNotifs'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// let request = await accessAPI.manageGroup('addUser', {\n\t\t\t// \tuserID: notif.sender,\n\t\t\t// \tgroupID: notif.details.groupID\n\t\t\t// })\n\t\t}\n\t\telse if(arg == 'subscriptionAccepted') {\n\n\t\t\tlet body = {\n\t\t\t\ttype: 'request',\n\t\t\t\tsenderID: userID,\n\t\t\t\tsenderUsername: username,\n\t\t\t\trecipients: [notif.sender],\n\t\t\t\trecipientUsername: notif.senderUsername,\n\t\t\t\tmessage: 'subscriptionAccepted'\n\t\t\t}\n\n\t\t\tlet sm = {\n\t\t\t\t\ttype: 'markRead',\n\t\t\t\t\tnotifID: notif._id,\n\t\t\t\t\tuserID: userID,\n\t\t\t\t\t// senderUsername: username\n\t\t\t\t};\n\t\t\tlet request = await accessAPI.newInteraction(sm)\n\n\t\t\tsetSocketMessage(body);\n\t\t\tconsole.log(body);\n\n\t\t\tlet delay = setTimeout(()=> {\n\t\t\t\tupdateList()\n\t\t\t}, 200)\n\t\t}\n\t}\n\n\tlet goToUserProfile = async() => {\n\n\t\tlet data = await accessAPI.getSingleUser(userID);\n\t\t\n\t\tlet delay = setTimeout(()=> {\n\t\t\tnavigate(`/user/${username}/${userID}`)\n\t\t}, 150)\n\t}\n\n\tlet goToUserSettings = async() => {\n\n\t\tlet settings = await accessAPI.userSettings({option: 'getUserSettings'});\n\n\t\tlet delay = setTimeout(()=> {\n\t\t\tnavigate(`/${username}/settings`, {\n\t\t\t\tstate: {\n\t\t\t\t\tdata: settings\n\t\t\t\t}\n\t\t\t})\n\t\t}, 150)\n\t}\n\n\tlet goToPost = async(postID, commentID) => {\n\n\t\tlet post = await accessAPI.getBlogPost(postID);\n\t\tsetTimeout(()=> {\n\t\t\tnavigate(`/post/${postID}`, {\n\t\t\t\t\tstate: {commentID: commentID}\n\t\t\t\t})\n\t\t}, 300)\n\t}\n\n\tlet goToMacrosPage = async(macroID, macroName) => {\n\n\t\tlet tagInfo = await accessAPI.getTagData(macroID, macroName);\n\t\tlet posts = await accessAPI.groupPosts({action: 'getPosts', groupID: macroID, groupName: macroName});\n\t\tlet postsCount = posts.length;\n\n\t\tlet doesHaveAccess;\n\t\tif(tagInfo.hasAccess) {\n\t\t\tdoesHaveAccess = tagInfo.hasAccess.filter(el => el == userID);\n\t\t\tdoesHaveAccess = doesHaveAccess.length > 0 ? true : false;\n\t\t}\n\t\t\n\t\tconsole.log(tagInfo);\n\t\t\t\t\t\t\t\t\t\n\t\tsetTimeout(()=> {\n\t\t\tnavigate(`/macros/${macroName}`, {\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tname: macroName,\n\t\t\t\t\t\tposts: posts,\n\t\t\t\t\t\tmacroID: macroID,\n\t\t\t\t\t\tisPrivate: tagInfo.isPrivate,\n\t\t\t\t\t\thasAccess: doesHaveAccess,\n\t\t\t\t\t\townerUsername: tagInfo.adminUsernames ? tagInfo.adminUsernames[0] : null,\n\t\t\t\t\t\townerID: tagInfo.admins ? tagInfo.admins[0] : null,\n\t\t\t\t\t\ttype: tagInfo.type == undefined ? 'topic' : tagInfo.type,\n\t\t\t\t\t\tuserCount: tagInfo.hasAccess ? tagInfo.hasAccess.length : null,\n\t\t\t\t\t\tpostCount: postsCount ? postsCount : 0\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}, 200)\n\t}\n\n\tReact.useEffect(()=> {\n\t\tupdateList();\n\t}, [])\n\n\tReact.useEffect(()=> {\n\t\tupdateList();\n\t}, [socketMessage])\n\n\n\n\tlet returnNotifType = (notif) => {\n\n\t\tlet postTitle;\n\t\tif(!notif.details) {\n\t\t\tpostTitle = undefined; \n\t\t}\n\t\telse postTitle = notif.details.postTitle \n\t\t\n\t\t// save notif._id as key\n\t\treturn <li className=\"notif\" key={notif._id}>\n\t\t\t\t{notif.isRead == false &&\n\t\t\t\t\t<span className=\"unread\">!</span>\n\t\t\t\t}\n\n\t\t\t\t<div id=\"body\">\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionRequestSent') &&\n\t\t\t\t\t\t<p>You sent {notif.recipientUsernames[0]} a request !</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionRequestRecieved') &&\n\t\t\t\t\t\t<p>You recieved a connection request from {notif.senderUsername}</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionAcceptedSent') &&\n\t\t\t\t\t\t<p>You and {notif.senderUsername} are now connected!</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionAcceptedRecieved') &&\n\t\t\t\t\t\t<p>You and {notif.recipientUsernames[0]} are now connected!</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'comment' && notif.message == 'initial') &&\n\t\t\t\t\t\t<p>{notif.senderUsername} left a comment on your post \"{postTitle}\"</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'comment' && notif.message == 'response') &&\n\t\t\t\t\t\t<p>{notif.senderUsername} responded to your comment on \"{postTitle}\"</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'tagging' && notif.message == 'recieved') &&\n\t\t\t\t\t\t<p>{notif.senderUsername} tagged you in a post \"{postTitle}\"</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'accessRequested') &&\n\t\t\t\t\t\t<p>{notif.senderUsername} is requesting access to \"{notif.details.groupName}\"</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'subscriptionRequest') &&\n\t\t\t\t\t\t<p>You requested subscription to @{notif.recipientUsernames[0]}</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'subscriptionRequested') &&\n\t\t\t\t\t\t<p>{notif.senderUsername} wishes to subscribe</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'subscriptionAccepted') &&\n\t\t\t\t\t\t<p>{notif.recipientUsernames[0]} is now a subscriber!</p>\n\t\t\t\t\t}\n\t\t\t\t\t{/*{(notif.type == 'request' && notif.message == 'subscribed') &&\n\t\t\t\t\t\t<p>@{notif.senderUsername} is now subscribed to you!</p>\n\t\t\t\t\t}*/}\n\t\t\t\t\t{(notif.type == 'confirmation' && notif.message == 'subscribed') &&\n\t\t\t\t\t\t<p>You are now subscribed to @{notif.senderUsername}</p>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'accessGranted') &&\n\t\t\t\t\t\t<p>{notif.senderUsername} has granted you access to \"{notif.details.groupName}\"</p>\n\t\t\t\t\t}\n\n\t\t\t\t\t{notif.type == 'comment' && \n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" onClick={(e)=> {\n\t\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\t\tgoToPost(notif.url, notif.details.commentID)\n\t\t\t\t\t\t\t}}>See Comment</button>\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id, username )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{notif.type == 'tagging' &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" onClick={()=> {\n\t\t\t\t\t\t\t\tgoToPost(notif.url)\n\t\t\t\t\t\t\t\tif(notif.isRead == false) {\n\t\t\t\t\t\t\t\t\tinteract('markRead', notif._id, username )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}>See Post</button> \n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionRequestRecieved') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {\n\t\t\t\t\t\t\t\t\t\tinteract('accept', notif.sender, notif.senderUsername, undefined, notif)\n\t\t\t\t\t\t\t\t\t\tinteract('markRead', notif._id )\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tAccept\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id)}}>\n\t\t\t\t\t\t\t\tIgnore\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionRequestSent') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionAcceptedSent') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'connectionAcceptedRecieved') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'accept') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'accessGranted') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {goToMacrosPage(notif.details.groupID, notif.details.groupName)}}>\n\t\t\t\t\t\t\t\tGo To Macro\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\t\t\t\tonClick={()=> {interact('markRead', notif._id )}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'accessRequested') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {\n\t\t\t\t\t\t\t\t\t\tconsole.log(notif)\n\t\t\t\t\t\t\t\t\t\tinteract('accessGranted', undefined, undefined, undefined, notif)}}>\n\t\t\t\t\t\t\t\tGive Access\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {\n\t\t\t\t\t\t\t\t\t\tconsole.log(notif)\n\t\t\t\t\t\t\t\t\t\tinteract('markRead', notif._id)\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tIgnore\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.type == 'request' && notif.message == 'subscriptionRequested') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {\n\t\t\t\t\t\t\t\t\t\tconsole.log(notif)\n\t\t\t\t\t\t\t\t\t\tinteract('subscriptionAccepted', notif.recipients[0], undefined, undefined, notif)}}>\n\t\t\t\t\t\t\t\tAccept\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {\n\t\t\t\t\t\t\t\t\t\tconsole.log(notif)\n\t\t\t\t\t\t\t\t\t\tinteract('markRead', notif._id)\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tIgnore\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{(notif.message == 'subscribed' || notif.message == 'subscriptionAccepted') &&\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\t\t\t\tonClick={()=> {\n\t\t\t\t\t\t\t\t\t\tconsole.log(notif)\n\t\t\t\t\t\t\t\t\t\tinteract('markRead', notif._id)\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tMark Read\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t   </li>\n\t}\n\n\tlet modal = React.useRef();\n\tReact.useEffect(()=> {\n\t\tlet modalCurrent = modal.current;\n\t\tlet delay = setTimeout(()=> {\n\t\t\tmodalCurrent.classList.remove('_enter');\t\n\t\t}, 200)\n\t}, [])\n\n\treturn (\n\t\t// <div id=\"interactionsList\" ref={el} className={`${enter == true ? '_enter' : ''}`}>\n\t\t<div id=\"interactionsList\" ref={modal} className={`_enter`}> \n\n\t\t\t<div id=\"header\">\n\t\t\t\t<h2>Interactions\n\t\t\t\t\t{/*<span id='username'>{username}'s</span>*/}\n\t\t\t\t</h2>\n\t\t\t\t\n\t\t\t\t<button onClick={(e)=> {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tlet modalCurrent = modal.current;\n\t\t\t\t\t\t\tmodalCurrent.classList.add('_enter');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet delay = setTimeout(()=> {\n\t\t\t\t\t\t\t\tsetNotifList();\n\t\t\t\t\t\t\t}, 300)\n\t\t\t\t}}>\n\t\t\t\t\t<p>{unreadCount}</p>\n\t\t\t\t\t<span>⨉</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\n\t\t\t<ul id=\"notifList\">\n\t\t\t\t{notifs.map(notif => (\n\t\t\t\t\treturnNotifType(notif)\n\t\t\t\t))}\n\t\t\t</ul>\n\n\n\t\t\t<div id=\"buttonBar\">\n\t\t\t\t<button className=\"buttonDefault\"\n\t\t\t\t\t\tonClick={goToUserProfile}>PROFILE</button>\n\t\t\t\t<button className=\"buttonDefault\" \n\t\t\t\t\t\tonClick={goToUserSettings}>SETTINGS</button>\n\t\t\t</div>\n\t\t</div>\n\t)\n\n}\n\n\n/***\n * Format for socketMessage object\n * \n * type: confirmation, request, comment, tagging\n * sender:\n * recipients:\n * message: \n * \n * \n * if comment: see comment & mark read\n * if tag: see post & mark read\n * if request: accept & ignore (both mark read)\n */\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}