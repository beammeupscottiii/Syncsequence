{"ast":null,"code":"/**\n * @module ol/colorlike\n */\nimport ImageState from './ImageState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { get as getIconImage } from './style/IconImage.js';\nimport { shared as iconCache } from './style/IconImageCache.js';\nimport { toString } from './color.js';\n/**\n * @typedef {Object} PatternDescriptor\n * @property {string} src Pattern image URL\n * @property {import(\"./color.js\").Color|string} [color] Color to tint the pattern with.\n * @property {import(\"./size.js\").Size} [size] Size of the desired slice from the pattern image.\n * Use this together with `offset` when the pattern image is a sprite sheet.\n * @property {import(\"./size.js\").Size} [offset] Offset of the desired slice from the pattern image.\n * Use this together with `size` when the pattern image is a sprite sheet.\n */\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, [CanvasPattern](https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern),\n * or [CanvasGradient](https://developer.mozilla.org/en-US/docs/Web/API/CanvasGradient). The origin for\n * patterns and gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike|PatternDescriptor|null} color Color.\n * @return {ColorLike|null} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\n\nexport function asColorLike(color) {\n  if (!color) {\n    return null;\n  }\n\n  if (Array.isArray(color)) {\n    return toString(color);\n  }\n\n  if (typeof color === 'object' && 'src' in color) {\n    return asCanvasPattern(color);\n  }\n\n  return color;\n}\n/**\n * @param {PatternDescriptor} pattern Pattern descriptor.\n * @return {CanvasPattern|null} Canvas pattern or null if the pattern referenced in the\n * PatternDescriptor was not found in the icon image cache.\n */\n\nfunction asCanvasPattern(pattern) {\n  if (!pattern.offset || !pattern.size) {\n    return iconCache.getPattern(pattern.src, 'anonymous', pattern.color);\n  }\n\n  const cacheKey = pattern.src + ':' + pattern.offset;\n  const canvasPattern = iconCache.getPattern(cacheKey, undefined, pattern.color);\n\n  if (canvasPattern) {\n    return canvasPattern;\n  }\n\n  const iconImage = iconCache.get(pattern.src, 'anonymous', null);\n\n  if (iconImage.getImageState() !== ImageState.LOADED) {\n    return null;\n  }\n\n  const patternCanvasContext = createCanvasContext2D(pattern.size[0], pattern.size[1]);\n  patternCanvasContext.drawImage(iconImage.getImage(1), pattern.offset[0], pattern.offset[1], pattern.size[0], pattern.size[1], 0, 0, pattern.size[0], pattern.size[1]);\n  getIconImage(patternCanvasContext.canvas, cacheKey, undefined, ImageState.LOADED, pattern.color, true);\n  return iconCache.getPattern(cacheKey, undefined, pattern.color);\n}","map":{"version":3,"names":["ImageState","createCanvasContext2D","get","getIconImage","shared","iconCache","toString","asColorLike","color","Array","isArray","asCanvasPattern","pattern","offset","size","getPattern","src","cacheKey","canvasPattern","undefined","iconImage","getImageState","LOADED","patternCanvasContext","drawImage","getImage","canvas"],"sources":["/home/jce/Web Dev Space/Syncsequence/frontEnd/node_modules/ol/colorlike.js"],"sourcesContent":["/**\n * @module ol/colorlike\n */\nimport ImageState from './ImageState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {get as getIconImage} from './style/IconImage.js';\nimport {shared as iconCache} from './style/IconImageCache.js';\nimport {toString} from './color.js';\n\n/**\n * @typedef {Object} PatternDescriptor\n * @property {string} src Pattern image URL\n * @property {import(\"./color.js\").Color|string} [color] Color to tint the pattern with.\n * @property {import(\"./size.js\").Size} [size] Size of the desired slice from the pattern image.\n * Use this together with `offset` when the pattern image is a sprite sheet.\n * @property {import(\"./size.js\").Size} [offset] Offset of the desired slice from the pattern image.\n * Use this together with `size` when the pattern image is a sprite sheet.\n */\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, [CanvasPattern](https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern),\n * or [CanvasGradient](https://developer.mozilla.org/en-US/docs/Web/API/CanvasGradient). The origin for\n * patterns and gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike|PatternDescriptor|null} color Color.\n * @return {ColorLike|null} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (!color) {\n    return null;\n  }\n  if (Array.isArray(color)) {\n    return toString(color);\n  }\n  if (typeof color === 'object' && 'src' in color) {\n    return asCanvasPattern(color);\n  }\n  return color;\n}\n\n/**\n * @param {PatternDescriptor} pattern Pattern descriptor.\n * @return {CanvasPattern|null} Canvas pattern or null if the pattern referenced in the\n * PatternDescriptor was not found in the icon image cache.\n */\nfunction asCanvasPattern(pattern) {\n  if (!pattern.offset || !pattern.size) {\n    return iconCache.getPattern(pattern.src, 'anonymous', pattern.color);\n  }\n\n  const cacheKey = pattern.src + ':' + pattern.offset;\n\n  const canvasPattern = iconCache.getPattern(\n    cacheKey,\n    undefined,\n    pattern.color,\n  );\n  if (canvasPattern) {\n    return canvasPattern;\n  }\n\n  const iconImage = iconCache.get(pattern.src, 'anonymous', null);\n  if (iconImage.getImageState() !== ImageState.LOADED) {\n    return null;\n  }\n  const patternCanvasContext = createCanvasContext2D(\n    pattern.size[0],\n    pattern.size[1],\n  );\n  patternCanvasContext.drawImage(\n    iconImage.getImage(1),\n    pattern.offset[0],\n    pattern.offset[1],\n    pattern.size[0],\n    pattern.size[1],\n    0,\n    0,\n    pattern.size[0],\n    pattern.size[1],\n  );\n  getIconImage(\n    patternCanvasContext.canvas,\n    cacheKey,\n    undefined,\n    ImageState.LOADED,\n    pattern.color,\n    true,\n  );\n  return iconCache.getPattern(cacheKey, undefined, pattern.color);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,UAAP,MAAuB,iBAAvB;AACA,SAAQC,qBAAR,QAAoC,UAApC;AACA,SAAQC,GAAG,IAAIC,YAAf,QAAkC,sBAAlC;AACA,SAAQC,MAAM,IAAIC,SAAlB,QAAkC,2BAAlC;AACA,SAAQC,QAAR,QAAuB,YAAvB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,WAAT,CAAqBC,KAArB,EAA4B;EACjC,IAAI,CAACA,KAAL,EAAY;IACV,OAAO,IAAP;EACD;;EACD,IAAIC,KAAK,CAACC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;IACxB,OAAOF,QAAQ,CAACE,KAAD,CAAf;EACD;;EACD,IAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,SAASA,KAA1C,EAAiD;IAC/C,OAAOG,eAAe,CAACH,KAAD,CAAtB;EACD;;EACD,OAAOA,KAAP;AACD;AAED;AACA;AACA;AACA;AACA;;AACA,SAASG,eAAT,CAAyBC,OAAzB,EAAkC;EAChC,IAAI,CAACA,OAAO,CAACC,MAAT,IAAmB,CAACD,OAAO,CAACE,IAAhC,EAAsC;IACpC,OAAOT,SAAS,CAACU,UAAV,CAAqBH,OAAO,CAACI,GAA7B,EAAkC,WAAlC,EAA+CJ,OAAO,CAACJ,KAAvD,CAAP;EACD;;EAED,MAAMS,QAAQ,GAAGL,OAAO,CAACI,GAAR,GAAc,GAAd,GAAoBJ,OAAO,CAACC,MAA7C;EAEA,MAAMK,aAAa,GAAGb,SAAS,CAACU,UAAV,CACpBE,QADoB,EAEpBE,SAFoB,EAGpBP,OAAO,CAACJ,KAHY,CAAtB;;EAKA,IAAIU,aAAJ,EAAmB;IACjB,OAAOA,aAAP;EACD;;EAED,MAAME,SAAS,GAAGf,SAAS,CAACH,GAAV,CAAcU,OAAO,CAACI,GAAtB,EAA2B,WAA3B,EAAwC,IAAxC,CAAlB;;EACA,IAAII,SAAS,CAACC,aAAV,OAA8BrB,UAAU,CAACsB,MAA7C,EAAqD;IACnD,OAAO,IAAP;EACD;;EACD,MAAMC,oBAAoB,GAAGtB,qBAAqB,CAChDW,OAAO,CAACE,IAAR,CAAa,CAAb,CADgD,EAEhDF,OAAO,CAACE,IAAR,CAAa,CAAb,CAFgD,CAAlD;EAIAS,oBAAoB,CAACC,SAArB,CACEJ,SAAS,CAACK,QAAV,CAAmB,CAAnB,CADF,EAEEb,OAAO,CAACC,MAAR,CAAe,CAAf,CAFF,EAGED,OAAO,CAACC,MAAR,CAAe,CAAf,CAHF,EAIED,OAAO,CAACE,IAAR,CAAa,CAAb,CAJF,EAKEF,OAAO,CAACE,IAAR,CAAa,CAAb,CALF,EAME,CANF,EAOE,CAPF,EAQEF,OAAO,CAACE,IAAR,CAAa,CAAb,CARF,EASEF,OAAO,CAACE,IAAR,CAAa,CAAb,CATF;EAWAX,YAAY,CACVoB,oBAAoB,CAACG,MADX,EAEVT,QAFU,EAGVE,SAHU,EAIVnB,UAAU,CAACsB,MAJD,EAKVV,OAAO,CAACJ,KALE,EAMV,IANU,CAAZ;EAQA,OAAOH,SAAS,CAACU,UAAV,CAAqBE,QAArB,EAA+BE,SAA/B,EAA0CP,OAAO,CAACJ,KAAlD,CAAP;AACD"},"metadata":{},"sourceType":"module"}